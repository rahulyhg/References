<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="keywords" content="Google Cloud Messaging GCM for Android and Push Notifications - Java Tutorial Blog">
<meta name="verify-v1" content="1OVd8tvioq4O1NR0pxuDN93LbCUNz3uxPbkbevsrObw=">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="index,follow"><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://javapapers.com/feed/">
<link rel="alternate" type="text/xml" title="RSS .92" href="http://javapapers.com/feed/rss/">
<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="http://javapapers.com/feed/atom/">
<link rel="pingback" href="http://javapapers.com/xmlrpc.php">
<link rel="shortcut icon" href="http://javapapers.com/favicon.ico" type="image/x-icon">

<!-- This site is optimized with the Yoast SEO plugin v3.0.7 - https://yoast.com/wordpress/plugins/seo/ -->
<title>Google Cloud Messaging GCM for Android and Push Notifications - Java Tutorial Blog</title>
<meta name="description" content="Google cloud messaging (GCM) is an Android platform API provided by Google for sending and receiving push notifications to and from an Android application.">
<meta name="robots" content="noodp">
<link rel="canonical" href="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/a_003.htm">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Google Cloud Messaging GCM for Android and Push Notifications - Java Tutorial Blog">
<meta property="og:description" content="Google cloud messaging (GCM) is an Android platform API provided by Google for sending and receiving push notifications to and from an Android application.">
<meta property="og:url" content="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/">
<meta property="og:site_name" content="Java Tutorial Blog">
<meta property="article:tag" content="Android">
<meta property="article:section" content="Android">
<meta property="article:published_time" content="2014-01-23T21:42:19+00:00">
<meta property="article:modified_time" content="2014-09-07T03:07:35+00:00">
<meta property="og:updated_time" content="2014-09-07T03:07:35+00:00">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/gcm.png">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/Google-GCM-Notification.jpg">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/Enable-Google-Cloud-Messaging.jpg">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/Google-API-Server-Key.jpg">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/GCM-Server-Application.png">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/GCM-Java-Server-Output.png">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/Android-Google-Play-Services.jpg">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/Google-APIs.png">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/Import-Google-Lib_thumb.png">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/Google-Play-services-Android-Dependency-300x246.jpg">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/Google-Settings.png">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/Add-Google-Account-in-AVD.png">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/GCM-Android-Client-App.jpg">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/GCM-RegId-Shared.jpg">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/Android-GCM-Client-Dependencies-300x145.jpg">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/GCM-Push-Notification-Success.png">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/GCM-Broadcast-Notification.jpg">
<meta property="og:image" content="http://javapapers.com/wp-content/uploads/2014/01/GCM-Push-Notification-Received.jpg">
<!-- / Yoast SEO plugin. -->

<link rel="stylesheet" id="papers-style-css" href="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/papers_141020151.css" type="text/css" media="all">
<script src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/ca-pub-2525233393528874.js"></script><script async="" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/analytics.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-4275351-1', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body onload="prettyPrint()">
<div id="site_header">   
	<a id="java-blog" href="http://javapapers.com/" title="Java Blog"><img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/javapaperslogo.png" alt="Java Blog" width="265" height="55"></a>
	<img id="java" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/java.png" alt="Java" width="229" height="121">
</div>
<div class="content">
<div id="tutorial-body">
<h1>Google Cloud Messaging GCM for Android and Push Notifications</h1>		
<p>Google cloud messaging (GCM) is an Android platform API provided by 
Google for sending and receiving push notifications to and from an 
Android application. This is one of the most important arsenal in an 
Android developer’s armory.</p>
<p>Let us consider an email android application, it is not efficient to 
have the application ping the server to check for updates regularly. 
Mobile devices’ resources should to be used wisely as they are scarce. </p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="gcm" alt="gcm" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/gcm.png" width="200" height="114" border="0"></p>
<p>Push and pull are two types of notifications using which messages are
 transferred. In this android tutorial, I will walk you through setting 
up push notification setup between an application server and an Android 
mobile application using Google cloud messaging (GCM) API.</p>
<h2>Google Cloud Messaging GCM API</h2>
<ul>
<li>We can use GCM as a notification engine. On an event it will send a notification to an android application and vice-versa. </li>
<li>A notification is a small piece of information. Using GCM, maximum 4kb of payload can be sent in a notification. </li>
<li>For now GCM is a free service – lets use responsibly :-) </li>
<li>Android App can receive the message from Google cloud messaging 
server (GCM) even if the app is not running via Intent broadcasting (our
 example app will demonstrate this). </li>
</ul>
<h2>Getting Started with GCM</h2>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Google-GCM-Notification" alt="Google-GCM-Notification" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/Google-GCM-Notification.jpg" width="423" height="260" border="0"></p>
<p>This tutorial will have a complete working setup having,</p>
<ol>
<li>Part A – A custom web application running in an application server. 
This will connect to Google GCM server and post notification. </li>
<li>Part B – An application running in an Android virtual device 
(emulator) with an Intent capable of receiving the push notification 
from the GCM server.</li>
</ol>
<p>Interacting with Google cloud messaging server (GCM) is not 
difficult, all we need to do is get couple of configurations perfect and
 code wise just few number of lines. Overall setup involves IP Address, 
network proxy/firewall, API key and json objects which sounds like it 
will be difficult. Get a cup of green tea, start this on a positive note
 and we will get this done in half an hour.</p>
<div class="ad-size"><script async="" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/adsbygoogle.js"></script>
<!-- JP Res Mid Post -->
<ins class="adsbygoogle" style="display: block; height: 280px;" data-ad-client="ca-pub-2525233393528874" data-ad-slot="3498801173" data-ad-format="rectangle" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;" width="336" height="280" frameborder="0"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
<h2>Part A – GCM Server Application</h2>
<p>Custom web application will connect to Google cloud messaging API url
 and send notification message to GCM server to push it to the 
registered Android device. </p>
<h3>Prerequisite for Custom Application</h3>
<ol>
<li>Google API Server Key </li>
<li>GCM RegId of the Android Device to communicate via GCM </li>
</ol>
<h3>1. Google API Server Key</h3>
<ol>
<li><u>Create Google Project</u>: Go to the URL <cite><a title="https://cloud.google.com/console/project" href="https://cloud.google.com/console/project">https://cloud.google.com/console/project</a></cite> then create a project and navigate into it. </li>
<li><u>Enable Google Cloud Messaging For Android</u>: Go to menu “<em>APIs &amp; auth –&gt; APIs” </em>and switch on. <img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Enable-Google-Cloud-Messaging" alt="Enable-Google-Cloud-Messaging" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/Enable-Google-Cloud-Messaging.jpg" width="500" height="258" border="0"> </li>
<li><u>Create Server Key</u>: Go to Menu “<em>Credentials”</em> and 
under the section Public API access, click Create New Key. There are 
different types of keys and here we should use “Sever Key”.<img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Google-API---Server-Key" alt="Google-API---Server-Key" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/Google-API-Server-Key.jpg" width="500" height="429" border="0"> </li>
<li><u>Edit Allowed IPs</u>: This is to white-list a set of IP addresses
 as the server key is tied to IP addresses for security. To get your 
public IP address, in Google search type ‘my public ip address’. Click 
‘Edit allowed IPs’ and update your IP.</li>
</ol>
<h3>2. GCM RegId of the Android Device to communicate</h3>
<p>RegId uniquely identifies the Android device to communicate. From the
 Android app (client), we will make the registration and get the RegId 
from the Google GCM server. Then, we should communicate that RegId to 
the web application via some defined process.</p>
<p>In this tutorial, let us provide a callback url in the web 
application and the Android device should invoke that url to share GCM 
RegId. In the web application, get the RegId and persist it to a file.</p>
<h2>GCM Server Application in Java &amp; PHP</h2>
<p>The example presented with this tutorial demonstrates minimal 
features and in future tutorials we will see about advanced capabilities
 of GCM.</p>
<p>I have written server application for Google cloud messaging in both Java and PHP. You can use either Java or PHP.</p>
<h2>GCM Server Application in PHP</h2>
<p>In PHP its just a single file web application, just put it in your Apache.</p>
<p></p><pre class="prettyprint lang-php prettyprinted" style=""><span class="pun">&lt;?</span><span class="pln">php
	</span><span class="com">//generic php function to send GCM push notification</span><span class="pln">
   </span><span class="kwd">function</span><span class="pln"> sendPushNotificationToGCM</span><span class="pun">(</span><span class="pln">$registatoin_ids</span><span class="pun">,</span><span class="pln"> $message</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="com">//Google cloud messaging GCM-API url</span><span class="pln">
        $url </span><span class="pun">=</span><span class="pln"> </span><span class="str">'https://android.googleapis.com/gcm/send'</span><span class="pun">;</span><span class="pln">
        $fields </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span><span class="pln">
            </span><span class="str">'registration_ids'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> $registatoin_ids</span><span class="pun">,</span><span class="pln">
            </span><span class="str">'data'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> $message</span><span class="pun">,</span><span class="pln">
        </span><span class="pun">);</span><span class="pln">
		</span><span class="com">// Google Cloud Messaging GCM API Key</span><span class="pln">
		define</span><span class="pun">(</span><span class="str">"GOOGLE_API_KEY"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"AIzaSyDA5dlLInMWVsJEUTIHV0u7maB82MCsZbU"</span><span class="pun">);</span><span class="pln"> 		
        $headers </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span><span class="pln">
            </span><span class="str">'Authorization: key='</span><span class="pln"> </span><span class="pun">.</span><span class="pln"> GOOGLE_API_KEY</span><span class="pun">,</span><span class="pln">
            </span><span class="str">'Content-Type: application/json'</span><span class="pln">
        </span><span class="pun">);</span><span class="pln">
        $ch </span><span class="pun">=</span><span class="pln"> curl_init</span><span class="pun">();</span><span class="pln">
        curl_setopt</span><span class="pun">(</span><span class="pln">$ch</span><span class="pun">,</span><span class="pln"> CURLOPT_URL</span><span class="pun">,</span><span class="pln"> $url</span><span class="pun">);</span><span class="pln">
        curl_setopt</span><span class="pun">(</span><span class="pln">$ch</span><span class="pun">,</span><span class="pln"> CURLOPT_POST</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
        curl_setopt</span><span class="pun">(</span><span class="pln">$ch</span><span class="pun">,</span><span class="pln"> CURLOPT_HTTPHEADER</span><span class="pun">,</span><span class="pln"> $headers</span><span class="pun">);</span><span class="pln">
        curl_setopt</span><span class="pun">(</span><span class="pln">$ch</span><span class="pun">,</span><span class="pln"> CURLOPT_RETURNTRANSFER</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
		curl_setopt </span><span class="pun">(</span><span class="pln">$ch</span><span class="pun">,</span><span class="pln"> CURLOPT_SSL_VERIFYHOST</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">	
        curl_setopt</span><span class="pun">(</span><span class="pln">$ch</span><span class="pun">,</span><span class="pln"> CURLOPT_SSL_VERIFYPEER</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">);</span><span class="pln">
        curl_setopt</span><span class="pun">(</span><span class="pln">$ch</span><span class="pun">,</span><span class="pln"> CURLOPT_POSTFIELDS</span><span class="pun">,</span><span class="pln"> json_encode</span><span class="pun">(</span><span class="pln">$fields</span><span class="pun">));</span><span class="pln">
        $result </span><span class="pun">=</span><span class="pln"> curl_exec</span><span class="pun">(</span><span class="pln">$ch</span><span class="pun">);</span><span class="pln">				
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">$result </span><span class="pun">===</span><span class="pln"> FALSE</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">die</span><span class="pun">(</span><span class="str">'Curl failed: '</span><span class="pln"> </span><span class="pun">.</span><span class="pln"> curl_error</span><span class="pun">(</span><span class="pln">$ch</span><span class="pun">));</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        curl_close</span><span class="pun">(</span><span class="pln">$ch</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> $result</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="pun">&lt;?</span><span class="pln">php
	
	</span><span class="com">//this block is to post message to GCM on-click</span><span class="pln">
	$pushStatus </span><span class="pun">=</span><span class="pln"> </span><span class="str">""</span><span class="pun">;</span><span class="pln">	
	</span><span class="kwd">if</span><span class="pun">(!</span><span class="pln">empty</span><span class="pun">(</span><span class="pln">$_GET</span><span class="pun">[</span><span class="str">"push"</span><span class="pun">]))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">	
		$gcmRegID  </span><span class="pun">=</span><span class="pln"> file_get_contents</span><span class="pun">(</span><span class="str">"GCMRegId.txt"</span><span class="pun">);</span><span class="pln">
		$pushMessage </span><span class="pun">=</span><span class="pln"> $_POST</span><span class="pun">[</span><span class="str">"message"</span><span class="pun">];</span><span class="pln">	
		</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">isset</span><span class="pun">(</span><span class="pln">$gcmRegID</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> isset</span><span class="pun">(</span><span class="pln">$pushMessage</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">		
			$gcmRegIds </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span><span class="pln">$gcmRegID</span><span class="pun">);</span><span class="pln">
			$message </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span><span class="str">"m"</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> $pushMessage</span><span class="pun">);</span><span class="pln">	
			$pushStatus </span><span class="pun">=</span><span class="pln"> sendPushNotificationToGCM</span><span class="pun">(</span><span class="pln">$gcmRegIds</span><span class="pun">,</span><span class="pln"> $message</span><span class="pun">);</span><span class="pln">
		</span><span class="pun">}</span><span class="pln">		
	</span><span class="pun">}</span><span class="pln">
	
	</span><span class="com">//this block is to receive the GCM regId from external (mobile apps)</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(!</span><span class="pln">empty</span><span class="pun">(</span><span class="pln">$_GET</span><span class="pun">[</span><span class="str">"shareRegId"</span><span class="pun">]))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		$gcmRegID  </span><span class="pun">=</span><span class="pln"> $_POST</span><span class="pun">[</span><span class="str">"regId"</span><span class="pun">];</span><span class="pln"> 
		file_put_contents</span><span class="pun">(</span><span class="str">"GCMRegId.txt"</span><span class="pun">,</span><span class="pln">$gcmRegID</span><span class="pun">);</span><span class="pln">
		echo </span><span class="str">"Ok!"</span><span class="pun">;</span><span class="pln">
		</span><span class="kwd">exit</span><span class="pun">;</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">	
</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;html&gt;</span><span class="pln">
    </span><span class="tag">&lt;head&gt;</span><span class="pln">
        </span><span class="tag">&lt;title&gt;</span><span class="pln">Google Cloud Messaging (GCM) Server in PHP</span><span class="tag">&lt;/title&gt;</span><span class="pln">
    </span><span class="tag">&lt;/head&gt;</span><span class="pln">
	</span><span class="tag">&lt;body&gt;</span><span class="pln">
		</span><span class="tag">&lt;h1&gt;</span><span class="pln">Google Cloud Messaging (GCM) Server in PHP</span><span class="tag">&lt;/h1&gt;</span><span class="pln">	
		</span><span class="tag">&lt;form</span><span class="pln"> </span><span class="atn">method</span><span class="pun">=</span><span class="atv">"post"</span><span class="pln"> </span><span class="atn">action</span><span class="pun">=</span><span class="atv">"gcm.php/?push=1"</span><span class="tag">&gt;</span><span class="pln">					                             
			</span><span class="tag">&lt;div&gt;</span><span class="pln">                                
				</span><span class="tag">&lt;textarea</span><span class="pln"> </span><span class="atn">rows</span><span class="pun">=</span><span class="atv">"2"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"message"</span><span class="pln"> </span><span class="atn">cols</span><span class="pun">=</span><span class="atv">"23"</span><span class="pln"> </span><span class="atn">placeholder</span><span class="pun">=</span><span class="atv">"Message to transmit via GCM"</span><span class="tag">&gt;&lt;/textarea&gt;</span><span class="pln">
			</span><span class="tag">&lt;/div&gt;</span><span class="pln">
			</span><span class="tag">&lt;div&gt;&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"submit"</span><span class="pln">  </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"Send Push Notification via GCM"</span><span class="pln"> </span><span class="tag">/&gt;&lt;/div&gt;</span><span class="pln">
		</span><span class="tag">&lt;/form&gt;</span><span class="pln">
		</span><span class="tag">&lt;p&gt;&lt;h3&gt;</span><span class="pun">&lt;?</span><span class="pln">php echo $pushStatus</span><span class="pun">;</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="tag">&lt;/h3&gt;&lt;/p&gt;</span><span class="pln">        
    </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span><span class="pln">
</span></pre>
<p></p>
<p>/gcm/gcm.php is the home page using which we can send a push 
notification to Google cloud messaging server. /gcm/gcm.php?shareRegId=1
 is the callback url and can be invoked from an external application 
(like the client Android app), which wants to share the GCM Registration
 id (RegId). On invocation, RegId will be written to a file.</p>
<p> <u>Note:</u> PHP is optional. If you prefer Java, use the following as server.</p>
<h3>GCM PHP Server Application Output</h3>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="GCM-Server Application" alt="GCM-Server Application" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/GCM-Server-Application.png" width="353" height="217" border="0"></p>
<h2>GCM Server Application in Java</h2>
<p>For this tutorial, I have implemented a HTTP based App Server and have used gcm-server a <a href="http://developer.android.com/reference/com/google/android/gcm/server/package-summary.html" target="_blank">Helper library for GCM HTTP server operations</a>. It has only two files. Deploy and run using Tomcat. You can download this as a web application project bundle below.</p>
<h3>index.jsp</h3>
<p>
</p><pre class="prettyprint lang-html prettyprinted" style=""><span class="dec">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span><span class="pln">
</span><span class="tag">&lt;html</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.w3.org/1999/xhtml"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="pun">&lt;%</span><span class="pln">
	</span><span class="typ">String</span><span class="pln"> pushStatus </span><span class="pun">=</span><span class="pln"> </span><span class="str">""</span><span class="pun">;</span><span class="pln">
	</span><span class="typ">Object</span><span class="pln"> pushStatusObj </span><span class="pun">=</span><span class="pln"> request</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">"pushStatus"</span><span class="pun">);</span><span class="pln">

	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pushStatusObj </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		pushStatus </span><span class="pun">=</span><span class="pln"> pushStatusObj</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">();</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
%&gt;
</span><span class="tag">&lt;head&gt;</span><span class="pln">
</span><span class="tag">&lt;title&gt;</span><span class="pln">Google Cloud Messaging (GCM) Server in PHP</span><span class="tag">&lt;/title&gt;</span><span class="pln">
</span><span class="tag">&lt;/head&gt;</span><span class="pln">
</span><span class="tag">&lt;body&gt;</span><span class="pln">

	</span><span class="tag">&lt;h1&gt;</span><span class="pln">Google Cloud Messaging (GCM) Server in Java</span><span class="tag">&lt;/h1&gt;</span><span class="pln">

	</span><span class="tag">&lt;form</span><span class="pln"> </span><span class="atn">action</span><span class="pun">=</span><span class="atv">"GCMNotification"</span><span class="pln"> </span><span class="atn">method</span><span class="pun">=</span><span class="atv">"post"</span><span class="tag">&gt;</span><span class="pln">

		</span><span class="tag">&lt;div&gt;</span><span class="pln">
			</span><span class="tag">&lt;textarea</span><span class="pln"> </span><span class="atn">rows</span><span class="pun">=</span><span class="atv">"2"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"message"</span><span class="pln"> </span><span class="atn">cols</span><span class="pun">=</span><span class="atv">"23"</span><span class="pln">
				</span><span class="atn">placeholder</span><span class="pun">=</span><span class="atv">"Message to transmit via GCM"</span><span class="tag">&gt;&lt;/textarea&gt;</span><span class="pln">
		</span><span class="tag">&lt;/div&gt;</span><span class="pln">
		</span><span class="tag">&lt;div&gt;</span><span class="pln">
			</span><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"submit"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"Send Push Notification via GCM"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
		</span><span class="tag">&lt;/div&gt;</span><span class="pln">
	</span><span class="tag">&lt;/form&gt;</span><span class="pln">
	</span><span class="tag">&lt;p&gt;</span><span class="pln">
		</span><span class="tag">&lt;h3&gt;</span><span class="pln">
			</span><span class="pun">&lt;%=</span><span class="pln">pushStatus%&gt;
		</span><span class="tag">&lt;/h3&gt;</span><span class="pln">
	</span><span class="tag">&lt;/p&gt;</span><span class="pln">
</span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span><span class="pln">
</span></pre>
<p></p>
<h3>GCMNotification.java</h3>
<p></p><pre class="prettyprint lang-java prettyprinted" style=""><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">javapapers</span><span class="pun">.</span><span class="pln">java</span><span class="pun">.</span><span class="pln">gcm</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">BufferedReader</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">FileReader</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">PrintWriter</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">servlet</span><span class="pun">.</span><span class="typ">ServletException</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">servlet</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">WebServlet</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">servlet</span><span class="pun">.</span><span class="pln">http</span><span class="pun">.</span><span class="typ">HttpServlet</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">servlet</span><span class="pun">.</span><span class="pln">http</span><span class="pun">.</span><span class="typ">HttpServletRequest</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">servlet</span><span class="pun">.</span><span class="pln">http</span><span class="pun">.</span><span class="typ">HttpServletResponse</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">google</span><span class="pun">.</span><span class="pln">android</span><span class="pun">.</span><span class="pln">gcm</span><span class="pun">.</span><span class="pln">server</span><span class="pun">.</span><span class="typ">Message</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">google</span><span class="pun">.</span><span class="pln">android</span><span class="pun">.</span><span class="pln">gcm</span><span class="pun">.</span><span class="pln">server</span><span class="pun">.</span><span class="typ">Result</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">google</span><span class="pun">.</span><span class="pln">android</span><span class="pun">.</span><span class="pln">gcm</span><span class="pun">.</span><span class="pln">server</span><span class="pun">.</span><span class="typ">Sender</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@WebServlet</span><span class="pun">(</span><span class="str">"/GCMNotification"</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">GCMNotification</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">HttpServlet</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
	</span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> serialVersionUID </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1L</span><span class="pun">;</span><span class="pln">

	</span><span class="com">// Put your Google API Server Key here</span><span class="pln">
	</span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> GOOGLE_SERVER_KEY </span><span class="pun">=</span><span class="pln"> </span><span class="str">"AIzaSyDA5dlLInMWVsJEUTIHV0u7maB82MCsZbU"</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> MESSAGE_KEY </span><span class="pun">=</span><span class="pln"> </span><span class="str">"message"</span><span class="pun">;</span><span class="pln">	

	</span><span class="kwd">public</span><span class="pln"> </span><span class="typ">GCMNotification</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="kwd">super</span><span class="pun">();</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

	</span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> doGet</span><span class="pun">(</span><span class="typ">HttpServletRequest</span><span class="pln"> request</span><span class="pun">,</span><span class="pln">
			</span><span class="typ">HttpServletResponse</span><span class="pln"> response</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ServletException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		doPost</span><span class="pun">(</span><span class="pln">request</span><span class="pun">,</span><span class="pln"> response</span><span class="pun">);</span><span class="pln">

	</span><span class="pun">}</span><span class="pln">

	</span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> doPost</span><span class="pun">(</span><span class="typ">HttpServletRequest</span><span class="pln"> request</span><span class="pun">,</span><span class="pln">
			</span><span class="typ">HttpServletResponse</span><span class="pln"> response</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ServletException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">


		</span><span class="typ">Result</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">

		</span><span class="typ">String</span><span class="pln"> share </span><span class="pun">=</span><span class="pln"> request</span><span class="pun">.</span><span class="pln">getParameter</span><span class="pun">(</span><span class="str">"shareRegId"</span><span class="pun">);</span><span class="pln">

		</span><span class="com">// GCM RedgId of Android device to send push notification</span><span class="pln">
		</span><span class="typ">String</span><span class="pln"> regId </span><span class="pun">=</span><span class="pln"> </span><span class="str">""</span><span class="pun">;</span><span class="pln">
		</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">share </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">!</span><span class="pln">share</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			regId </span><span class="pun">=</span><span class="pln"> request</span><span class="pun">.</span><span class="pln">getParameter</span><span class="pun">(</span><span class="str">"regId"</span><span class="pun">);</span><span class="pln">
			</span><span class="typ">PrintWriter</span><span class="pln"> writer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PrintWriter</span><span class="pun">(</span><span class="str">"GCMRegId.txt"</span><span class="pun">);</span><span class="pln">
			writer</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">regId</span><span class="pun">);</span><span class="pln">
			writer</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln">
			request</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">"pushStatus"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"GCM RegId Received."</span><span class="pun">);</span><span class="pln">
			request</span><span class="pun">.</span><span class="pln">getRequestDispatcher</span><span class="pun">(</span><span class="str">"index.jsp"</span><span class="pun">)</span><span class="pln">
					</span><span class="pun">.</span><span class="pln">forward</span><span class="pun">(</span><span class="pln">request</span><span class="pun">,</span><span class="pln"> response</span><span class="pun">);</span><span class="pln">
		</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

			</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				</span><span class="typ">BufferedReader</span><span class="pln"> br </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedReader</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileReader</span><span class="pun">(</span><span class="pln">
						</span><span class="str">"GCMRegId.txt"</span><span class="pun">));</span><span class="pln">
				regId </span><span class="pun">=</span><span class="pln"> br</span><span class="pun">.</span><span class="pln">readLine</span><span class="pun">();</span><span class="pln">
				br</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln">
				</span><span class="typ">String</span><span class="pln"> userMessage </span><span class="pun">=</span><span class="pln"> request</span><span class="pun">.</span><span class="pln">getParameter</span><span class="pun">(</span><span class="str">"message"</span><span class="pun">);</span><span class="pln">
				</span><span class="typ">Sender</span><span class="pln"> sender </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Sender</span><span class="pun">(</span><span class="pln">GOOGLE_SERVER_KEY</span><span class="pun">);</span><span class="pln">
				</span><span class="typ">Message</span><span class="pln"> message </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Message</span><span class="pun">.</span><span class="typ">Builder</span><span class="pun">().</span><span class="pln">timeToLive</span><span class="pun">(</span><span class="lit">30</span><span class="pun">)</span><span class="pln">
						</span><span class="pun">.</span><span class="pln">delayWhileIdle</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">).</span><span class="pln">addData</span><span class="pun">(</span><span class="pln">MESSAGE_KEY</span><span class="pun">,</span><span class="pln"> userMessage</span><span class="pun">).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
				</span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"regId: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> regId</span><span class="pun">);</span><span class="pln">
				result </span><span class="pun">=</span><span class="pln"> sender</span><span class="pun">.</span><span class="pln">send</span><span class="pun">(</span><span class="pln">message</span><span class="pun">,</span><span class="pln"> regId</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span><span class="pln">
				request</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">"pushStatus"</span><span class="pun">,</span><span class="pln"> result</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span><span class="pln">
			</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> ioe</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				ioe</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span><span class="pln">
				request</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">"pushStatus"</span><span class="pun">,</span><span class="pln">
						</span><span class="str">"RegId required: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> ioe</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span><span class="pln">
			</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Exception</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span><span class="pln">
				request</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">"pushStatus"</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span><span class="pln">
			</span><span class="pun">}</span><span class="pln">
			request</span><span class="pun">.</span><span class="pln">getRequestDispatcher</span><span class="pun">(</span><span class="str">"index.jsp"</span><span class="pun">)</span><span class="pln">
					</span><span class="pun">.</span><span class="pln">forward</span><span class="pun">(</span><span class="pln">request</span><span class="pun">,</span><span class="pln"> response</span><span class="pun">);</span><span class="pln">
		</span><span class="pun">}</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></pre>
<p></p>
<h3>GCM Java Server Application Output</h3>
<p><img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/GCM-Java-Server-Output.png" alt="GCM-Java-Server-Output" class="alignright size-full wp-image-2053" width="400" height="252"></p>
<h2>Download GCM Java Server Application</h2>
<p>Following zip file contains the GCM Java server web application eclipse project.
</p><div class="download"><a href="http://javapapers.com/wp-content/uploads/2014/01/Java-GCM-Server-Web-Application.zip">Java GCM Server Web Application</a></div>
<p></p>
<h2>Part B – GCM Android Client Application</h2>
<p>Following Android application is a GCM client and it will,</p>
<ul>
<li>Register with GCM server and receive GCM-RegId. </li>
<li>Share the GCM-RegId with the application server. </li>
<li>Receive push notification from the GCM server and alert user. </li>
</ul>
<h2>GCM Android App Prerequisite</h2>
<ol>
<li>Google Play Services in SDK </li>
<li>Google APIs </li>
<li>Google Play Services Lib project as Android dependency </li>
<li>Google Project Id</li>
<li>Register/login with a Google account in the AVD</li>
</ol>
<p><strong>1. Google Play Services in SDK</strong>: is required for 
Google cloud messaging. Check your Android SDK Manager if you have 
installed it. It is in the bottom below Extras in the SDK Manager as 
shown below.</p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Android Google Play Services" alt="Android Google Play Services" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/Android-Google-Play-Services.jpg" width="500" height="341" border="0"></p>
<p><strong>2. Google APIs: </strong>we need “Google APIs” installed. I am using Android 4.3 with API 18. Check under your Android API version for Google API. </p>
<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Google APIs" alt="Google APIs" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/Google-APIs.png" width="471" height="348" border="0"></p>
<p><strong>3. Google-Play-Services_Lib project as Android dependency: </strong>Import
 Google play services lib project into workspace (if you use Android 
Studio skip this step). In Eclipse, Click File &gt; Import, select 
Android &gt; Existing Android Code into Workspace. This project should 
be available as part of the android-sdk download. After importing we 
need to add this project as dependency to the Android application we are
 going to create.</p>
<p><a href="http://javapapers.com/wp-content/uploads/2014/01/Import-Google-Lib.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Import Google Lib" alt="Import Google Lib" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/Import-Google-Lib_thumb.png" width="500" height="190" border="0"></a></p>
<p><a href="http://javapapers.com/wp-content/uploads/2014/01/Google-Play-services-Android-Dependency.jpg"><img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/Google-Play-services-Android-Dependency-300x246.jpg" alt="Google-Play-services-Android-Dependency" class="alignright size-medium wp-image-2126" width="300" height="246"></a></p>
<p><strong>4. Google Project Id: </strong>In the previous part during 
custom web application, we created a project in the Google console for 
creating the Google API server key. Google will assign a project Id when
 doing that. We need to use that Google project Id to register this 
Android application with the GCM server.</p>
<p><strong>5. Register/login with a Google account in the AVD: </strong>We
 need to create an Android virtual device (emulator) with the Target as 
Google API. Then start the emulator, go to list of apps, click 
‘Settings’, then ‘Add account’ and login with your Google/Gmail id.</p>
<p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="Google Settings" alt="Google Settings" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/Google-Settings.png" width="75" height="132" border="0"></p>
<p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="Add Google Account in AVD" alt="Add Google Account in AVD" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/Add-Google-Account-in-AVD.png" width="250" height="421" border="0"></p>
<h2>GCM Android Client Application</h2>
<p>The complete project with source is given for download below.</p>
<h3>RegisterActivity.java</h3>
<p>We have two buttons in this activity, first one is to register this 
Android application with the Google cloud messaging server and second 
one is to share the RegId with the web application.</p>
<p> On click of the Register button, we will use the Google Project ID 
to register with Google cloud messaging server and get the GCM RegId.</p>
<p>Second button is to share this RegId with our custom web application.
 On click the custom application’s callback url will be invoked. I am 
running the web application in same machine localhost. But we should not
 use localhost in the url, since we are connecting from the Android 
virtual device, as it will loopback to the AVD itself. We should use the
 our local-ip.</p>
<p><img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/GCM-Android-Client-App.jpg" alt="GCM-Android-Client-App" class="alignright size-full wp-image-2045" width="320" height="551"></p>
<p>After sharing the Google cloud messaging RegId to web application, we will forward to the next activity.</p>
<p>
</p><pre class="prettyprint lang-java prettyprinted" style=""><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">javapapers</span><span class="pun">.</span><span class="pln">android</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="typ">Activity</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">Context</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">Intent</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">SharedPreferences</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="pln">pm</span><span class="pun">.</span><span class="typ">PackageInfo</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="pln">pm</span><span class="pun">.</span><span class="typ">PackageManager</span><span class="pun">.</span><span class="typ">NameNotFoundException</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">os</span><span class="pun">.</span><span class="typ">AsyncTask</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">os</span><span class="pun">.</span><span class="typ">Bundle</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">text</span><span class="pun">.</span><span class="typ">TextUtils</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Log</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">view</span><span class="pun">.</span><span class="typ">View</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">widget</span><span class="pun">.</span><span class="typ">Button</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">widget</span><span class="pun">.</span><span class="typ">Toast</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">google</span><span class="pun">.</span><span class="pln">android</span><span class="pun">.</span><span class="pln">gms</span><span class="pun">.</span><span class="pln">gcm</span><span class="pun">.</span><span class="typ">GoogleCloudMessaging</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RegisterActivity</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Activity</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	</span><span class="typ">Button</span><span class="pln"> btnGCMRegister</span><span class="pun">;</span><span class="pln">
	</span><span class="typ">Button</span><span class="pln"> btnAppShare</span><span class="pun">;</span><span class="pln">
	</span><span class="typ">GoogleCloudMessaging</span><span class="pln"> gcm</span><span class="pun">;</span><span class="pln">
	</span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">;</span><span class="pln">
	</span><span class="typ">String</span><span class="pln"> regId</span><span class="pun">;</span><span class="pln">

	</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> REG_ID </span><span class="pun">=</span><span class="pln"> </span><span class="str">"regId"</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> APP_VERSION </span><span class="pun">=</span><span class="pln"> </span><span class="str">"appVersion"</span><span class="pun">;</span><span class="pln">

	</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> TAG </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Register Activity"</span><span class="pun">;</span><span class="pln">

	</span><span class="lit">@Override</span><span class="pln">
	</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCreate</span><span class="pun">(</span><span class="typ">Bundle</span><span class="pln"> savedInstanceState</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="kwd">super</span><span class="pun">.</span><span class="pln">onCreate</span><span class="pun">(</span><span class="pln">savedInstanceState</span><span class="pun">);</span><span class="pln">
		setContentView</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">layout</span><span class="pun">.</span><span class="pln">activity_register</span><span class="pun">);</span><span class="pln">

		context </span><span class="pun">=</span><span class="pln"> getApplicationContext</span><span class="pun">();</span><span class="pln">

		btnGCMRegister </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Button</span><span class="pun">)</span><span class="pln"> findViewById</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">id</span><span class="pun">.</span><span class="pln">btnGCMRegister</span><span class="pun">);</span><span class="pln">
		btnGCMRegister</span><span class="pun">.</span><span class="pln">setOnClickListener</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">View</span><span class="pun">.</span><span class="typ">OnClickListener</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			</span><span class="lit">@Override</span><span class="pln">
			</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onClick</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> arg0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">TextUtils</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">(</span><span class="pln">regId</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					regId </span><span class="pun">=</span><span class="pln"> registerGCM</span><span class="pun">();</span><span class="pln">
					</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">d</span><span class="pun">(</span><span class="str">"RegisterActivity"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"GCM RegId: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> regId</span><span class="pun">);</span><span class="pln">
				</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					</span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">makeText</span><span class="pun">(</span><span class="pln">getApplicationContext</span><span class="pun">(),</span><span class="pln">
							</span><span class="str">"Already Registered with GCM Server!"</span><span class="pun">,</span><span class="pln">
							</span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">LENGTH_LONG</span><span class="pun">).</span><span class="pln">show</span><span class="pun">();</span><span class="pln">
				</span><span class="pun">}</span><span class="pln">
			</span><span class="pun">}</span><span class="pln">
		</span><span class="pun">});</span><span class="pln">

		btnAppShare </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Button</span><span class="pun">)</span><span class="pln"> findViewById</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">id</span><span class="pun">.</span><span class="pln">btnAppShare</span><span class="pun">);</span><span class="pln">
		btnAppShare</span><span class="pun">.</span><span class="pln">setOnClickListener</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">View</span><span class="pun">.</span><span class="typ">OnClickListener</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			</span><span class="lit">@Override</span><span class="pln">
			</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onClick</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> arg0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">TextUtils</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">(</span><span class="pln">regId</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					</span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">makeText</span><span class="pun">(</span><span class="pln">getApplicationContext</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"RegId is empty!"</span><span class="pun">,</span><span class="pln">
							</span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">LENGTH_LONG</span><span class="pun">).</span><span class="pln">show</span><span class="pun">();</span><span class="pln">
				</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					</span><span class="typ">Intent</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Intent</span><span class="pun">(</span><span class="pln">getApplicationContext</span><span class="pun">(),</span><span class="pln">
							</span><span class="typ">MainActivity</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">
					i</span><span class="pun">.</span><span class="pln">putExtra</span><span class="pun">(</span><span class="str">"regId"</span><span class="pun">,</span><span class="pln"> regId</span><span class="pun">);</span><span class="pln">
					</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">d</span><span class="pun">(</span><span class="str">"RegisterActivity"</span><span class="pun">,</span><span class="pln">
							</span><span class="str">"onClick of Share: Before starting main activity."</span><span class="pun">);</span><span class="pln">
					startActivity</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span><span class="pln">
					finish</span><span class="pun">();</span><span class="pln">
					</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">d</span><span class="pun">(</span><span class="str">"RegisterActivity"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"onClick of Share: After finish."</span><span class="pun">);</span><span class="pln">
				</span><span class="pun">}</span><span class="pln">
			</span><span class="pun">}</span><span class="pln">
		</span><span class="pun">});</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

	</span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> registerGCM</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

		gcm </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GoogleCloudMessaging</span><span class="pun">.</span><span class="pln">getInstance</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span><span class="pln">
		regId </span><span class="pun">=</span><span class="pln"> getRegistrationId</span><span class="pun">(</span><span class="pln">context</span><span class="pun">);</span><span class="pln">

		</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">TextUtils</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">(</span><span class="pln">regId</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

			registerInBackground</span><span class="pun">();</span><span class="pln">

			</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">d</span><span class="pun">(</span><span class="str">"RegisterActivity"</span><span class="pun">,</span><span class="pln">
					</span><span class="str">"registerGCM - successfully registered with GCM server - regId: "</span><span class="pln">
							</span><span class="pun">+</span><span class="pln"> regId</span><span class="pun">);</span><span class="pln">
		</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			</span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">makeText</span><span class="pun">(</span><span class="pln">getApplicationContext</span><span class="pun">(),</span><span class="pln">
					</span><span class="str">"RegId already available. RegId: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> regId</span><span class="pun">,</span><span class="pln">
					</span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">LENGTH_LONG</span><span class="pun">).</span><span class="pln">show</span><span class="pun">();</span><span class="pln">
		</span><span class="pun">}</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> regId</span><span class="pun">;</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

	</span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getRegistrationId</span><span class="pun">(</span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="kwd">final</span><span class="pln"> </span><span class="typ">SharedPreferences</span><span class="pln"> prefs </span><span class="pun">=</span><span class="pln"> getSharedPreferences</span><span class="pun">(</span><span class="pln">
				</span><span class="typ">MainActivity</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getSimpleName</span><span class="pun">(),</span><span class="pln"> </span><span class="typ">Context</span><span class="pun">.</span><span class="pln">MODE_PRIVATE</span><span class="pun">);</span><span class="pln">
		</span><span class="typ">String</span><span class="pln"> registrationId </span><span class="pun">=</span><span class="pln"> prefs</span><span class="pun">.</span><span class="pln">getString</span><span class="pun">(</span><span class="pln">REG_ID</span><span class="pun">,</span><span class="pln"> </span><span class="str">""</span><span class="pun">);</span><span class="pln">
		</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">registrationId</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">i</span><span class="pun">(</span><span class="pln">TAG</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Registration not found."</span><span class="pun">);</span><span class="pln">
			</span><span class="kwd">return</span><span class="pln"> </span><span class="str">""</span><span class="pun">;</span><span class="pln">
		</span><span class="pun">}</span><span class="pln">
		</span><span class="kwd">int</span><span class="pln"> registeredVersion </span><span class="pun">=</span><span class="pln"> prefs</span><span class="pun">.</span><span class="pln">getInt</span><span class="pun">(</span><span class="pln">APP_VERSION</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">.</span><span class="pln">MIN_VALUE</span><span class="pun">);</span><span class="pln">
		</span><span class="kwd">int</span><span class="pln"> currentVersion </span><span class="pun">=</span><span class="pln"> getAppVersion</span><span class="pun">(</span><span class="pln">context</span><span class="pun">);</span><span class="pln">
		</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">registeredVersion </span><span class="pun">!=</span><span class="pln"> currentVersion</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">i</span><span class="pun">(</span><span class="pln">TAG</span><span class="pun">,</span><span class="pln"> </span><span class="str">"App version changed."</span><span class="pun">);</span><span class="pln">
			</span><span class="kwd">return</span><span class="pln"> </span><span class="str">""</span><span class="pun">;</span><span class="pln">
		</span><span class="pun">}</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> registrationId</span><span class="pun">;</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

	</span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getAppVersion</span><span class="pun">(</span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			</span><span class="typ">PackageInfo</span><span class="pln"> packageInfo </span><span class="pun">=</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">getPackageManager</span><span class="pun">()</span><span class="pln">
					</span><span class="pun">.</span><span class="pln">getPackageInfo</span><span class="pun">(</span><span class="pln">context</span><span class="pun">.</span><span class="pln">getPackageName</span><span class="pun">(),</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">
			</span><span class="kwd">return</span><span class="pln"> packageInfo</span><span class="pun">.</span><span class="pln">versionCode</span><span class="pun">;</span><span class="pln">
		</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NameNotFoundException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">d</span><span class="pun">(</span><span class="str">"RegisterActivity"</span><span class="pun">,</span><span class="pln">
					</span><span class="str">"I never expected this! Going down, going down!"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> e</span><span class="pun">);</span><span class="pln">
			</span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RuntimeException</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span><span class="pln">
		</span><span class="pun">}</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

	</span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> registerInBackground</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AsyncTask</span><void, void,="" string=""><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			</span><span class="lit">@Override</span><span class="pln">
			</span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> doInBackground</span><span class="pun">(</span><span class="typ">Void</span><span class="pun">...</span><span class="pln"> params</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				</span><span class="typ">String</span><span class="pln"> msg </span><span class="pun">=</span><span class="pln"> </span><span class="str">""</span><span class="pun">;</span><span class="pln">
				</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">gcm </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
						gcm </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GoogleCloudMessaging</span><span class="pun">.</span><span class="pln">getInstance</span><span class="pun">(</span><span class="pln">context</span><span class="pun">);</span><span class="pln">
					</span><span class="pun">}</span><span class="pln">
					regId </span><span class="pun">=</span><span class="pln"> gcm</span><span class="pun">.</span><span class="kwd">register</span><span class="pun">(</span><span class="typ">Config</span><span class="pun">.</span><span class="pln">GOOGLE_PROJECT_ID</span><span class="pun">);</span><span class="pln">
					</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">d</span><span class="pun">(</span><span class="str">"RegisterActivity"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"registerInBackground - regId: "</span><span class="pln">
							</span><span class="pun">+</span><span class="pln"> regId</span><span class="pun">);</span><span class="pln">
					msg </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Device registered, registration ID="</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> regId</span><span class="pun">;</span><span class="pln">

					storeRegistrationId</span><span class="pun">(</span><span class="pln">context</span><span class="pun">,</span><span class="pln"> regId</span><span class="pun">);</span><span class="pln">
				</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> ex</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					msg </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Error :"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> ex</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">();</span><span class="pln">
					</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">d</span><span class="pun">(</span><span class="str">"RegisterActivity"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Error: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> msg</span><span class="pun">);</span><span class="pln">
				</span><span class="pun">}</span><span class="pln">
				</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">d</span><span class="pun">(</span><span class="str">"RegisterActivity"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"AsyncTask completed: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> msg</span><span class="pun">);</span><span class="pln">
				</span><span class="kwd">return</span><span class="pln"> msg</span><span class="pun">;</span><span class="pln">
			</span><span class="pun">}</span><span class="pln">

			</span><span class="lit">@Override</span><span class="pln">
			</span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onPostExecute</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> msg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				</span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">makeText</span><span class="pun">(</span><span class="pln">getApplicationContext</span><span class="pun">(),</span><span class="pln">
						</span><span class="str">"Registered with GCM Server."</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> msg</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">LENGTH_LONG</span><span class="pun">)</span><span class="pln">
						</span><span class="pun">.</span><span class="pln">show</span><span class="pun">();</span><span class="pln">
			</span><span class="pun">}</span><span class="pln">
		</span><span class="pun">}.</span><span class="pln">execute</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

	</span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> storeRegistrationId</span><span class="pun">(</span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> regId</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="kwd">final</span><span class="pln"> </span><span class="typ">SharedPreferences</span><span class="pln"> prefs </span><span class="pun">=</span><span class="pln"> getSharedPreferences</span><span class="pun">(</span><span class="pln">
				</span><span class="typ">MainActivity</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getSimpleName</span><span class="pun">(),</span><span class="pln"> </span><span class="typ">Context</span><span class="pun">.</span><span class="pln">MODE_PRIVATE</span><span class="pun">);</span><span class="pln">
		</span><span class="kwd">int</span><span class="pln"> appVersion </span><span class="pun">=</span><span class="pln"> getAppVersion</span><span class="pun">(</span><span class="pln">context</span><span class="pun">);</span><span class="pln">
		</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">i</span><span class="pun">(</span><span class="pln">TAG</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Saving regId on app version "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> appVersion</span><span class="pun">);</span><span class="pln">
		</span><span class="typ">SharedPreferences</span><span class="pun">.</span><span class="typ">Editor</span><span class="pln"> editor </span><span class="pun">=</span><span class="pln"> prefs</span><span class="pun">.</span><span class="pln">edit</span><span class="pun">();</span><span class="pln">
		editor</span><span class="pun">.</span><span class="pln">putString</span><span class="pun">(</span><span class="pln">REG_ID</span><span class="pun">,</span><span class="pln"> regId</span><span class="pun">);</span><span class="pln">
		editor</span><span class="pun">.</span><span class="pln">putInt</span><span class="pun">(</span><span class="pln">APP_VERSION</span><span class="pun">,</span><span class="pln"> appVersion</span><span class="pun">);</span><span class="pln">
		editor</span><span class="pun">.</span><span class="pln">commit</span><span class="pun">();</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></void,></pre>
<p></p>
<h3>MainActivity.java</h3>
<p><img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/GCM-RegId-Shared.jpg" alt="GCM-RegId-Shared" class="alignright size-full wp-image-2046" width="320" height="553"></p>
<p>
</p><pre class="prettyprint lang-java prettyprinted" style=""><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">javapapers</span><span class="pun">.</span><span class="pln">android</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="typ">Activity</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">Context</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">os</span><span class="pun">.</span><span class="typ">AsyncTask</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">os</span><span class="pun">.</span><span class="typ">Bundle</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Log</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">widget</span><span class="pun">.</span><span class="typ">Toast</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MainActivity</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Activity</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	</span><span class="typ">ShareExternalServer</span><span class="pln"> appUtil</span><span class="pun">;</span><span class="pln">
	</span><span class="typ">String</span><span class="pln"> regId</span><span class="pun">;</span><span class="pln">
	</span><span class="typ">AsyncTask</span><void, void,="" string=""><span class="pln"> shareRegidTask</span><span class="pun">;</span><span class="pln">

	</span><span class="lit">@Override</span><span class="pln">
	</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCreate</span><span class="pun">(</span><span class="typ">Bundle</span><span class="pln"> savedInstanceState</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="kwd">super</span><span class="pun">.</span><span class="pln">onCreate</span><span class="pun">(</span><span class="pln">savedInstanceState</span><span class="pun">);</span><span class="pln">
		setContentView</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">layout</span><span class="pun">.</span><span class="pln">activity_main</span><span class="pun">);</span><span class="pln">
		appUtil </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ShareExternalServer</span><span class="pun">();</span><span class="pln">

		regId </span><span class="pun">=</span><span class="pln"> getIntent</span><span class="pun">().</span><span class="pln">getStringExtra</span><span class="pun">(</span><span class="str">"regId"</span><span class="pun">);</span><span class="pln">
		</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">d</span><span class="pun">(</span><span class="str">"MainActivity"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"regId: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> regId</span><span class="pun">);</span><span class="pln">

		</span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Context</span><span class="pln"> context </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
		shareRegidTask </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AsyncTask</span><void, void,="" string=""><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			</span><span class="lit">@Override</span><span class="pln">
			</span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> doInBackground</span><span class="pun">(</span><span class="typ">Void</span><span class="pun">...</span><span class="pln"> params</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				</span><span class="typ">String</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> appUtil</span><span class="pun">.</span><span class="pln">shareRegIdWithAppServer</span><span class="pun">(</span><span class="pln">context</span><span class="pun">,</span><span class="pln"> regId</span><span class="pun">);</span><span class="pln">
				</span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span><span class="pln">
			</span><span class="pun">}</span><span class="pln">

			</span><span class="lit">@Override</span><span class="pln">
			</span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onPostExecute</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				shareRegidTask </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
				</span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">makeText</span><span class="pun">(</span><span class="pln">getApplicationContext</span><span class="pun">(),</span><span class="pln"> result</span><span class="pun">,</span><span class="pln">
						</span><span class="typ">Toast</span><span class="pun">.</span><span class="pln">LENGTH_LONG</span><span class="pun">).</span><span class="pln">show</span><span class="pun">();</span><span class="pln">
			</span><span class="pun">}</span><span class="pln">

		</span><span class="pun">};</span><span class="pln">
		shareRegidTask</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span><span class="pln">
</span></void,></void,></pre>
<p></p>
<h3>GcmBroadcastReceiver.java</h3>
<p></p><pre class="prettyprint lang-java prettyprinted" style=""><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">javapapers</span><span class="pun">.</span><span class="pln">android</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="typ">Activity</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">ComponentName</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">Context</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">Intent</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">support</span><span class="pun">.</span><span class="pln">v4</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">WakefulBroadcastReceiver</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">GcmBroadcastReceiver</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">WakefulBroadcastReceiver</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	</span><span class="lit">@Override</span><span class="pln">
	</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onReceive</span><span class="pun">(</span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Intent</span><span class="pln"> intent</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="typ">ComponentName</span><span class="pln"> comp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ComponentName</span><span class="pun">(</span><span class="pln">context</span><span class="pun">.</span><span class="pln">getPackageName</span><span class="pun">(),</span><span class="pln">
				</span><span class="typ">GCMNotificationIntentService</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">());</span><span class="pln">
		startWakefulService</span><span class="pun">(</span><span class="pln">context</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">intent</span><span class="pun">.</span><span class="pln">setComponent</span><span class="pun">(</span><span class="pln">comp</span><span class="pun">)));</span><span class="pln">
		setResultCode</span><span class="pun">(</span><span class="typ">Activity</span><span class="pun">.</span><span class="pln">RESULT_OK</span><span class="pun">);</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></pre>
<p></p>
<h3>GCMNotificationIntentService.java</h3>
<p>This <a title="Android intent" href="http://javapapers.com/android/android-intent/">Android intent</a> service extends the IntentService.</p>
<p>
</p><pre class="prettyprint lang-java prettyprinted" style=""><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">javapapers</span><span class="pun">.</span><span class="pln">android</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="typ">IntentService</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="typ">NotificationManager</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="typ">PendingIntent</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">Context</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">Intent</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">os</span><span class="pun">.</span><span class="typ">Bundle</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">os</span><span class="pun">.</span><span class="typ">SystemClock</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">support</span><span class="pun">.</span><span class="pln">v4</span><span class="pun">.</span><span class="pln">app</span><span class="pun">.</span><span class="typ">NotificationCompat</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Log</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">google</span><span class="pun">.</span><span class="pln">android</span><span class="pun">.</span><span class="pln">gms</span><span class="pun">.</span><span class="pln">gcm</span><span class="pun">.</span><span class="typ">GoogleCloudMessaging</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">GCMNotificationIntentService</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">IntentService</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> NOTIFICATION_ID </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">private</span><span class="pln"> </span><span class="typ">NotificationManager</span><span class="pln"> mNotificationManager</span><span class="pun">;</span><span class="pln">
	</span><span class="typ">NotificationCompat</span><span class="pun">.</span><span class="typ">Builder</span><span class="pln"> builder</span><span class="pun">;</span><span class="pln">

	</span><span class="kwd">public</span><span class="pln"> </span><span class="typ">GCMNotificationIntentService</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="kwd">super</span><span class="pun">(</span><span class="str">"GcmIntentService"</span><span class="pun">);</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

	</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> TAG </span><span class="pun">=</span><span class="pln"> </span><span class="str">"GCMNotificationIntentService"</span><span class="pun">;</span><span class="pln">

	</span><span class="lit">@Override</span><span class="pln">
	</span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onHandleIntent</span><span class="pun">(</span><span class="typ">Intent</span><span class="pln"> intent</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="typ">Bundle</span><span class="pln"> extras </span><span class="pun">=</span><span class="pln"> intent</span><span class="pun">.</span><span class="pln">getExtras</span><span class="pun">();</span><span class="pln">
		</span><span class="typ">GoogleCloudMessaging</span><span class="pln"> gcm </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GoogleCloudMessaging</span><span class="pun">.</span><span class="pln">getInstance</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span><span class="pln">

		</span><span class="typ">String</span><span class="pln"> messageType </span><span class="pun">=</span><span class="pln"> gcm</span><span class="pun">.</span><span class="pln">getMessageType</span><span class="pun">(</span><span class="pln">intent</span><span class="pun">);</span><span class="pln">

		</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">extras</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GoogleCloudMessaging</span><span class="pun">.</span><span class="pln">MESSAGE_TYPE_SEND_ERROR
					</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">messageType</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				sendNotification</span><span class="pun">(</span><span class="str">"Send error: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> extras</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span><span class="pln">
			</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GoogleCloudMessaging</span><span class="pun">.</span><span class="pln">MESSAGE_TYPE_DELETED
					</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">messageType</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				sendNotification</span><span class="pun">(</span><span class="str">"Deleted messages on server: "</span><span class="pln">
						</span><span class="pun">+</span><span class="pln"> extras</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span><span class="pln">
			</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GoogleCloudMessaging</span><span class="pun">.</span><span class="pln">MESSAGE_TYPE_MESSAGE
					</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">messageType</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

				</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">i</span><span class="pun">(</span><span class="pln">TAG</span><span class="pun">,</span><span class="pln">
							</span><span class="str">"Working... "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">"/5 @ "</span><span class="pln">
									</span><span class="pun">+</span><span class="pln"> </span><span class="typ">SystemClock</span><span class="pun">.</span><span class="pln">elapsedRealtime</span><span class="pun">());</span><span class="pln">
					</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
						</span><span class="typ">Thread</span><span class="pun">.</span><span class="pln">sleep</span><span class="pun">(</span><span class="lit">5000</span><span class="pun">);</span><span class="pln">
					</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">InterruptedException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					</span><span class="pun">}</span><span class="pln">

				</span><span class="pun">}</span><span class="pln">
				</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">i</span><span class="pun">(</span><span class="pln">TAG</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Completed work @ "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="typ">SystemClock</span><span class="pun">.</span><span class="pln">elapsedRealtime</span><span class="pun">());</span><span class="pln">

				sendNotification</span><span class="pun">(</span><span class="str">"Message Received from Google GCM Server: "</span><span class="pln">
						</span><span class="pun">+</span><span class="pln"> extras</span><span class="pun">.</span><span class="pln">get</span><span class="pun">(</span><span class="typ">Config</span><span class="pun">.</span><span class="pln">MESSAGE_KEY</span><span class="pun">));</span><span class="pln">
				</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">i</span><span class="pun">(</span><span class="pln">TAG</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Received: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> extras</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span><span class="pln">
			</span><span class="pun">}</span><span class="pln">
		</span><span class="pun">}</span><span class="pln">
		</span><span class="typ">GcmBroadcastReceiver</span><span class="pun">.</span><span class="pln">completeWakefulIntent</span><span class="pun">(</span><span class="pln">intent</span><span class="pun">);</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

	</span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> sendNotification</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> msg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">d</span><span class="pun">(</span><span class="pln">TAG</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Preparing to send notification...: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> msg</span><span class="pun">);</span><span class="pln">
		mNotificationManager </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NotificationManager</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">this</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">getSystemService</span><span class="pun">(</span><span class="typ">Context</span><span class="pun">.</span><span class="pln">NOTIFICATION_SERVICE</span><span class="pun">);</span><span class="pln">

		</span><span class="typ">PendingIntent</span><span class="pln"> contentIntent </span><span class="pun">=</span><span class="pln"> </span><span class="typ">PendingIntent</span><span class="pun">.</span><span class="pln">getActivity</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln">
				</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Intent</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> </span><span class="typ">MainActivity</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">),</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">

		</span><span class="typ">NotificationCompat</span><span class="pun">.</span><span class="typ">Builder</span><span class="pln"> mBuilder </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotificationCompat</span><span class="pun">.</span><span class="typ">Builder</span><span class="pun">(</span><span class="pln">
				</span><span class="kwd">this</span><span class="pun">).</span><span class="pln">setSmallIcon</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">drawable</span><span class="pun">.</span><span class="pln">gcm_cloud</span><span class="pun">)</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">setContentTitle</span><span class="pun">(</span><span class="str">"GCM Notification"</span><span class="pun">)</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">setStyle</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotificationCompat</span><span class="pun">.</span><span class="typ">BigTextStyle</span><span class="pun">().</span><span class="pln">bigText</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">))</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">setContentText</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">);</span><span class="pln">

		mBuilder</span><span class="pun">.</span><span class="pln">setContentIntent</span><span class="pun">(</span><span class="pln">contentIntent</span><span class="pun">);</span><span class="pln">
		mNotificationManager</span><span class="pun">.</span><span class="pln">notify</span><span class="pun">(</span><span class="pln">NOTIFICATION_ID</span><span class="pun">,</span><span class="pln"> mBuilder</span><span class="pun">.</span><span class="pln">build</span><span class="pun">());</span><span class="pln">
		</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">d</span><span class="pun">(</span><span class="pln">TAG</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Notification sent successfully."</span><span class="pun">);</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></pre>
<p></p>
<h3>Config.java</h3>
<p>
</p><pre class="prettyprint lang-java prettyprinted" style=""><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">javapapers</span><span class="pun">.</span><span class="pln">android</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Config</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	</span><span class="com">// used to share GCM regId with application server - using php app server</span><span class="pln">
	</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> APP_SERVER_URL </span><span class="pun">=</span><span class="pln"> </span><span class="str">"http://192.168.1.17/gcm/gcm.php?shareRegId=1"</span><span class="pun">;</span><span class="pln">

	</span><span class="com">// GCM server using java</span><span class="pln">
	</span><span class="com">// static final String APP_SERVER_URL =</span><span class="pln">
	</span><span class="com">// "http://192.168.1.17:8080/GCM-App-Server/GCMNotification?shareRegId=1";</span><span class="pln">

	</span><span class="com">// Google Project Number</span><span class="pln">
	</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> GOOGLE_PROJECT_ID </span><span class="pun">=</span><span class="pln"> </span><span class="str">"512218038480"</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> MESSAGE_KEY </span><span class="pun">=</span><span class="pln"> </span><span class="str">"message"</span><span class="pun">;</span><span class="pln">

</span><span class="pun">}</span><span class="pln">
</span></pre>
<p></p>
<h3>ShareExternalServer.java</h3>
<p>
</p><pre class="prettyprint lang-java prettyprinted" style=""><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">javapapers</span><span class="pun">.</span><span class="pln">android</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">OutputStream</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">HttpURLConnection</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="typ">MalformedURLException</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="pln">URL</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">HashMap</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Iterator</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Map</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Map</span><span class="pun">.</span><span class="typ">Entry</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">Context</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> android</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Log</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ShareExternalServer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	</span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> shareRegIdWithAppServer</span><span class="pun">(</span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">,</span><span class="pln">
			</span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> regId</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

		</span><span class="typ">String</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="str">""</span><span class="pun">;</span><span class="pln">
		</span><span class="typ">Map</span><string, string=""><span class="pln"> paramsMap </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">HashMap</span><string, string=""><span class="pun">();</span><span class="pln">
		paramsMap</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="str">"regId"</span><span class="pun">,</span><span class="pln"> regId</span><span class="pun">);</span><span class="pln">
		</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			URL serverUrl </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
			</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				serverUrl </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> URL</span><span class="pun">(</span><span class="typ">Config</span><span class="pun">.</span><span class="pln">APP_SERVER_URL</span><span class="pun">);</span><span class="pln">
			</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">MalformedURLException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">e</span><span class="pun">(</span><span class="str">"AppUtil"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"URL Connection Error: "</span><span class="pln">
						</span><span class="pun">+</span><span class="pln"> </span><span class="typ">Config</span><span class="pun">.</span><span class="pln">APP_SERVER_URL</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">);</span><span class="pln">
				result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Invalid URL: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="typ">Config</span><span class="pun">.</span><span class="pln">APP_SERVER_URL</span><span class="pun">;</span><span class="pln">
			</span><span class="pun">}</span><span class="pln">

			</span><span class="typ">StringBuilder</span><span class="pln"> postBody </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">StringBuilder</span><span class="pun">();</span><span class="pln">
			</span><span class="typ">Iterator</span><entry<string, string=""><span class="pun">&gt;</span><span class="pln"> iterator </span><span class="pun">=</span><span class="pln"> paramsMap</span><span class="pun">.</span><span class="pln">entrySet</span><span class="pun">()</span><span class="pln">
					</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">();</span><span class="pln">

			</span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">iterator</span><span class="pun">.</span><span class="pln">hasNext</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				</span><span class="typ">Entry</span><string, string=""><span class="pln"> param </span><span class="pun">=</span><span class="pln"> iterator</span><span class="pun">.</span><span class="pln">next</span><span class="pun">();</span><span class="pln">
				postBody</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">param</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">()).</span><span class="pln">append</span><span class="pun">(</span><span class="str">'='</span><span class="pun">)</span><span class="pln">
						</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">param</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">());</span><span class="pln">
				</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">iterator</span><span class="pun">.</span><span class="pln">hasNext</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					postBody</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="str">'&amp;'</span><span class="pun">);</span><span class="pln">
				</span><span class="pun">}</span><span class="pln">
			</span><span class="pun">}</span><span class="pln">
			</span><span class="typ">String</span><span class="pln"> body </span><span class="pun">=</span><span class="pln"> postBody</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">();</span><span class="pln">
			</span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> bytes </span><span class="pun">=</span><span class="pln"> body</span><span class="pun">.</span><span class="pln">getBytes</span><span class="pun">();</span><span class="pln">
			</span><span class="typ">HttpURLConnection</span><span class="pln"> httpCon </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
			</span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				httpCon </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">HttpURLConnection</span><span class="pun">)</span><span class="pln"> serverUrl</span><span class="pun">.</span><span class="pln">openConnection</span><span class="pun">();</span><span class="pln">
				httpCon</span><span class="pun">.</span><span class="pln">setDoOutput</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
				httpCon</span><span class="pun">.</span><span class="pln">setUseCaches</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);</span><span class="pln">
				httpCon</span><span class="pun">.</span><span class="pln">setFixedLengthStreamingMode</span><span class="pun">(</span><span class="pln">bytes</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln">
				httpCon</span><span class="pun">.</span><span class="pln">setRequestMethod</span><span class="pun">(</span><span class="str">"POST"</span><span class="pun">);</span><span class="pln">
				httpCon</span><span class="pun">.</span><span class="pln">setRequestProperty</span><span class="pun">(</span><span class="str">"Content-Type"</span><span class="pun">,</span><span class="pln">
						</span><span class="str">"application/x-www-form-urlencoded;charset=UTF-8"</span><span class="pun">);</span><span class="pln">
				</span><span class="typ">OutputStream</span><span class="pln"> out </span><span class="pun">=</span><span class="pln"> httpCon</span><span class="pun">.</span><span class="pln">getOutputStream</span><span class="pun">();</span><span class="pln">
				out</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">bytes</span><span class="pun">);</span><span class="pln">
				out</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln">

				</span><span class="kwd">int</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> httpCon</span><span class="pun">.</span><span class="pln">getResponseCode</span><span class="pun">();</span><span class="pln">
				</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">status </span><span class="pun">==</span><span class="pln"> </span><span class="lit">200</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"RegId shared with Application Server. RegId: "</span><span class="pln">
							</span><span class="pun">+</span><span class="pln"> regId</span><span class="pun">;</span><span class="pln">
				</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Post Failure."</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">" Status: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> status</span><span class="pun">;</span><span class="pln">
				</span><span class="pun">}</span><span class="pln">
			</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">finally</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">httpCon </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
					httpCon</span><span class="pun">.</span><span class="pln">disconnect</span><span class="pun">();</span><span class="pln">
				</span><span class="pun">}</span><span class="pln">
			</span><span class="pun">}</span><span class="pln">

		</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
			result </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Post Failure. Error in sharing with App Server."</span><span class="pun">;</span><span class="pln">
			</span><span class="typ">Log</span><span class="pun">.</span><span class="pln">e</span><span class="pun">(</span><span class="str">"AppUtil"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Error in sharing with App Server: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> e</span><span class="pun">);</span><span class="pln">
		</span><span class="pun">}</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></string,></entry<string,></string,></string,></pre>
<p></p>
<h3>AndroidManifest.xml</h3>
<p>
</p><pre class="prettyprint lang-xml prettyprinted" style=""><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"utf-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;manifest</span><span class="pln"> </span><span class="atn">xmlns:android</span><span class="pun">=</span><span class="atv">"http://schemas.android.com/apk/res/android"</span><span class="pln">
    </span><span class="atn">package</span><span class="pun">=</span><span class="atv">"com.javapapers.android"</span><span class="pln">
    </span><span class="atn">android:versionCode</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln">
    </span><span class="atn">android:versionName</span><span class="pun">=</span><span class="atv">"1.0"</span><span class="pln"> </span><span class="tag">&gt;</span><span class="pln">

    </span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.INTERNET"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
    </span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.GET_ACCOUNTS"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
    </span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.WAKE_LOCK"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">

    </span><span class="tag">&lt;permission</span><span class="pln">
        </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"com.javapapers.android.permission.C2D_MESSAGE"</span><span class="pln">
        </span><span class="atn">android:protectionLevel</span><span class="pun">=</span><span class="atv">"signature"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">

    </span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"com.javapapers.android.permission.C2D_MESSAGE"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
    </span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"com.google.android.c2dm.permission.RECEIVE"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
    </span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.ACCESS_NETWORK_STATE"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
    </span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.VIBRATE"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">

    </span><span class="tag">&lt;uses-sdk</span><span class="pln">
        </span><span class="atn">android:minSdkVersion</span><span class="pun">=</span><span class="atv">"9"</span><span class="pln">
        </span><span class="atn">android:targetSdkVersion</span><span class="pun">=</span><span class="atv">"16"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">

    </span><span class="tag">&lt;application</span><span class="pln">
        </span><span class="atn">android:icon</span><span class="pun">=</span><span class="atv">"@drawable/ic_launcher"</span><span class="pln">
        </span><span class="atn">android:label</span><span class="pun">=</span><span class="atv">"@string/app_name"</span><span class="pln"> </span><span class="tag">&gt;</span><span class="pln">

        </span><span class="tag">&lt;activity</span><span class="pln">
            </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">".RegisterActivity"</span><span class="pln">
            </span><span class="atn">android:label</span><span class="pun">=</span><span class="atv">"@string/app_name"</span><span class="pln"> </span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;intent-filter&gt;</span><span class="pln">
                </span><span class="tag">&lt;action</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.intent.action.MAIN"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">

                </span><span class="tag">&lt;category</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.intent.category.LAUNCHER"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/intent-filter&gt;</span><span class="pln">
        </span><span class="tag">&lt;/activity&gt;</span><span class="pln">

        </span><span class="tag">&lt;activity</span><span class="pln">
            </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"com.javapapers.android.MainActivity"</span><span class="pln">
            </span><span class="atn">android:configChanges</span><span class="pun">=</span><span class="atv">"orientation|keyboardHidden"</span><span class="pln">
            </span><span class="atn">android:label</span><span class="pun">=</span><span class="atv">"@string/app_name"</span><span class="pln"> </span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;/activity&gt;</span><span class="pln">

        </span><span class="tag">&lt;receiver</span><span class="pln">
            </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">".GcmBroadcastReceiver"</span><span class="pln">
            </span><span class="atn">android:permission</span><span class="pun">=</span><span class="atv">"com.google.android.c2dm.permission.SEND"</span><span class="pln"> </span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;intent-filter&gt;</span><span class="pln">
                </span><span class="tag">&lt;action</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"com.google.android.c2dm.intent.RECEIVE"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
                </span><span class="tag">&lt;action</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"com.google.android.c2dm.intent.REGISTRATION"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">

                </span><span class="tag">&lt;category</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"com.javapapers.android"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/intent-filter&gt;</span><span class="pln">
        </span><span class="tag">&lt;/receiver&gt;</span><span class="pln">

        </span><span class="tag">&lt;service</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">".GCMNotificationIntentService"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
    </span><span class="tag">&lt;/application&gt;</span><span class="pln">

</span><span class="tag">&lt;/manifest&gt;</span></pre>
<p></p>
<h3>Android GCM Client Dependencies</h3>
<p>
<a href="http://javapapers.com/wp-content/uploads/2014/01/Android-GCM-Client-Dependencies.jpg"><img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/Android-GCM-Client-Dependencies-300x145.jpg" alt="Android GCM Client Dependencies" class="alignright size-medium wp-image-2124" width="300" height="145"></a></p>
<p>On sending a successful push notification to Google cloud messaging server:</p>
<p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="GCM Push Notification Success" alt="GCM Push Notification Success" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/GCM-Push-Notification-Success.png" width="640" height="133" border="0"></p>
<p>On successful receive of notification from GCM:</p>
<p>
<img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/GCM-Broadcast-Notification.jpg" alt="GCM-Broadcast-Notification" class="alignright size-full wp-image-2047" width="320" height="549"></p>
<p><img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/GCM-Push-Notification-Received.jpg" alt="GCM-Push-Notification-Received" class="alignright size-full wp-image-2048" width="320" height="552">
</p>
<h2>Download GCM Android Client Application</h2>
<p>Following zip file contains the Android application eclipse project.
</p><div class="download"><a href="http://javapapers.com/wp-content/uploads/2014/01/Android-GCM-Client-App.zip">Android GCM Client App</a></div>
<p></p>
<h2>Checklist – Things that may go wrong:</h2>
<ol>
<li>Check if you have created the 'Server Key' there are different types of keys available in Google credentials.</li>
<li>Check if you are using your public-IP address instead of local-ip, in the 'Edit Allowed IPs' in Google credentials.</li>
<li>Check if you are using the local-ip address instead of 'localhost' 
in connecting with the custom web application in the Android App.</li>
<li>Check if you have given the right Google project id in the Android app.</li>
<li>Check if you have added permission for Internet in Android manifest file.</li>
<li>Check if you have added/logged in using your Google account in AVD settings.</li>
<li>Google-play-service-Lib project may not be added in the Android app project dependency.</li>
<li>If the GCM registration_id is wrong, following is the response sent 
from Google cloud messaging server to our web application.     <br><em>{"multicast_id":7048577678678825845,"success":0,"failure":1,"canonical_ids":0,"results":[{"error":"InvalidRegistration"}]}</em></li>
<li>Connection to GCM server is ok and the server has responded. If the 
Google API key is wrong or the IP address of the server machine is not 
white listed at Google GCM server. Then we will get,     <br><em>Unauthorized Error 401</em></li>
<li>In this example, passed data must be a JSON array, check if the 
arguments are being sent in the expected format. We may get error,     <br><em>Field "data" must be a JSON array:</em></li>
</ol>
	<p>This Android tutorial was added on 23/01/2014.</p>
	<div class="ad-size">
<script async="" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/adsbygoogle.js"></script>
<!-- JP Res End Post -->
<ins class="adsbygoogle" style="display: block; height: 280px;" data-ad-client="ca-pub-2525233393528874" data-ad-slot="1882467179" data-ad-format="rectangle" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><ins id="aswift_1_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;" width="336" height="280" frameborder="0"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
	<div id="tutorial-navigation">
	<div id="previous-tutorial"><div class="navigation-label">Previous:</div><a href="http://javapapers.com/design-patterns/interpreter-design-pattern/" rel="prev">Interpreter Design Pattern</a></div>	<div id="next-tutorial"><div class="navigation-label">Next:</div><a href="http://javapapers.com/design-patterns/state-design-pattern/" rel="next">State Design Pattern</a></div> 
	</div>
	<div id="comments" class="comments-area">
        <h2 class="comments-title">Comments on "Google Cloud Messaging GCM for Android and Push Notifications" Tutorial:</h2>
    <ol class="commentlist">		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-65617">
				<div id="div-comment-65617" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-65617">
			24/01/2014 at 12:40 pm</a>		</div>

		<p>Thanks Firoz. Try this and let me know the results :-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-65618">
				<div id="div-comment-65618" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Chethan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-65618">
			24/01/2014 at 12:58 pm</a>		</div>

		<p>Great tutorial, but i have one little problem, whenever I click on 
send message button from web and when the internet is off in the device 
notification won’t come, but as soon as I turn on internet connectivity 
the previous message what I have sent when the connectivity was off is 
not coming, please help me out. Thanks.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-65647">
				<div id="div-comment-65647" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Vijay</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-65647">
			24/01/2014 at 8:50 pm</a>		</div>

		<p>What if the client does not have a google account registered ?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-65674">
				<div id="div-comment-65674" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-65674">
			25/01/2014 at 1:59 am</a>		</div>

		<p>Its required only if we are using Android Virtual Device (Emulator) to run the Client (GCM Android App).</p>
<p>If its a real mobile device, then its not required.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-66196">
				<div id="div-comment-66196" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-66196">
			29/01/2014 at 11:22 am</a>		</div>

		<p>Kyle,<br>
Using Google GCM, two-way communication is possible. Two-way means, 
application-server to mobile via GCM-server and vice versa. In this 
tutorial, I have covered the application-server to mobile via GCM-server
 part only. For the other, I am planning to write another tutorial.</p>
<p>It is possible to send broadcast to multiple mobiles from an application via GCM.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-66251">
				<div id="div-comment-66251" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">carlos</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-66251">
			29/01/2014 at 6:48 pm</a>		</div>

		<p>hi.. i have tried every step on the above tutorial and run the app 
on a real mobile not on an emulator, but every time i send message on 
server to mobile i get this 
{“multicast_id”:4968672681542797991,”success”:1,”failure”:0,”canonical_ids”:0,”results”:[{“message_id”:”0:1391001084908870%28678a6af9fd7ecd”}]}</p>
<p>but i was not able to receive any notification on my mobile.  help please</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-66288">
				<div id="div-comment-66288" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Amir Granadillo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-66288">
			30/01/2014 at 12:19 am</a>		</div>

		<p>Hello thanks for this tutorial. i have a problem thou when i 
connect to the webservice in php the txt file is always empty. In the 
android side i saw that in lolcat the regid is empty also. Do you why 
this is hapenning? i just downloaded your project and change the 
senderId,google api key,and urls… In android side it says it shared 
succsessfully to server and it does but the regId is an empty string</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-66341">
				<div id="div-comment-66341" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-66341">
			30/01/2014 at 10:57 am</a>		</div>

		<p>Granadillo,</p>
<p>Are you running in a real device or AVD? </p>
<p>Do you see any exceptions in the log?</p>
<p><code>Log.d("RegisterActivity", "GCM RegId: " + regId);</code> </p>
<p>In Android side, this line should print the GCM-RegId in log. Just 
for debugging purpose, copy that Reg-Id and paste it in the server-side 
text file which is now empty even after sharing. </p>
<p>Then check what happens…</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-66925">
				<div id="div-comment-66925" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Abhijeet</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-66925">
			03/02/2014 at 12:17 pm</a>		</div>

		<p>I have used GoogleCloudMessaging object to register my app instead 
of GCMRegistrar object.  Messages are sent from my server to gcm server.
 But from gcm server to my device (android app), not a single 
message/notification is received. I also tested points from checklist. 
Can you please help me to find out what i’m missing ?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-67037">
				<div id="div-comment-67037" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Abhijeet</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-67037">
			04/02/2014 at 9:55 am</a>		</div>

		<p>Yes Mr. Ravooru. server url is used on application server is 
correct and i also have verified that message is sent to gcm server. 
Only thing is notifications are not received on my android device.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-67051">
				<div id="div-comment-67051" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Aviral Bansal</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-67051">
			04/02/2014 at 2:02 pm</a>		</div>

		<p>Hi Joe: </p>
<p>Not sure if this is a bad question but wanted to know can an android 
app be both a GCM server and GCM client. This would remove the need to 
have server implementation and would allow virtual P2P (App-to-App) 
communication. </p>
<p>If this is not possible, then what could be the possible ways to achieve P2P communication without the need of hosting a server?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-67351">
				<div id="div-comment-67351" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kaustubh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-67351">
			06/02/2014 at 1:45 pm</a>		</div>

		<p>Hi Joe, this is a fantastic tutorial. But I am having an issue. similar to this one.<br>
I have an app which shows map and button on it. I want to notify the 
user’s current location to another mobile, when I click on that button. 
(just like facebook chat. when One friend sends message to second 
friend, second friend gets notified)<br>
How do I do that? Please help!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-69476">
				<div id="div-comment-69476" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">priyankar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-69476">
			19/02/2014 at 9:43 am</a>		</div>

		<p>hi joe,</p>
<p>i tried running the android app on a real tablet. It does not return a
 reg-id string. Please note that have not set up the server (App server)
 side code yet and just testing communication flow between my app and 
GCS (Google Cloud Server).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-69477">
				<div id="div-comment-69477" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">priyankar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-69477">
			19/02/2014 at 9:49 am</a>		</div>

		<p>hi joe, </p>
<p>after following your tutorial line by line, everything works 
correctly except that i do not get a reg id. Currently, i am only 
implemented the android app  gcs server but not the entire app  gcs 
server  app server. Could that be a reason?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-69677">
				<div id="div-comment-69677" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ashwin Ganesh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-69677">
			20/02/2014 at 11:49 am</a>		</div>

		<p>Hi Joe,</p>
<p>I have set all correctly as per the document, everything is fine. 
But, the regId is returning empty after registering. Dono, where am 
going wrong. Please help on this issue..</p>
<p>Regards<br>
Ashwin Ganesh.R</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-69723">
				<div id="div-comment-69723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">amudha</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-69723">
			20/02/2014 at 6:41 pm</a>		</div>

		<p>Even im looking for the same exact concept of yours, if u got any idea, plz let me know. thanks in advance.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-69781">
				<div id="div-comment-69781" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Partha</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-69781">
			21/02/2014 at 4:49 am</a>		</div>

		<p>You are saying us to add google play services library and using the
 old gcm lib in code. GCMRegistrar is not even available on google play 
services. What a stupid.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-69883">
				<div id="div-comment-69883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Girish</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-69883">
			21/02/2014 at 8:09 pm</a>		</div>

		<p>Hi Joe,</p>
<p>      You haven’t started service.If the application is not running i.e exited then how notification is received.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-70333">
				<div id="div-comment-70333" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">gregor</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-70333">
			24/02/2014 at 6:01 pm</a>		</div>

		<p>{“multicast_id”:8162060780822142071,”success”:0,”failure”:1,”canonical_ids”:0,”results”:[{“error”:”InvalidRegistration”}]}</p>
<p>getting this error using php. have done the following 2 things in yr code:<br>
1. Put my API key in the gcm.php file instead of what was there.<br>
2. Created a file called GCMRegId.txt with my project id in it..</p>
<p>Please help! Appreciate it!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-70500">
				<div id="div-comment-70500" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Abhijeet</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-70500">
			25/02/2014 at 6:41 pm</a>		</div>

		<p>It was Network port problem. Firewall was blocking network ports 
5228,29,30. 5228 is default port used by GCM. I unblocked that port to 
fix the issue. Thanks a lot you for the help</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-70857">
				<div id="div-comment-70857" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">user1</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-70857">
			27/02/2014 at 10:35 pm</a>		</div>

		<p>i am not getting regId please help</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-70860">
				<div id="div-comment-70860" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">user1</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-70860">
			27/02/2014 at 10:53 pm</a>		</div>

		<p>hi i am not getting regId can you please help me..</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-71591">
				<div id="div-comment-71591" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71591">
			04/03/2014 at 5:22 pm</a>		</div>

		<p>Guys,</p>
<p>I have made major changes now to the tutorial sample application / 
code. Previously I had used some deprecated API instead of 
GoogleCloudMessaging and also improved the error handling. Please check 
the latest and comment if you have any issues.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-71593">
				<div id="div-comment-71593" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71593">
			04/03/2014 at 5:24 pm</a>		</div>

		<p>Are you getting any errors. Carefully parse the application log. For sure there will be some traces. </p>
<p>Previously I had used some deprecated API instead of 
GoogleCloudMessaging and also now improved the error handling. Please 
check the latest and comment if you have any issues.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-71595">
				<div id="div-comment-71595" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71595">
			04/03/2014 at 5:29 pm</a>		</div>

		<p>1. You need to build a web application (GCM server).<br>
2. Android Application that will POST GCM Notification message to above Server.<br>
3. Now server will broadcast to all other Android apps those should 
receive the location (which will have broadcast intent receiver). – is 
the GCM Android client given in above example.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-71597">
				<div id="div-comment-71597" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71597">
			04/03/2014 at 5:31 pm</a>		</div>

		<p>Please go through the above tutorial. You may need one hour to understand and execute.</p>
<p>Downloading the projects and running it can be done in minutes.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-71599">
				<div id="div-comment-71599" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71599">
			04/03/2014 at 5:33 pm</a>		</div>

		<p>I have made major changes now to the tutorial sample application / 
code. Previously I had used some deprecated API instead of 
GoogleCloudMessaging and also improved the error handling. Please check 
the latest and comment if you have any issues.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-71600">
				<div id="div-comment-71600" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71600">
			04/03/2014 at 5:35 pm</a>		</div>

		<p>Sorry Partha, that’s my mistake.</p>
<p>I was trying too many things and posted some wrong version.</p>
<p>Please check the latest now and comment if you have any issues.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-71602">
				<div id="div-comment-71602" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71602">
			04/03/2014 at 5:40 pm</a>		</div>

		<p>Gregor,</p>
<p>You need not create GCMRegId.txt manually. When you run the Android 
App (client), it will invoke the callback url in the server-side. Then 
the server application will create the text file with device RegId in 
it.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-71603">
				<div id="div-comment-71603" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71603">
			04/03/2014 at 5:41 pm</a>		</div>

		<p>Can you please elaborate the issue. Are you not getting in the 
device side from the GCM-cloud server? or in the application server 
side?</p>
<p>Post errors/trace if any.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-71896">
				<div id="div-comment-71896" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nilesh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71896">
			06/03/2014 at 10:14 am</a>		</div>

		<p>Hi Joe,<br>
I am getting the reg_id but when i am trying to post my reg_id to my 
application server it is giving POST failure status:400. What am i doing
 wrong?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-71900">
				<div id="div-comment-71900" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71900">
			06/03/2014 at 10:33 am</a>		</div>

		<p>Nilesh,</p>
<p>The URL you are using to post to the GCM-server is malformed. Check if the URL is right.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-71925">
				<div id="div-comment-71925" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">paramvir</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71925">
			06/03/2014 at 3:10 pm</a>		</div>

		<p>hi i want to implement gcm for my android appln.<br>
i want to use device to device messaging ….<br>
means one android device can send directly message to other android device … without using third party server….<br>
is it possible…<br>
if yes plse help me…..<br>
i have all android device id….</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-71926">
				<div id="div-comment-71926" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71926">
			06/03/2014 at 3:12 pm</a>		</div>

		<p>Paramvir,<br>
I am working on that device to device communication tutorial. Will post it in a week.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1" id="comment-71930">
				<div id="div-comment-71930" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/android/android-multicast-notification-using-google-cloud-messaging-gcm/" rel="external nofollow" class="url">Android Multicast Notification using Google Cloud Messaging (GCM)</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71930">
			06/03/2014 at 3:33 pm</a>		</div>

		<p>[…] an earlier tutorial Google Cloud Messaging GCM for Android and 
Push Notifications, we discussed and worked on an example on how to send
 a notification message from an application […]</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-71950">
				<div id="div-comment-71950" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">satheesh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-71950">
			06/03/2014 at 6:29 pm</a>		</div>

		<p>Hi Joe,</p>
<p>    I successfully get the following message from my server<br>
{“multicast_id”:5034742404093744888,”success”:1,”failure”:0,”canonical_ids”:0,”results”:[{“message_id”:”0:1394109528288191%31e4cc17f9fd7ecd”}]}</p>
<p>    But i didn’t receive any notifications on my device. When i try 
to send notification from my server, my app was exited on device at the 
same time.</p>
<p>    Kindly do some needful.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-72035">
				<div id="div-comment-72035" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-72035">
			07/03/2014 at 8:57 am</a>		</div>

		<p>Hi Joe,<br>
I am using software to make my localhost public and i am now able to 
share reg_id with the server. But when i send a message, I receive GCM 
notification stating ‘Message Received from Google GCM Server:null’.<br>
What could i be doing wrong?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-72038">
				<div id="div-comment-72038" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-72038">
			07/03/2014 at 9:25 am</a>		</div>

		<p>Satheesh,</p>
<p>In the Android app side, check for log messages. Once you receive the
 message bundle it will print log message stating that it has received 
message. When your app crashes it will also leave trace in log. Share 
all those here and lets find out.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-72039">
				<div id="div-comment-72039" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-72039">
			07/03/2014 at 9:28 am</a>		</div>

		<p>‘Message Received from Google GCM Server:null’ – this is shown in the Android App UI (Intent).</p>
<p>Can you check the Android log for error messages?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-72044">
				<div id="div-comment-72044" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tony</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-72044">
			07/03/2014 at 10:15 am</a>		</div>

		<p>Hi Joe,</p>
<p>I have the same problem. I tried to send “asdsdad” from the form, and
 it shown {“multicast_id”:7879656234367994045,”success”:1, 
“failure”:0,”canonical_ids”:0, “results”:[{“message_id”: 
“0:1394166356544304%31e4cc17f9fd7ecd”}]}</p>
<p>Then, a few seconds later, I got a GCM Notification: “Message 
Received from Google GCM Server:null”. When I click on that, it shown 
“RegId shared with Application server. RegId:Null”</p>
<p>I tried to send several times, and until it shown error in the php 
side “{“multicast_id”:5824038452200434731,”success”:0, 
“failure”:1,”canonical_ids”:0, 
“results”:[{“error”:”InvalidRegistration”}]}”<br>
I checked the file GCMRegId.txt, and I found that its content was deleted.</p>
<p>In the LogCat, it shown:03-06 23:41:40.427: 
I/GCMNotificationIntentService(925): Received: Bundle[{m=asdsdad, 
from=1033922223757, android.support.content.wakelockid=9, 
collapse_key=do_not_collapse}]<br>
And I can see the true message “asdsdad” in the log.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-72045">
				<div id="div-comment-72045" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-72045">
			07/03/2014 at 10:18 am</a>		</div>

		<p>It is working now, in your code one change is required in Config.java.<br>
String MESSAGE_KEY = “message”; it should be String MESSAGE_KEY = “m”; That fixed the issue for me.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-72051">
				<div id="div-comment-72051" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-72051">
			07/03/2014 at 11:00 am</a>		</div>

		<p>Tony,</p>
<p>Great!</p>
<p>The message key should be same as in the server-side and Android 
client-side. With respect to Google GCM it has got nothing to do. :-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-72673">
				<div id="div-comment-72673" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jake</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-72673">
			11/03/2014 at 4:23 am</a>		</div>

		<p>Hi,</p>
<p>Thanks for the best GCM tutorial out there! I am using a server on 
the web and am getting an Unauthorized message when I try to send a 
message through the php. I’ve checked both the API key and my IP is 
listed in Google, I can’t seem to find the problem. Could it have 
something to do with that my server is not related to my ip, or do you 
have any ideas?</p>
<p>Thanks,<br>
Jake</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-72674">
				<div id="div-comment-72674" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tony</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-72674">
			11/03/2014 at 4:32 am</a>		</div>

		<p>Hi Joe,</p>
<p>I have done this tutorial, but if I touch the notification from the 
status bar, the regId in GCMRegId.txt is deleted, and the content of 
that file is replaced by “null”, and I have to click on “register…” and 
“share…” buttons to make work again. And another question is how to make
 sound when the notification comes, since if the phone is in screen 
timeout state, the notification comes silently and does not turn the 
phone screen on. How can I fix those things? Thank you Joe!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-72727">
				<div id="div-comment-72727" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">BhuwaneshSinha</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-72727">
			11/03/2014 at 11:48 am</a>		</div>

		<p>Guyz.. if you are doing everything perfectly and not getting notifications on your device..though<br>
you get MessageId from GCM server..<br>
Your incoming packets to device must be blocked by your forewall… Try 
using real device with its own internet connection and not the one using
 WiFi.<br>
Or try to run the same project at your home with a personal WiFi connection.. (y)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-72839">
				<div id="div-comment-72839" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">hitesh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-72839">
			11/03/2014 at 9:05 pm</a>		</div>

		<p>Sir,i am getting an exception in ShareExternalServer class….i.e 
IOException is occuring when i am trying to register the app with the 
web server…what could be the problem ?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-74434">
				<div id="div-comment-74434" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">keith</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-74434">
			19/03/2014 at 8:49 am</a>		</div>

		<p>Hi , it’s a good tutorial , hmm , is there any other way to push a 
notification  in android without using google cloud messaging(GCM)?. i 
want to create an app that will notify all user’s in android and iOS,  
but i don’t know where to start. Anyway TIA.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-74535">
				<div id="div-comment-74535" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Binu</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-74535">
			19/03/2014 at 3:45 pm</a>		</div>

		<p>Sir, thanks for the tutorial..I have a problem, My client side 
indicate that regid successfully send the to webserver. But icant 
receive regid in my webserver(it is in java).what are the possible 
chances for this pblm? Can u please me!!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-74925">
				<div id="div-comment-74925" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ayush</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-74925">
			21/03/2014 at 12:29 am</a>		</div>

		<p>Hello</p>
<p>I am facing the following issue.</p>
<p>“Registered with GCM Server.Error:<br>
SERVICE_NOT_AVAILABLE”</p>
<p>It looks like I am not able to connect eith GCM service correctly. Please provide me the solution.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-76164">
				<div id="div-comment-76164" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">comer</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76164">
			25/03/2014 at 10:08 am</a>		</div>

		<p>I am facing the same issue. I am testing on a real phone without a sim card. Is this the reason?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-76185">
				<div id="div-comment-76185" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">vasantha</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76185">
			25/03/2014 at 12:16 pm</a>		</div>

		<p>android app working fine but  app server in php  doent work properly…<br>
could you please help in this topic?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-76291">
				<div id="div-comment-76291" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nick halden</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76291">
			25/03/2014 at 7:35 pm</a>		</div>

		<p>hello joe..i am getting notifications..but i have 2 problems remaining.</p>
<p>1.Notification can show what i typed in php using MESSAGE_KEY variable.<br>
but application is not understanding MESSAGE_KEY</p>
<p>2.Tell me how to update PHP file for storing multiple reg id s ??</p>
<p>kindly help me urgently coz i have to show my project at 31st of march…</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-76483">
				<div id="div-comment-76483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">sunil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76483">
			26/03/2014 at 10:35 am</a>		</div>

		<p>i am trying to run the app using web apps t(servlet)<br>
but its troom wing exception GCMRegId.txt not found,from where configure the text file GCMRegId.txt</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-76494">
				<div id="div-comment-76494" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76494">
			26/03/2014 at 11:12 am</a>		</div>

		<p>what is the way to use in miobile……plz rpl</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-76599">
				<div id="div-comment-76599" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ria</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76599">
			26/03/2014 at 7:57 pm</a>		</div>

		<p>I am getting this on server:<br>
{“multicast_id”:4739377494510639849,”success”:1,”failure”:0,”canonical_ids”:0,”results”:[{“message_id”:”0:1395843739625862%31e4cc17f9fd7ecd”}]}</p>
<p>But on an emulator wen i send msg 4m server it stops working. Evn on 
real device its happening the same. Also am getting the same RegID on 
emulator and real device.. Plz help.. I need it urgently</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-76600">
				<div id="div-comment-76600" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ria</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76600">
			26/03/2014 at 8:00 pm</a>		</div>

		<p>Evn am having same problem.. Did u solve it?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-76615">
				<div id="div-comment-76615" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76615">
			26/03/2014 at 8:56 pm</a>		</div>

		<p>This example Android app is working for me and for many others too.</p>
<p>There might be something missing in your configuration. Need more detail to help you.</p>
<p>Can you check the log and post the detail like exception trace.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-76617">
				<div id="div-comment-76617" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76617">
			26/03/2014 at 8:57 pm</a>		</div>

		<p>See, the same thing again. Can you please be specific about the error you get.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-76620">
				<div id="div-comment-76620" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76620">
			26/03/2014 at 9:02 pm</a>		</div>

		<p>For 1. what is the error you get? </p>
<p>For 2. Hope you have read my other tutorial <a href="http://javapapers.com/android/android-multicast-notification-using-google-cloud-messaging-gcm/" rel="nofollow">http://javapapers.com/android/android-multicast-notification-using-google-cloud-messaging-gcm/</a> </p>
<p>I have given the code for multiple reg ids in Java. Instead of 
rewriting the regid.txt file everytime, you need to append the regids 
and second thing is the request should be appended and posted to Google 
GCM server.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-76621">
				<div id="div-comment-76621" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76621">
			26/03/2014 at 9:05 pm</a>		</div>

		<p>Please avoid sms language, its difficult to read.</p>
<p>So the message is successfully sent by the GCM-server application and
 the GCM-client (Android app) is not receiving it. Is my understanding 
right?</p>
<p>If so, when the Android app stops working, can you watch the log and report what you get?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-76642">
				<div id="div-comment-76642" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ria</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76642">
			26/03/2014 at 10:06 pm</a>		</div>

		<p>whenever I send message from server the app crashes and i get these errors</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-76680">
				<div id="div-comment-76680" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nick halden</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76680">
			26/03/2014 at 11:42 pm</a>		</div>

		<p>1. MESSAGE_KEY=”m” . and i see real value of m(strings i typed in 
php)only in notification.my activity shows ‘m’ as value of MESSAGE_KEY.</p>
<p>for 2. i have uploaded php to 000webhost which is free it doesnt 
support jsp.so plssss.. tell me what to do with php.please tell me how 
to edit that php for storing reg ids in regid.txt</p>
<p>plus 3. GCM forgets my device in a minute or 2.and  i have to re-register after nearly 5 minutes..</p>
<p>4. can i use GCM for sending alerts to more than a million 
devices???? tell me when u will be online..we ll sort this out.because i
 have to show some progress in my project on 29th of march.<br>
thank u joe..u r like a boon to newbies. :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-76682">
				<div id="div-comment-76682" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nick halden</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76682">
			26/03/2014 at 11:46 pm</a>		</div>

		<p>com.javapapers.android.GcmBroadcastReceiver: java.lang.ClassNotFoundException: </p>
<p>i guess ..there is some mistake in importing library services.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-76854">
				<div id="div-comment-76854" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76854">
			27/03/2014 at 12:02 pm</a>		</div>

		<p>Check the IP address of the GCM application server and see if you can reach it.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-76858">
				<div id="div-comment-76858" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76858">
			27/03/2014 at 12:14 pm</a>		</div>

		<p>Using a free-hosting webhost to learn a new technology will not 
workout. They may not give you enough privilege and it will be always 
behind a strong firewall. Debugging will be an issue always.</p>
<p>Why not try in your local machine. For the Google GCM server, if you 
are a Java guy, use the same sample I have given and it should work with
 only Android server key and project id change.</p>
<p>If you wish to work based on PHP, you my try XAMPP to create a PHP 
setup in local and work based on it. This setup can be done in minutes.</p>
<p>Please throw away the Internet free-hosting stuff for these kind of 
tutorial based learning. As I have stated in my tutorial above, Google 
GCM project is all about setting up the environment and configurations. 
Code is very simple. So, get your local environment fixed first. Once 
things are running and then you can see about hosting it live :-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-76904">
				<div id="div-comment-76904" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76904">
			27/03/2014 at 5:59 pm</a>		</div>

		<p>I can register with the GCM server and I can share my GCM RegID 
with the app server. However when I try and send a message I get the 
following error:</p>
<p>Warning: file_get_contents(GCMRegId.txt): failed to open stream: No 
such file or directory in /Library/WebServer/Documents/gcm/gcm.php on 
line 37</p>
<p>So it looks like GCMRegId.txt is not being created. Any ideas?</p>
<p>Thanks</p>
<p>Great tutorial by the way</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-76923">
				<div id="div-comment-76923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nick halden</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76923">
			27/03/2014 at 7:52 pm</a>		</div>

		<p>thanx joe…i get the notifications..everything is fine.but i need your guidance for next step.which is ..<br>
1.i want to show what i typed in server in an activity.</p>
<p>for example if i send “hii” from server ..for php $message=hiii<br>
and in config.java file MESSAGE_KEY=”message”<br>
the problem is “hii” is only seen in notifications.when i try to pass 
that string in an activity it sees “hii” as “message” and as a result i 
see “message” as value of MESSAGE_KEY </p>
<p>i want to show in the activity what i typed in server after clicking the notification..</p>
<p>as u suggested, for multiple devices i will try java in my localhost 
but as i get notifications properly, i dont think firewalls are an issue
 .so adding multiple reg Ids to php array seems simple to me  :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-76970">
				<div id="div-comment-76970" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nick halden</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-76970">
			27/03/2014 at 11:13 pm</a>		</div>

		<p>hey joe…i did it.. all previous questions are solved ..<br>
i didnt know about the ‘msg’ variable in notification..<br>
i want an activity containing various images which is opened after respected alert is clicked.. how to..?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-77110">
				<div id="div-comment-77110" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-77110">
			28/03/2014 at 2:55 pm</a>		</div>

		<p>Thanks David.</p>
<p>Looks like the GCMRegId.txt file is not getting created.</p>
<p>Can you manually create this file and keep it empty at the application-server root and then try?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-77152">
				<div id="div-comment-77152" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nick halden</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-77152">
			28/03/2014 at 6:59 pm</a>		</div>

		<p>so happy that you are writing a tutorial for that soon…if possible 
plssssss upload the tutorial this week..or tell me when will u upload 
that?i am working for an application which will help finding missing 
people,criminals.. :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-77243">
				<div id="div-comment-77243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Niko</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-77243">
			29/03/2014 at 2:21 am</a>		</div>

		<p>Hey! Awesome tutorial, thanks for it.</p>
<p>I’m now facing a problem tho.</p>
<p>The app gets gerID from GCM and it is able to send it to our server 
and the php server application is able to write it into the text file as
 supposed to.</p>
<p>The problem comes when I try to send push message trough the php app.<br>
I get this:</p>
<p>{“multicast_id”:5760807111590163335,”success”:0,”failure”:1,”canonical_ids”:0,”results”:[{“error”:”MismatchSenderId”}]}</p>
<p>What could be causing this? </p>
<p>Thank you.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-77404">
				<div id="div-comment-77404" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Niko</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-77404">
			29/03/2014 at 4:56 pm</a>		</div>

		<p>Solved. Had to reinstall the app.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-77448">
				<div id="div-comment-77448" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Sky</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-77448">
			29/03/2014 at 7:26 pm</a>		</div>

		<p>Hi Joe,<br>
Thanks for your tutorial, very useful. And I have run successfully in my
 app client site, which shows “RegID shared with Application Server”. 
However, I have two little problem: (I am using Java)</p>
<p>1. the link for the java should be<br>
&nbsp;&nbsp;“xxx/GCMNotification.java?shareRegId=1”;<br>
instead of<br>
&nbsp;&nbsp;“xxx/GCMNotification?shareRegId=1”;<br>
otherwise, I would get a “404 error”</p>
<p>2. I have problem of the server site, actually I am little focusing 
about the data process of the web server. How can I get the result page 
(with the regID) automatically? I can only open the index.jsp page, but 
how to let the result shows like yours? I can’t do that, please give 
some advice:)</p>
<p>Cheers,<br>
Sky</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-77683">
				<div id="div-comment-77683" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Akshay</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-77683">
			30/03/2014 at 11:19 am</a>		</div>

		<p>how to send message from Android device to Google Cloud Messaging server..?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1" id="comment-77801">
				<div id="div-comment-77801" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/android/android-device-to-device-messaging-using-google-cloud-messaging-gcm-via-http/" rel="external nofollow" class="url">Android Device to Device Messaging using Google Cloud Messaging (GCM) via Http</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-77801">
			30/03/2014 at 10:01 pm</a>		</div>

		<p>[…] just starting with Google Cloud Messaging (GCM), I recommend 
you to go through the earlier tutorial Google Cloud Messaging GCM for 
Android and Push Notifications. It gives you more detailed step by step 
instruction to get started with Google Cloud Messaging. In […]</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-77937">
				<div id="div-comment-77937" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">aju</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-77937">
			31/03/2014 at 10:19 am</a>		</div>

		<p>What are the problems behind “error:InvalidRegistration”??Only the incorrect reistration id?</p>
<p>I tried to send messages to an android app. every time i got the same output .that is shown below:</p>
<p>{“multicast_id”:9115386997854774649,”success”:0,”failure”:1,”canonical_ids”:0,”results”:[{“error”:”InvalidRegistration”}]}</p>
<p>I am sure that the registration id is correct. yet i don’t know why it happens so..</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-78493">
				<div id="div-comment-78493" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nick halden</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-78493">
			02/04/2014 at 12:27 am</a>		</div>

		<p>hello joe,<br>
there is no error but..<br>
i see my alerts sent from server in activity.but i see first alert only even if i try to view new alerts.</p>
<p>i copied my code in onresume() method but nothing happened.tell me 
how do i set text dynamically with respect to alerts.i have to reinstall
 the app again n again in order to see updated alerts….</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-78649">
				<div id="div-comment-78649" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nick halden</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-78649">
			02/04/2014 at 12:27 pm</a>		</div>

		<p>make sure that it was shared with ur app server.and make sure u allow any IPs in your google console settings</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-78788">
				<div id="div-comment-78788" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">sha</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-78788">
			03/04/2014 at 12:22 am</a>		</div>

		<p>Have got internet on emulator..i’ve checked that still it shows<br>
“Registered with GCM Server.Error:<br>
SERVICE_NOT_AVAILABLE”</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-78791">
				<div id="div-comment-78791" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">sha</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-78791">
			03/04/2014 at 12:34 am</a>		</div>

		<p>I haven’t coded server part just want to get reg_id first bt am unable to get that due to above stated error</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-78821">
				<div id="div-comment-78821" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nick halden</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-78821">
			03/04/2014 at 3:15 am</a>		</div>

		<p>make sure you have added all the permissions.and your emulator is 
connected to the internet.last option:try turning off ur  fierewalls.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-78867">
				<div id="div-comment-78867" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-78867">
			03/04/2014 at 6:02 am</a>		</div>

		<p>thank’s this tutorial is good<br>
i use this tutorial to make my gcm service,<br>
this tutorial successfully work on my android emulator but after i tray 
on my real device my apps cannot get the gcm notification.<br>
anyone can help me?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-78870">
				<div id="div-comment-78870" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">phapeng</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-78870">
			03/04/2014 at 6:14 am</a>		</div>

		<p>thank’s this tutorial is good<br>
i use this tutorial to make my gcm service,<br>
this tutorial successfully work on my android emulator but after i tray 
on my real device my apps cannot get the gcm notification.<br>
anyone can help me?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-79016">
				<div id="div-comment-79016" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kyaw Zin Htun</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-79016">
			03/04/2014 at 4:03 pm</a>		</div>

		<p>When I run GCM server application, the following error occurs<br>
RegId required: java.io.FileNotFoundException: GCMRegId.txt (The system cannot find the file specified)<br>
please let me know any answer.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-80155">
				<div id="div-comment-80155" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">yesuraju</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-80155">
			06/04/2014 at 10:13 pm</a>		</div>

		<p>I had implemented GCM Appliction It works fine in emulator but 
while comming to the Mobile device it shows GCM error even after adding 
google account to my phone</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-81620">
				<div id="div-comment-81620" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Litzer</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-81620">
			11/04/2014 at 10:47 pm</a>		</div>

		<p>Just a few tips for success in this example:<br>
-Remember, when you change the data in Config.java or other in this 
Android project, Build the project another time to apply the changes!!<br>
-BEWARE! IT’S A MISTAKE, YOU’LL NEED TO CORRECT THIS: Change parameter 
to send notificacion to GCM in PHP (in my case) app server: $message = 
array(“m” =&gt; $pushMessage); to —&gt; $message = array(“message” =&gt;
 $pushMessage);<br>
-And yeah, at the first try be in localhost.</p>
<p>Thank you very much for the tutorial, Joe.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-81633">
				<div id="div-comment-81633" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Litzer</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-81633">
			12/04/2014 at 12:37 am</a>		</div>

		<p>I have a question. In GCMNotificationIntentService.java there is 
the message’s handler. Well, there is a thread sleep, I’m wondering why 
this 5×3 seconds of wait is necessary. It’s a performance requeriment?? 
or a simulation of massive usage of the system??? </p>
<p>Commented this bucle, the response becomes immediate.  </p>
<p>Zach Baudrey, I think you need to correct the mistake I was talking about.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-82055">
				<div id="div-comment-82055" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-82055">
			13/04/2014 at 11:52 am</a>		</div>

		<p>You should check the key using which the message is retrieved at 
the Android client side. It should be same as being sent from the GCM 
Server side. May be, you should print the complete message in the 
Android log and check.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-82249">
				<div id="div-comment-82249" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dean Blakely</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-82249">
			14/04/2014 at 4:54 am</a>		</div>

		<p>I’m sorry but I’m having problems with your tutorial . . .</p>
<p>I can’t seem to open GCM-App-Sever in Eclipse.  After unziping I 
tried to import it into a new workspace but Eclipse says it’s not a 
project.  I tried opening it directly in Eclipse but the same thing.  
What could I be doing wrong.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-83275">
				<div id="div-comment-83275" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Arun</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-83275">
			16/04/2014 at 11:12 am</a>		</div>

		<p>Dear Joe,<br>
  The ‘Java GCM Server Web Application’ package seems, not a complete 
enclipse androis project. I could not ‘import’ it as android project in 
eclipse.<br>
  But ‘client’ application project is getting imported in Eclipse.</p>
<p>  Is anything wrong in my approach? Please guide me in loading the server application.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-83849">
				<div id="div-comment-83849" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-83849">
			17/04/2014 at 2:51 pm</a>		</div>

		<p>You have issue with dependency. Check in section-3 under “GCM Android App Prerequisite”.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-83863">
				<div id="div-comment-83863" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Girish</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-83863">
			17/04/2014 at 3:41 pm</a>		</div>

		<p>Registration id generated succefully in adroid device…<br>
But when run Java Application it gives following error.<br>
RegId required: com.google.android.gcm.server.InvalidRequestException: HTTP Status Code: 401</p>
<p>Help plz…</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-83901">
				<div id="div-comment-83901" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anuj Garg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-83901">
			17/04/2014 at 6:13 pm</a>		</div>

		<p>Hi,</p>
<p>I want to Send current location from my Device to Application Server as a response to the Request made by Application Server.</p>
<p>Example :<br>
Consider a Passenger waiting for a Driver<br>
1. Passenger Requests to Application Server from its app,<br>
2. Application Server Requests the Driver on its app,<br>
3. Driver’s Location is Sent to Application Server.</p>
<p>What I figured out through GCM is we can Send / Recieve Messages to 
GCM. I just Want to know How we can send Location Through GCM.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-84337">
				<div id="div-comment-84337" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Girish</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-84337">
			18/04/2014 at 11:12 am</a>		</div>

		<p>Hello Dear jeo,<br>
I have successfully register regId and send message and<br>
get follwing output<br>
“[ messageId=0:1397796580428924%31e4cc17f9fd7ecd ] ”</p>
<p>But i could not receive message in emulator…<br>
I am getting following “error log”<br>
“connectionClose : no XMPPConnection – That’s strange!”<br>
Please help.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-86354">
				<div id="div-comment-86354" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">suyash agarwal</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-86354">
			21/04/2014 at 3:57 pm</a>		</div>

		<p>How can I make sure that it is shared with my app server? Im using 
MAMP and in the config.java file, i enter the url as my ip address and 
then gcm/gcm.php?shareRegId=1 which is the path to the file. Still I get
 the same error as mentioned above. The url to the server is correct, as
 when i try to connect to other php files from the same ip address, they
 work perfectly fine. </p>
<p>I am uses php implementation for the server.</p>
<p>Sorry, if my question is too trivial. I am a total newbie to android development. Your help would be most appreciated.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-86395">
				<div id="div-comment-86395" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ruchita</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-86395">
			21/04/2014 at 5:53 pm</a>		</div>

		<p>I got this error:</p>
<p>{“multicast_id”:4926266773825479032,”success”:0,”failure”:1,”canonical_ids”:0,”results”:[{“error”:”MismatchSenderId”}]}</p>
<p>Please help.. I am sure that i have provide correct project id and api key</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-87983">
				<div id="div-comment-87983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">shambhi reddy</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-87983">
			24/04/2014 at 4:24 pm</a>		</div>

		<p>hi, i got this error after pushing the notification “HTTP Status 
404 – /GCM-App-Server/GCMNotification”.any one tell me what might be the
 reason?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-88444">
				<div id="div-comment-88444" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Eswar1221</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-88444">
			25/04/2014 at 11:26 am</a>		</div>

		<p>Thank you I too got same issue and solved with uninstall and reinstall</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-90658">
				<div id="div-comment-90658" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">lsweic</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-90658">
			28/04/2014 at 8:10 pm</a>		</div>

		<p>Thank you for the great tutorial. </p>
<p>I have three things to mention, one has already been posted:</p>
<p>1st:<br>
I used the php-server code and therefore i had to change the “message” 
to “m” in config.java (android app), otherwise I also received the 
notification “Message Received from Google GCM Server:null”</p>
<p>2nd:<br>
After the first push notification via the webserver it seems that the 
content in the “GCMRegId.txt” is replaced with the value “null”<br>
I fixed it that way, that after the first app-share request (which is successfull) i commented the following code snippet “out”.</p>
<p>/*<br>
if(!empty($_GET[“shareRegId”])) {<br>
    $gcmRegID  = $_POST[“regId”];<br>
    file_put_contents(“GCMRegId.txt”,$gcmRegID);<br>
    echo “Ok!”;<br>
    exit;<br>
  }<br>
*/</p>
<p>3rd:<br>
in the php server code I replaced the line</p>
<p>with </p>
<p>because otherwise in the URL bar it will look like that 
gcm.php/gcm.php/?push=1 after to requests, but with the replacement the 
url keeps the same.</p>
<p>last i have to mention, that in my app i receive every message 
correctly, but when i click at the notification i always get the message
 “RegId: null”, but everything is working fine :-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-100505">
				<div id="div-comment-100505" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nagaraj N</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-100505">
			11/05/2014 at 8:14 am</a>		</div>

		<p>Thanks a lot. GCM is perfectly working for me. Nice post. It is really useful for the beginners who works on GCM</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-104405">
				<div id="div-comment-104405" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Sanjeev Reddy</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-104405">
			16/05/2014 at 1:13 pm</a>		</div>

		<p>Hi Jeo,<br>
          My app crashes with  an error  java.lang.NoClassDefFoundError</p>
<p>com.google.android.gms.gcm.GoogleCloudMessaging</p>
<p>com.sanju.cloudmessaging.RegisterActivity.registerGCM(RegisterActivity.java:79) </p>
<p>com.sanju.cloudmessaging.RegisterActivity$1.onClick(RegisterActivity.java:46)</p>
<p>at this line GoogleCloudMessaging.getInstance(this);</p>
<p>I have been trying from two days your not replying me .reply me waiting for your reply.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-106224">
				<div id="div-comment-106224" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ramiz</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-106224">
			21/05/2014 at 12:52 am</a>		</div>

		<p>Thank you for the comprehensive tutorial.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1" id="comment-106617">
				<div id="div-comment-106617" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-ccs-with-xmpp/" rel="external nofollow" class="url">Google Cloud Messaging GCM CCS with XMPP</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-106617">
			22/05/2014 at 12:49 am</a>		</div>

		<p>[…] Cloud Messaging, I recommend you to go through the introductory
 tutorial which discusses about notifications in Android using Google 
cloud messaging. This linked introductory tutorial explains the Google 
GCM concept with an example and it covers […]</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-106944">
				<div id="div-comment-106944" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Martin from Germany</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-106944">
			22/05/2014 at 4:04 pm</a>		</div>

		<p>Thx for this helpful tutorial! Helped me a lot :-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-107337">
				<div id="div-comment-107337" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Sanjeev Reddy</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-107337">
			23/05/2014 at 11:42 am</a>		</div>

		<p>HI Jeo,<br>
            I am sanjeev have been asking you about my errors from last 
week you didn’t reply me.Finally I solved my errors now i can send and 
receive the messages and thanks for your tutorial.I have learned some 
thing new about GCM.Thanks for your GCM Example.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-107443">
				<div id="div-comment-107443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">hasan hakki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-107443">
			23/05/2014 at 5:23 pm</a>		</div>

		<p>I have some problem but I cant. I created GCMRegId.txt on my route 
file, GCMRegId.txt with gcm.php on the same file. And I write my message
 and I click send but its turning error, like this :</p>
<p>( ! ) Warning: file_get_contents(GCMRegId.txt): failed to open 
stream: No such file or directory in C:\wamp\www\gcmnew\gcm.php on line 
41<br>
Call Stack<br>
#	Time	Memory	Function	Location<br>
1	0.0039	263920	{main}( )	..\gcm.php:0<br>
2	0.0039	264792	file_get_contents ( )	..\gcm.php:41<br>
Curl failed: Failed connect to android.googleapis.com:443; No error</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-109790">
				<div id="div-comment-109790" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-109790">
			29/05/2014 at 5:24 pm</a>		</div>

		<p>Hi Joe,<br>
first of all thanks for the blog.<br>
we are trying to implement push notification service for ADF mobile. and
 used your server side code to send notification to android device. We 
are able to receive the notification alert(alert sound with client app) 
but message is null. We are not able to receive message. could you 
please suggest where we might did wrong?<br>
here is my onMessage() method implementation(Invoked when a Push Notification arrives)</p>
<p>    public void onMessage(Event event) {<br>
        //Parsing the payload JSON string<br>
        JSONBeanSerializationHelper jsonHelper = new JSONBeanSerializationHelper();<br>
        try {<br>
            PayloadServiceResponse serviceResponse =<br>
                (PayloadServiceResponse)jsonHelper.fromJSON(PayloadServiceResponse.class, event.getPayload());</p>
<p>Map session = (Map)AdfmfJavaUtilities.evaluateELExpression(“#{applicationScope}”);</p>
<p>            String newMsg = serviceResponse.getCustomMessage();<br>
            session.put(“pNewMessage”, newMsg);</p>
<p>        } catch (Exception e) {<br>
            e.printStackTrace();</p>
<p>        }<br>
    }</p>
<p>we are using #{applicationScope.pNewMessage} in our UI to show the 
notification message, but we are only receiving notification alert(alert
 sound) but not message. Please suggest.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-109952">
				<div id="div-comment-109952" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Prateek Bhuwania</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-109952">
			30/05/2014 at 1:04 am</a>		</div>

		<p>I am running it on my mobile and sending all the swear words one by
 one from the net. Everything is working perfectly fine. Thank You Joe.</p>
<p>There was a minor typo in the code in the config.java file I suppose 
due to which the message received was ‘null’ earlier. But it has been 
corrected in the comments.</p>
<p>static final String MESSAGE_KEY = “m”;</p>
<p>Once again, hats off for Joe. :D</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-110953">
				<div id="div-comment-110953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jay</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-110953">
			02/06/2014 at 10:14 am</a>		</div>

		<p>I am having a problem registration in GCM saying 
SERVICE_NOT_AVAILABLE, until I found this, I copy the code provided in 
here and it’s working really just fine now. Great!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-113613">
				<div id="div-comment-113613" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">anki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-113613">
			10/06/2014 at 12:14 pm</a>		</div>

		<p>I have same problem, means here is no error getting in logcat. and i
 also have verified that message is sent to gcm server. But not getting 
any notofication on my device, I had already test on emulator and on 
real device. I have followed the all step from scretch to end but not 
getting notification. Pls help, i am trying this by last week. Thnks</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-113770">
				<div id="div-comment-113770" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">jay</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-113770">
			10/06/2014 at 8:28 pm</a>		</div>

		<p>hello joe<br>
this blog is really awesome. all Android tutorials are great.<br>
i m getting some issue in this Google GCM setup.<br>
i have followed all your instructions carefully.<br>
my query is what should i write in config.java in APP_SERVER_URL 
variable, as my php is in localhost and i know my ip is 127.0.0.1 , but 
it not working when i browse through Android emulator</p>
<p>also where do i get regid? and where do i put it? also gcmregid.txt 
was not created auto, so i created empty file manually in gcm folder 
near gcm.php file .</p>
<p>in config.java do we have to use project id or project number in google_project_id variable?</p>
<p>i will be really glad if you help get the Google cloud messaging work for me.</p>
<p>thanks</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-114052">
				<div id="div-comment-114052" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Pal</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-114052">
			11/06/2014 at 3:31 pm</a>		</div>

		<p>Hey Joe<br>
I follow this Google cloud messaging tutorial. I wrote gcm server part 
using java in Netbeans. I set the APP_SERVER_URL = 
“http://10.0.2.2:8084/GCMServer/GCMNotification”;<br>
I set the ip as loopback address and delete “?shareRegId=1” from url.</p>
<p>Now my problem is when i click on Register with Google GCM Server it 
shows me the Regid:jshjkjcc….. and when i click on Share GCM-RegId with 
App Server it goes to the main Android activity and shows me the message
 RegId shared with Application Server. RegId:jshjkjcc…..</p>
<p>Now when i write something on GCM Server application and click on 
Send Push Notification via GCM it shows me the error “RegId required: 
java.io.FileNotFoundException: GCMRegId.txt (The system cannot find the 
file specified)”<br>
What is wrong with my code..</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-115101">
				<div id="div-comment-115101" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ravi</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-115101">
			15/06/2014 at 3:47 am</a>		</div>

		<p>This Google GCM project code is working fine, i appreciate the 
effort. Mysteriously i ran into a problem with this script. Whenever u 
minimize or stop (onstop or ondestroy) after closing network access, 
strange toast message coming repeatedly. I re-read entire code, but 
nowhere i see this toast code.</p>
<p>Toast Error: “Failed to Load Database, Please Restart Application”</p>
<p>Toast messages is appearing only after exiting the app + network failure (No internet access)</p>
<p>i want to remove that source code. Above all, this is the best Google
 Cloud Messaging notification tutorial all through the net, thanks.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-115495">
				<div id="div-comment-115495" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Hoang Yen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-115495">
			16/06/2014 at 2:37 pm</a>		</div>

		<p>I think you should you GCM Php with Wamp. This way is the best way,
 I tried GCM-App-Server but I failed,so I used php and it worked. But I 
have a problem. My mobile doesn’t recieve any notification and now I’m 
trying to solve it :(</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-116098">
				<div id="div-comment-116098" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Pal</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-116098">
			18/06/2014 at 12:41 pm</a>		</div>

		<p>Create a file with the name GCMRegId.txt in c:\folder\GCMRegId.txt 
and the change the path in GCM Server app as c:/folder/GCMRegId.txt</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-116101">
				<div id="div-comment-116101" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Pal</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-116101">
			18/06/2014 at 12:54 pm</a>		</div>

		<p>Hello Amrinder<br>
I follow this tutorial but it does not working for me. Can you please 
help me. When I click on “Send Push Notification via GCM” it shows me 
the following output<br>
[ messageId=0:1403074150101397%31e4cc17f9fd7ecd ] and does not show any notification on AVD. Please help me</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-116102">
				<div id="div-comment-116102" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Pal</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-116102">
			18/06/2014 at 12:56 pm</a>		</div>

		<p>Hello Ravi<br>
I follow this tutorial but it does not working for me. Can you please 
help me. When I click on “Send Push Notification via GCM” it shows me 
the following output<br>
[ messageId=0:1403074150101397%31e4cc17f9fd7ecd ] and does not show any notification on AVD. Please help me</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-116117">
				<div id="div-comment-116117" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Pallab</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-116117">
			18/06/2014 at 1:34 pm</a>		</div>

		<p>Hello Sir!<br>
Please help me. When I click on “Send Push Notification via GCM” it shows me the following output<br>
[ messageId=0:1403074150101397%31e4cc17f9fd7ecd ]. It does not show the output like<br>
{“multicast_id”:7048577678678825845,”success”:0,”failure”:1,”canonical_ids”:0,”results”:[{“error”:”InvalidRegistration”}]}<br>
Please tell me what is the issue?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-116940">
				<div id="div-comment-116940" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-116940">
			20/06/2014 at 3:24 pm</a>		</div>

		<p>While sending 250 characters of data push mesg shows only single 
line(i.e 30 to 40 char). How can i Display total data in mesg atleast 
150 characters.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-117851">
				<div id="div-comment-117851" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Vu Hung</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-117851">
			23/06/2014 at 9:55 am</a>		</div>

		<p>Hello, best tutorial for beginner, work perfect</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-117856">
				<div id="div-comment-117856" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Vu Hung</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-117856">
			23/06/2014 at 10:46 am</a>		</div>

		<p>Hello, best Google Cloud Messaging tutorial for beginner, works perfect</p>
<p>you should edit : ‘$message=array(“m”=&gt;utf8_encode($pushMessage)); ‘ in php file to send special character</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-117883">
				<div id="div-comment-117883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Pallab</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-117883">
			23/06/2014 at 12:50 pm</a>		</div>

		<p>Hello Sir!<br>
Now I am getting the GCM output 
{“multicast_id”:5163471844000799180,”success”:1,”failure”:0,”canonical_ids”:0,”results”:[{“message_id”:”0:1403507025702682%31e4cc17f9fd7ecd”}]}<br>
but not getting any Google gcm notification on Android AVD or real Android device</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-118077">
				<div id="div-comment-118077" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Matthew</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-118077">
			24/06/2014 at 2:00 am</a>		</div>

		<p>First off, thank you for this Google Cloud Messaging GCM tutorial. So far I’m getting all of it.  Very helpful!<br>
However, I did run into an issue…<br>
I go to gcm.php and then send a push back to the registered phone.  Your
 code calls the php file with a forward slash “gcm.php/?push=1” With 
that I receive a 404 error (using nginx).<br>
OK, it must be that slash. Right?  So I changed it to “gcm.php?push=1”  
No 404, but now the page just come up blank; not even a failure message.<br>
Any tips?<br>
Note: Server IP / API Key / Project ID / GCMRegId.txt have been triple check for correctness.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-118598">
				<div id="div-comment-118598" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">chaitali</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-118598">
			25/06/2014 at 7:10 pm</a>		</div>

		<p>i am using it with java and getting an error as RegId required: 
java.io.FileNotFoundException: GCMRegId.txt (No such file or directory)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-118787">
				<div id="div-comment-118787" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">DineshM</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-118787">
			26/06/2014 at 10:17 am</a>		</div>

		<p>The problem is emulator does not have proper Time Set and it also 
doesnt have SIM, so google cant register it. Those who are facing 
SERVICE_NOT_AVAILABLE, try running your app on real phone with a SIM. It
 will work fine.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-119050">
				<div id="div-comment-119050" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Abdellah</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-119050">
			27/06/2014 at 4:00 pm</a>		</div>

		<p>Hello, Thank you for this great Google Cloud Messaging tutorial, it’s the best on the net.<br>
my problem is everything is good i send the message i got the GCM 
notification on my Android phone but not the message that i’ve written. 
just the gcm notification with the title “Message Received from Google” 
when i click on it it gives me the Toast “RegId shared with application 
server RegId null” where can i find the message?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-120616">
				<div id="div-comment-120616" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Pallab</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-120616">
			03/07/2014 at 3:59 pm</a>		</div>

		<p>Is it necessary to unblock port no. 5228-5230 for this application.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-123150">
				<div id="div-comment-123150" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Maryam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-123150">
			10/07/2014 at 6:36 pm</a>		</div>

		<p>Hi Joe!<br>
Thank you for this tutorial which helps me a lot!</p>
<p>But I have some problem with the project.</p>
<p>I tried the php server, but I didn’t receive the reg id in the GCMRegId file from the Android application.<br>
I have the 401 error.</p>
<p>Even if I copied the reg id from the logcat and pasted it in the GCMRegId file, the 401 error persists.</p>
<p>I forgot to tell you that I use a real device, an Android tablet.</p>
<p>I don’t know how I can do to solve these issues.</p>
<p>Thank you  for helping me!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-123592">
				<div id="div-comment-123592" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Maryam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-123592">
			12/07/2014 at 5:03 am</a>		</div>

		<p>Hi,</p>
<p>I found my problem.<br>
In Google developer console, I put the ipv6 for the “edit allowed ip”!</p>
<p>Thank you very much for this tutorial!!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-125489">
				<div id="div-comment-125489" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">sabeersas</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-125489">
			18/07/2014 at 12:23 pm</a>		</div>

		<p>Thanks for this great tut brother… </p>
<p>Some notes:<br>
– Its not Project ID use Project Number<br>
– Change MESSAGE_KEY = “message” to MESSAGE_KEY = “m”<br>
– change action=”gcm.php/?push=1″ to change action=”gcm.php?push=1″</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-126109">
				<div id="div-comment-126109" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Vishnu</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-126109">
			21/07/2014 at 12:43 am</a>		</div>

		<p>After hours of research, I fixed the issue as follows:</p>
<p>In my case I had to go to Properties-&gt;Java Build Path-&gt;Order 
and Export and tick the check box Android Private Libraries, then 
cleaned the project and worked fine.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-127937">
				<div id="div-comment-127937" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">max</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-127937">
			27/07/2014 at 1:46 am</a>		</div>

		<p>I got this error while running gcm-server code please help me out.<br>
can please help me to fix !</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-130311">
				<div id="div-comment-130311" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nadia</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-130311">
			05/08/2014 at 9:11 am</a>		</div>

		<p>Hi Joe, </p>
<p>After the text (in web service) is entered and the message is push. That is the error shown in the web service.<br>
RegId required: com.google.android.gcm.server.InvalidRequestException: HTTP Status Code: 401<br>
While in apps the RegId is shared in web server. Please Help.</p>
<p>Thank you. </p>
<p>***Same problem with Girish<br>
Registration id generated succefully in adroid device…<br>
But when run Java Application it gives following error.<br>
RegId required: com.google.android.gcm.server.InvalidRequestException: HTTP Status Code: 401</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-131732">
				<div id="div-comment-131732" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">john</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-131732">
			08/08/2014 at 1:46 pm</a>		</div>

		<p>hai sir, </p>
<p>  previous problem is solved(Activity closed when message push from 
server).But when i click message on emulator i got “registerId=null” 
Message send from server is not display.</p>
<p>please help me sir..</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-131734">
				<div id="div-comment-131734" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">john</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-131734">
			08/08/2014 at 1:59 pm</a>		</div>

		<p>hai nadia,</p>
<p>  I am also face this issue but now i resolve it. create new gmail 
account and create new project,server key with all ip allowed,android 
key with YOUR SH1 FINGERPRINT 
-FE:F9:DD:58:37:A8:06:B2:52:15:8F:69:24:FE:72:AE:25:E9;com.javapapers.android
 and used your new project ID and serverkey,androidkey..It may work .. 
Have nice day</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-131739">
				<div id="div-comment-131739" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">john</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-131739">
			08/08/2014 at 2:35 pm</a>		</div>

		<p>hai pal,</p>
<p>  right click the project,In properties–&gt;java buit path-&gt;order and export-&gt; fill the check box…<br>
All is well</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-135986">
				<div id="div-comment-135986" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Felipe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-135986">
			21/08/2014 at 10:31 pm</a>		</div>

		<p>Fantastic job!!<br>
Really good tutorial, thanks Joe<br>
After few tricky issues I made it work (don forget open 5228, 5229 and 5230 port in your firewall and/or router)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-138271">
				<div id="div-comment-138271" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">A</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-138271">
			27/08/2014 at 7:18 pm</a>		</div>

		<p>Vasantha, edit the manifest file and provide proper package name prefixes for all activities and permissions</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-140775">
				<div id="div-comment-140775" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href="http://javapapers.com/" rel="external nofollow" class="url">Joe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/#comment-140775">
			03/09/2014 at 12:49 pm</a>		</div>

		<p>I have done a tutorial for Google GCM multicast notification:<br>
<a href="http://javapapers.com/android/android-multicast-notification-using-google-cloud-messaging-gcm/" rel="nofollow">http://javapapers.com/android/android-multicast-notification-using-google-cloud-messaging-gcm/</a></p>

		
				</div>
		</li><!-- #comment-## -->
</ol>
<p class="no-comments">Comments are closed for this "Google Cloud Messaging GCM for Android and Push Notifications" tutorial.</p>	
</div>
</div>
<div id="sidebar">
<div class="about">
<div class="heading">ABOUT</div>	
<div id="aboutdesc">
	<p>Java Papers is a Java blog passionately published by <a href="http://javapapers.com/about-me/" title="About Joe and Java Papers">Joe</a>. He is a versatile software developer, proficient in Java and Android.</p>
	<p>Joe accepts paid work, write to him for your programming needs or to develop your dream App.</p>
	<p>Say hi, <a href="mailto:joe@javapapers.com">joe@javapapers.com</a></p>
</div>	  
</div>

<div class="ads">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-2525233393528874";
/* JP 300 x 250 */
google_ad_slot = "3145278778";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript" src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/show_ads.js">
</script><ins id="aswift_2_expand" style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><ins id="aswift_2_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;" width="300" height="250" frameborder="0"></iframe></ins></ins>
</div>

    <div class="hiadcomponent">
	<div class="heading">Join 11,000 Subscribers</div>	
        <div><form action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=javapapers/java-interview-questions', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true"><p><input placeholder="Enter your email here" class="feedb-email" name="email" type="text"><input value="javapapers/java-interview-questions" name="uri" type="hidden"><input name="loc" value="en_US" type="hidden"><input value="Subscribe" class="subscribe" type="submit"></p></form></div>	
    </div>

	<div class="heading">Tutorial Menu</div>
	<div id="tutorial-menu">
	<ul class="main-menu"><li class="cat-item cat-item-117"><a href="http://javapapers.com/category/java/">Java</a></li><li class="cat-item cat-item-118"><a href="http://javapapers.com/category/android/">Android</a><ul class="sub-menu"><li class="cat-item cat-item-49"><a href="http://javapapers.com/category/android/android-basics/">Android Basics</a></li><li class="cat-item cat-item-62"><a href="http://javapapers.com/category/android/android-ui-components/">Android UI Components</a></li><li class="cat-item cat-item-56"><a href="http://javapapers.com/category/android/simple-android-apps/">Simple Android Apps</a></li><li class="cat-item cat-item-51"><a href="http://javapapers.com/category/android/google-maps/">Google Maps</a></li><li class="cat-item cat-item-57"><a href="http://javapapers.com/category/android/location/">Location</a></li><li class="cat-item cat-item-50"><a href="http://javapapers.com/category/android/google-cloud-messaging/">Google Cloud Messaging</a><ul class="post-list"><li class="current-post">Google Cloud Messaging GCM for Android and Push Notifications</li><li><a class="post-menu" href="http://javapapers.com/android/android-multicast-notification-using-google-cloud-messaging-gcm/">Android Multicast Notification using Google Cloud Messaging (GCM)</a></li><li><a class="post-menu" href="http://javapapers.com/android/android-device-to-device-messaging-using-google-cloud-messaging-gcm-via-http/">Android Device to Device Messaging using Google Cloud Messaging (GCM) via Http</a></li><li><a class="post-menu" href="http://javapapers.com/android/google-cloud-messaging-gcm-ccs-with-xmpp/">Google Cloud Messaging GCM CCS with XMPP</a></li><li><a class="post-menu" href="http://javapapers.com/android/android-chat-with-google-gcm-xmpp/">Android Chat with Google GCM XMPP</a></li></ul></li><li class="cat-item cat-item-55"><a href="http://javapapers.com/category/android/android-wear/">Android Wear</a></li></ul></li><li class="cat-item cat-item-104"><a href="http://javapapers.com/category/design-patterns/">Design Patterns</a></li><li class="cat-item cat-item-119"><a href="http://javapapers.com/category/spring/">Spring</a></li><li class="cat-item cat-item-105"><a href="http://javapapers.com/category/servlet/">Servlet</a></li><li class="cat-item cat-item-123"><a href="http://javapapers.com/category/hibernate/">Hibernate</a></li><li class="cat-item cat-item-60"><a href="http://javapapers.com/category/web-services/">Web Services</a></li></ul>	</div>
</div>
<div id="mini-footer">
	<div id="footer-bottom">© 2008 - 2015 <a href="http://javapapers.com/" title="Java Blog">Java Papers</a></div>
	<div><a href="#top" class="top" title="Jump to the top of the page">↑ Go to Top</a> <a href="http://javapapers.com/site-map/" title="Java Tutorial Blog Site Map">Site Map</a></div>
</div>	
</div>
<div id="footer">
	<ul id="footer-menu">	
		<li class="cat-item cat-item-33"><a href="http://javapapers.com/category/java/" title="Java Tutorial">Java</a></li>
		<li class="cat-item cat-item-19"><a href="http://javapapers.com/category/android/" title="Android Tutorial">Android</a></li>
		<li class="cat-item cat-item-14"><a href="http://javapapers.com/category/design-patterns/" title="Design Patterns Tutorial">Design Patterns</a></li>
		<li class="cat-item cat-item-25"><a href="http://javapapers.com/category/spring/" title="Spring Tutorial">Spring</a></li>
		<li class="cat-item cat-item-60"><a href="http://javapapers.com/category/web-services/" title="Web Services Tutorial">Web Services</a></li>
		<li class="cat-item cat-item-6"><a href="http://javapapers.com/category/servlet/" title="Servlet Tutorial">Servlet</a></li>
	</ul>
	<div class="follow"><a href="https://plus.google.com/+JosephKulandai?rel=author" rel="nofollow" title="Java Tutorial Blog Google Plus Page" target="_blank"><img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/googleplus.png" alt="Java Tutorial Blog Google Plus Page" width="20" height="20"></a><a class="facebook" href="https://www.facebook.com/javapapers" rel="nofollow" title="Java Tutorial Blog Facebook Page" target="_blank"><img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/facebook.png" alt="Java Tutorial Blog Facebook Page" width="20" height="20"></a><a class="twitter" href="https://twitter.com/javapapers" rel="nofollow" title="Java Tutorial Blog Twitter Page" target="_blank"><img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/twitter.png" alt="Java Tutorial Blog Twitter Page" width="20" height="20"></a><a class="feed" href="http://javapapers.com/feed/" title="Java Tutorial Blog Feed"><img src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/feed.png" alt="Java Tutorial Blog Feed" width="20" height="20"></a></div>		
</div>
<script src="Google%20Cloud%20Messaging%20GCM%20for%20Android%20and%20Push%20Notifications%20-%20Java%20Tutorial%20Blog_files/prettify.js"></script>

</body></html>