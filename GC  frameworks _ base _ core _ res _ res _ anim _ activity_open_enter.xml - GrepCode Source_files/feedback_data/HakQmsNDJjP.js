if (self.CavalryLogger) { CavalryLogger.start_js(["fzrKT"]); }

__d("ActorSelectorNuxTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={COMPOSER:"composer_seen_count",COMPOSER_COVERED:"composer_covered_seen_count",M_COMPOSER:"m_composer_seen_count",M_UFI:"m_ufi_seen_count",UFI:"ufi_seen_count",UFI_TIMELINE:"ufi_timeline_seen_count",UFI_TIMELINE_COVERED:"ufi_timeline_covered_seen_count"};},null);
__d('PageVoiceDropdownSelector.react',['cx','BootloadedComponent.react','Image.react','JSResource','React','XUIPopoverButton.react','XUISpinner.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'PageVoiceDropdownSelector',propTypes:{disabled:i.bool,loading:i.bool,maxWidth:i.number,pages:i.object.isRequired,selectedActorID:i.string,showPageName:i.bool,suppressed:i.bool.isRequired,user:i.object.isRequired,onChange:i.func.isRequired,onClick:i.func.isRequired},getDefaultProps:function(){return {disabled:false,showPageName:false};},getInitialState:function(){return {dialogShown:false,bootloadFinished:false};},_onChangeActor:function(k){this.props.onChange(k);this.setState({dialogShown:false});},_getDialogContextRef:function(){return this.refs['open-menu-button'];},_onBootloadFinished:function(){this.setState({bootloadFinished:true});},render:function(){var k=null;if(this.state.dialogShown)k=c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('PageVoiceDropdownSelectorMenu.react').__setRef('PageVoiceDropdownSelector.react'),bootloadPlaceholder:c('React').createElement('div',null),onComponentLoad:this._onBootloadFinished},this.props,{contextRef:this._getDialogContextRef,shown:true,shownBusinessID:this.state.shownBusinessID,onChange:this._onChangeActor,onToggle:this._onToggle}));var l=this.state.dialogShown&&!this.state.bootloadFinished,m=this.props.loading||l,n=null,o=null;if(m){o=c('React').createElement('span',{className:"_2wk7"},c('React').createElement(c('XUISpinner.react'),null));}else n=c('React').createElement(c('Image.react'),{className:"_6vg",height:16,src:this._getSelectedImageSource(),width:16});return (c('React').createElement('span',null,c('React').createElement(c('XUIPopoverButton.react'),{className:"_4z8-",disabled:this.props.disabled,image:c('React').createElement('span',null,n,o),label:this.props.showPageName?this._getSelectedActorName():'',maxwidth:this.props.maxwidth,ref:'open-menu-button',suppressed:this.props.suppressed,type:'button',onClick:this._onButtonClick}),k));},_onButtonClick:function(event){this.setState({dialogShown:!this.state.dialogShown,shownBusinessID:this.state.defaultBusinessID},function(){return this.props.onClick(event);}.bind(this));},_onToggle:function(k){this.setState({dialogShown:k});},_getSelectedImageSource:function(){var k=this.props.selectedActorID;if(!k)return '';if(k===this.props.user.id)return this.props.user.thumbSrc||'';return this.props.pages[k].thumbSrc||'';},_getSelectedActorName:function(){var k=this.props.selectedActorID;if(!k)return '';if(k===this.props.user.id)return this.props.user.name||'';return this.props.pages[k].name||'';}});f.exports=j;},null);
__d('ActorSelector.react',['cx','BizSiteIdentifier.brands','BootloadedComponent.react','Bootloader','Event','JSResource','PageVoiceDropdownSelector.react','React','ReactDOM','ShortProfiles','TooltipData','emptyFunction','getObjectValues','goURI','joinClasses','tidyEvent'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=500,k=c('React').createClass({displayName:'ActorSelector',propTypes:{actorIDs:i.array.isRequired,disabled:i.bool,loading:i.bool,nuxBody:i.node,nuxEnabled:i.bool,nuxHoverContext:i.object,nuxShowWithoutHover:i.bool,onChange:i.func.isRequired,onCompleteNux:i.func,onShowNux:i.func,selectedActorID:i.string,settingsURI:i.string,showName:i.bool,showNameMaxWidth:i.number,suppressed:i.bool,tooltipConstructor:i.func},getDefaultProps:function(){return {disabled:false,suppressed:true};},getInitialState:function(){return {actorData:{},nuxShown:false};},componentWillMount:function(){this._canSetState=true;this._fetchActorData();},_getNUXContextRef:function(){return this.refs.selector;},render:function(){if(!this.props.selectedActorID||!this.state.actorData[this.props.selectedActorID])return c('React').createElement('div',null);if(this.props.actorIDs.length===0)return c('React').createElement('div',null);var l=null;if(this.state.nuxShown)l=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ActorSelectorNUXLayer.react').__setRef('ActorSelector.react'),bootloadPlaceholder:c('React').createElement('span',null),onCompleteNux:this._onCompleteNux,onClickSettings:this._onClickSettings,settingsURI:this.props.settingsURI,shown:true,contextRef:this._getNUXContextRef,nuxBody:this.props.nuxBody});return (c('React').createElement('span',{className:c('joinClasses')("_6vh",this.props.className)},c('React').createElement('span',{ref:'selector'},c('React').createElement(c('PageVoiceDropdownSelector.react'),{disabled:this.props.disabled,loading:this.props.loading,pages:this.state.actorData,onChange:this.props.onChange,onClick:this._onClickSelector,selectedActorID:this.props.selectedActorID,searchBarVisible:true,showBusinessPages:false,showPageName:this.props.showName,showNameMaxWidth:this.props.showNameMaxWidth,showPersonalPagesInRoot:!c('BizSiteIdentifier.brands').isBizSite(),suppressed:this.props.suppressed,user:c('getObjectValues')(this.state.actorData)[0]})),l));},componentDidMount:function(){this._setNux();this._setTooltip();},componentDidUpdate:function(l,m){if(this.props.actorIDs.toString()!==l.actorIDs.toString())this._fetchActorData();this._setNux();this._setTooltip();if(this.state.nuxShown&&!m.nuxShown&&this.props.onShowNux)this.props.onShowNux();},componentWillUnmount:function(){this._canSetState=false;},_fetchActorData:function(){c('ShortProfiles').getMulti(this.props.actorIDs,function(l){if(this._canSetState)this.setState({actorData:l});}.bind(this));},_onClickSelector:function(){if(this.state.nuxShown)this._onCompleteNux();},_onClickSettings:function(){this._onCompleteNux();c('goURI')(this.props.settingsURI);},_onCompleteNux:function(){this.setState({nuxShown:false});if(this.props.onCompleteNux)this.props.onCompleteNux();},_setNux:function(){if(!this.props.nuxEnabled)return;if(this.props.showNuxWithoutHover){this.setState({nuxShown:true});}else if(this.props.nuxHoverContext&&!this._hoverListener)this._hoverListener=c('tidyEvent')(c('Event').listen(this.props.nuxHoverContext,'mouseenter',function(){c('Bootloader').loadModules(["ActorSelectorNUXLayer.react"],c('emptyFunction'),'ActorSelector.react');var l=setTimeout(function(){this._hoverListener.remove();if(this.props.nuxEnabled)this.setState({nuxShown:true});}.bind(this),j),m=c('tidyEvent')(c('Event').listen(this.props.nuxHoverContext,'mouseleave',function(){clearTimeout(l);m.remove();}));}.bind(this)));},_setTooltip:function(){if(!this.refs.selector)return;var l=this.state.actorData[this.props.selectedActorID];if(!l)return;if(!this.props.tooltipConstructor)return;c('TooltipData').set(c('ReactDOM').findDOMNode(this.refs.selector),this.props.tooltipConstructor(l.name),'above','right');}});f.exports=k;},null);
__d("XAYMTPanelSaveSettingsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ads\/growth\/aymt\/homepage_panel\/save_settings\/",{time_range:{type:"Enum",enumType:1},ad_account_id:{type:"Int"},promoted_object:{type:"Int"},collapsed:{type:"Int"},dismiss_nux:{type:"Bool",defaultValue:false},flash_insights_dismiss_nux:{type:"Bool",defaultValue:false},refresh_panel:{type:"Bool",defaultValue:false}});},null);
__d('AdvertiserHomePagelet',['AsyncRequest','DOM','URI','XAYMTPanelSaveSettingsController','$'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={init:function(i,j){var k=c('XAYMTPanelSaveSettingsController').getURIBuilder().setBool('refresh_panel',true).getURI();k.addQueryData(c('URI').getRequestURI().getQueryData());new (c('AsyncRequest'))().setURI(k).setStatusElement(j).setErrorHandler(function(l){c('DOM').setContent(c('$')('pagelet_advertiser_panel_content'),'');}).send();}};f.exports=h;},null);
__d("XActorSelectorNuxSeenWriteController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/actor_selector\/nux\/mark_seen\/",{nux_type:{type:"Enum",required:true,enumType:1}});},null);
__d('UFIActorSelector.react',['csx','fbt','ActorSelector.react','ActorSelectorNuxTypes','Arbiter','AsyncRequest','Parent','React','ReactDOM','SubscriptionsHandler','UFICentralUpdates','UFIFeedbackTargets','UFIUserActions','XActorSelectorNuxSeenWriteController'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k='ufi_actor_selector_nux_disabled_event',l=c('React').createClass({displayName:'UFIActorSelector',propTypes:{actorIDs:j.array.isRequired,ftEntIdentifier:j.string.isRequired,isTimeline:j.bool,loading:j.bool,nuxEnabled:j.bool,settingsURI:j.string},getInitialState:function(){return {loading:false,nuxEnabled:this.props.nuxEnabled,nuxHoverContext:null,selectedActorID:null};},render:function(){return (c('React').createElement(c('ActorSelector.react'),{actorIDs:this.props.actorIDs,loading:this.props.loading||this.state.loading,nuxBody:this._getNUXBody(),nuxEnabled:this.state.nuxEnabled,nuxHoverContext:this.state.nuxHoverContext,onChange:this._onChange,onShowNux:this._onShowNux,onCompleteNux:this._onCompleteNux,selectedActorID:this.state.selectedActorID,settingsURI:this.props.settingsURI,tooltipConstructor:this._getTooltipForActorName}));},componentDidMount:function(){this._updateSelectedActorIDFromFeedbackTarget();this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('UFICentralUpdates').subscribe('feedback-updated',function(n,o){if(this.props.ftEntIdentifier in o.updates)this._updateSelectedActorIDFromFeedbackTarget();}.bind(this)),c('Arbiter').subscribe(k,function(){this.setState({nuxEnabled:false});}.bind(this)));var m=c('Parent').bySelector(c('ReactDOM').findDOMNode(this),"._5pcr");if(m)this.setState({nuxHoverContext:m});},componentWillUnmount:function(){this._subscriptions.release();},_updateSelectedActorIDFromFeedbackTarget:function(){c('UFIFeedbackTargets').getFeedbackTarget(this.props.ftEntIdentifier,function(m){this.setState({loading:false,selectedActorID:m.actorforpost});}.bind(this));},_getNUXBody:function(){return i._("Like, comment or share as yourself or as one of the Pages you manage.");},_getTooltipForActorName:function(m){return i._("Liking and commenting as {actorName}",[i.param('actorName',m)]);},_onChange:function(m){this.setState({loading:true});c('UFIUserActions').changeActor(this.props.ftEntIdentifier,m.value);},_onCompleteNux:function(){var m=this.props.isTimeline?c('ActorSelectorNuxTypes').UFI_TIMELINE:c('ActorSelectorNuxTypes').UFI,n=c('XActorSelectorNuxSeenWriteController').getURIBuilder().setEnum('nux_type',m).getURI();new (c('AsyncRequest'))().setURI(n).send();},_onShowNux:function(){c('Arbiter').inform(k);}});f.exports=l;},null);
__d('ErrorSignal',['AsyncRequest','AsyncSignal','BanzaiODS','ErrorSignalConfig','SessionName','ScriptPath','SiteData','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(l,m){if(l&&l==='beacon_error'){c('BanzaiODS').bumpEntityKey('js_error_reporting','beacon_error_signal.sent');new (c('AsyncSignal'))(c('ErrorSignalConfig').uri,{c:l,m:m}).send();return;}else if(l&&l==='async_error'){var n=JSON.parse(m),o=n.err_code,p=n.path;if(o in {'1004':1,'12029':1,'12031':1,'12152':1}&&p.indexOf('scribe_endpoint.php')==-1){new (c('AsyncRequest'))().setURI(c('ErrorSignalConfig').uri).setData({c:'async_error',m:m}).setMethod('GET').setReadOnly(true).setOption('suppressEvaluation',true).setOption('suppressErrorAlerts',true).setHandler(c('emptyFunction')).setErrorHandler(c('emptyFunction')).send(true);return;}}if(l==='javascript_error')c('BanzaiODS').bumpEntityKey('js_error_reporting','error_signal.sent');new (c('AsyncSignal'))(c('ErrorSignalConfig').uri,{c:l,m:m}).send();}function i(l,m){m=m||{};m.svn_rev=c('SiteData').revision;m.push_phase=c('SiteData').push_phase;m.script_path=c('ScriptPath').getScriptPath();m.extra=m.extra||{};m.extra.hrm=c('SiteData').be_mode;var n=(c('SessionName').getName()||'-')+'/-';h('javascript_error',JSON.stringify({c:l,a:n,m:m}));}function j(){var l='beacon_error',m=(c('SessionName').getName()||'-')+'/-',n={};n.error=l;n.svn_rev=c('SiteData').revision;n.push_phase=c('SiteData').push_phase;n.script_path=c('ScriptPath').getScriptPath();n.extra={message:l,type:'info'};h(l,JSON.stringify({c:l,a:m,m:n}));}var k={sendBeaconErrorSignal:j,sendErrorSignal:h,logJSError:i};f.exports=k;b.ErrorSignal=k;},null);
__d('FeedLoadEventLogger',['Arbiter','BanzaiLogger','ErrorSignal','ErrorUtils','LitestandMessages','PageletEventConstsJS','URI'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=['substream_','more_pager_pagelet_','pagelet_composer','pagelet_navigation','pagelet_rhc_footer'],i=[c('PageletEventConstsJS').ARRIVE_END,c('PageletEventConstsJS').DISPLAY_END,c('PageletEventConstsJS').ONLOAD_END],j=['pre_page_transition','page_transition'],k=[c('LitestandMessages').NEWSFEED_LOAD,c('LitestandMessages').STORIES_REQUESTED,c('LitestandMessages').STORIES_INSERTED,c('LitestandMessages').NEWER_STORIES_REQUESTED,c('LitestandMessages').NEWER_STORIES_INSERTED,c('LitestandMessages').STREAM_LOAD_ERROR,c('LitestandMessages').STREAM_LOAD_RETRY,c('LitestandMessages').DUPLICATE_CURSOR_ERROR],l=false;function m(q){return q&&(q.getPath()==='/'||q.getPath()==='/home.php');}function n(q){c('BanzaiLogger').log('WebFeedLoadLoggerConfig',q);}function o(q){if(!q)return null;if(q.indexOf('more_pager_pagelet_')===0)return 'more_pager_pagelet_n';if(q.indexOf('substream_')===0&&q!=='substream_0'&&q!=='substream_1')return 'substream_n';return q;}var p={init:function(){if(l)return;c('Arbiter').subscribe('BigPipe/init',function(q,r){if(!r||!r.arbiter)return;r.arbiter.subscribe('pagelet_event',function(s,t){if(t&&m(c('URI').getNextURI())&&i.indexOf(t.event)>=0&&h.some(function(u){return t.id.indexOf(u)===0;}))n({event:'pagelet',pagelet_id:o(t.id),pagelet_event_type:t.event,pagelet_phase:t.phase.toString()});});});c('Arbiter').subscribe(j,function(q,r){if(r){var s=r.to||r.uri;if(m(s))n({event:'page_transition',transition_event_type:q});}});c('Arbiter').subscribe(k,function(q,r){var s=null,t=null;if(q===c('LitestandMessages').STREAM_LOAD_ERROR){s=r;}else if(q===c('LitestandMessages').DUPLICATE_CURSOR_ERROR)t=r;n({event:'stream_load',stream_event_type:q,stream_cursor:t,stream_substream_id:o(r&&r.substream_id),error_name:s&&s.name,error_message:s&&s.message,error_stack:s&&s.stack});});c('ErrorUtils').addListener(function(q){if(q&&m(c('URI').getNextURI())){c('ErrorSignal').logJSError('feedloaderror',{error:q.name||q.message,extra:q});n({event:'js_error',error_name:q.name,error_message:q.message,error_stack:q.stack});}});l=true;}};f.exports=p;},null);
__d('FeedComposerIDStore',['ReactComposerEvents','Arbiter','SubscriptionsHandler'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={_composerID:null,_subscriptions:c('SubscriptionsHandler'),set:function(i){this._subscriptions=new (c('SubscriptionsHandler'))();this._composerID=i;this._subscribeComposerResetEvent();},get:function(){if(!this._composerID)throw new Error('ID Store has not yet been initialized via set()');return this._composerID;},_subscribeComposerResetEvent:function(){if(!this._composerID)throw new Error('Composer ID cannot be null');var i=c('Arbiter').subscribeOnce(c('ReactComposerEvents').COMPOSER_RESET+this._composerID,function(j,k){if(k&&k.newComposerID){this._composerID=k.newComposerID;this._subscribeComposerResetEvent();}}.bind(this));this._subscriptions.addSubscriptions(i);}};f.exports=h;},null);
__d("XReactFeedComposerXBootloadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/feedx\/bootload\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},friend_list_id:{type:"String"},section_id:{type:"String"},target_id:{type:"String",required:true}});},null);
__d('ReactFeedComposerX',['csx','cx','invariant','ReactComposerAttachmentType','ReactComposerEvents','ReactComposerFocusInit','Arbiter','AsyncRequest','ComposerEntryPointRef','CSS','DOM','Event','FeedComposerIDStore','Run','SubscriptionsHandler','XReactComposerLoggingODSController','XReactFeedComposerXBootloadController','$'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(l){this.$ReactFeedComposerX6=l.root;this.$ReactFeedComposerX2=l.composerID;this.$ReactFeedComposerX10=l.targetID;this.$ReactFeedComposerX3=l.composerType;this.$ReactFeedComposerX5=l.friendListID;this.$ReactFeedComposerX7=l.sectionID;this.$ReactFeedComposerX1=false;this.$ReactFeedComposerX4=c('DOM').find(this.$ReactFeedComposerX6,'form');this.$ReactFeedComposerX11=c('DOM').find(this.$ReactFeedComposerX6,"._3en1");this.$ReactFeedComposerX9=new (c('SubscriptionsHandler'))();this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(this.$ReactFeedComposerX6,'click',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(this.$ReactFeedComposerX11,'keydown',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(this.$ReactFeedComposerX4,'success',this.$ReactFeedComposerX13.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/bootload/'+this.$ReactFeedComposerX2,this.$ReactFeedComposerX14.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/focuscomposer/'+this.$ReactFeedComposerX2,this.$ReactFeedComposerX12.bind(this)),c('Arbiter').subscribe('ReactComposerFocus/reset/'+this.$ReactFeedComposerX2,function(){this.$ReactFeedComposerX11.value='';}.bind(this)));c('FeedComposerIDStore').set(this.$ReactFeedComposerX2);var m=c('DOM').find(this.$ReactFeedComposerX6,"._4d6h"),n=c('DOM').scry(m,'input[name="composer_photo[]"]')[0];if(n){this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(n,'click',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(n,'change',this.$ReactFeedComposerX12.bind(this)));if(n.files&&n.files.length>0)this.$ReactFeedComposerX12();}this.$ReactFeedComposerX8=c('DOM').scry(this.$ReactFeedComposerX6,"._4-h7");this.$ReactFeedComposerX8.forEach(function(o){return this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(o,'click',this.$ReactFeedComposerX15.bind(this)));}.bind(this));if(l.jsModules&&l.jsModules.composerFocus&&l.gks&&l.gks.focusExperiment)c('ReactComposerFocusInit').handler(c('$')('feedx_container'),this.$ReactFeedComposerX2,l.jsModules.composerFocus);c('Run').onLeave(this.$ReactFeedComposerX14.bind(this));}k.prototype.$ReactFeedComposerX15=function(l){var m=l.getTarget(),n=null;while(m){if(m.nodeType===1&&m.nodeName==='A'){n=m;break;}m=m.parentNode;}!(n!==null)?j(0):void 0;var o=c('CSS').hasClass(n,"._5qtn");if(o)return;this.$ReactFeedComposerX8.forEach(function(r){return c('CSS').removeClass(r,"_5qtn");});c('CSS').addClass(n,"_5qtn");var p=c('DOM').find(this.$ReactFeedComposerX6,"._559p"),q=c('DOM').find(this.$ReactFeedComposerX6,"._559q");switch(n.getAttribute('data-attachment-type')){case c('ReactComposerAttachmentType').STATUS:c('CSS').hide(q);c('CSS').show(p);break;case c('ReactComposerAttachmentType').MEDIA:case c('ReactComposerAttachmentType').QANDA:c('CSS').show(q);c('CSS').hide(p);break;}};k.prototype.$ReactFeedComposerX12=function(l){if(this.$ReactFeedComposerX1)return;this.$ReactFeedComposerX1=true;var m=c('XReactFeedComposerXBootloadController').getURIBuilder().setString('composer_id',this.$ReactFeedComposerX2).setString('target_id',this.$ReactFeedComposerX10).setEnum('composer_type',this.$ReactFeedComposerX3).setString('friend_list_id',this.$ReactFeedComposerX5).setString('section_id',this.$ReactFeedComposerX7).getURI();new (c('AsyncRequest'))(m).send();var n=c('XReactComposerLoggingODSController').getURIBuilder().setString('event','bootload_start').setEnum('composer_type',c('ComposerEntryPointRef').FEEDX).getURI();new (c('AsyncRequest'))(n).send();};k.prototype.$ReactFeedComposerX14=function(){this.$ReactFeedComposerX9.release();};k.prototype.$ReactFeedComposerX13=function(){this.$ReactFeedComposerX11.value='';c('Arbiter').inform(c('ReactComposerEvents').POST_SUCCEEDED+this.$ReactFeedComposerX2);this.$ReactFeedComposerX14();};f.exports=k;},null);