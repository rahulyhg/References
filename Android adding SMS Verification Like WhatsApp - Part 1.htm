<!DOCTYPE html>
<html class="js" prefix="og: http://ogp.me/ns#" lang="en-US"><head itemscope="" itemtype="http://schema.org/WebSite">
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><!--[if IE]><![endif]--><link rel="dns-prefetch" href="http://fonts.googleapis.com/"><link rel="stylesheet" href="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/a5a1e391aec5be595d617de62628da88.css" data-minify="1"><link rel="stylesheet" href="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/a60d2553227d2a4083b714610c633062.css" data-minify="1"><link rel="stylesheet" href="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/ea444b8f791cdb5bed6e49796eeea22c.css" data-minify="1"><link rel="stylesheet" href="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/04b8d591182752b368837f7711d0f604.css" data-minify="1"><meta charset="UTF-8"> <!--[if IE ]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <![endif]--><link rel="profile" href="http://gmpg.org/xfn/11"><link rel="icon" href="http://test.androidhive.info/wp-content/uploads/2016/04/favicon.png" type="image/x-icon"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta itemprop="name" content="androidhive"><meta itemprop="url" content="http://www.androidhive.info"><meta itemprop="creator accountablePerson" content=" "><link rel="pingback" href="http://www.androidhive.info/xmlrpc.php"><title>Android adding SMS Verification Like WhatsApp - Part 1</title><style type="text/css">.thrive-adminbar-icon {
				background: url('http://www.androidhive.info/wp-content/plugins/thrive-leads/tcb/editor/css/images/tcb-close-icon.png') no-repeat 0px 0px;
				padding-left: 25px !important;
				width: 20px !important;
				height: 20px !important;
			}</style> <script src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/lazyload.js" async=""></script><script src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/ca-pub-8479132932764602.js"></script><script src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/all.js" id="facebook-jssdk"></script><script src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/analytics.js" async=""></script><script type="text/javascript">document.documentElement.className = document.documentElement.className.replace( /\bno-js\b/,'js' );</script> <meta name="description" content="Android tutorial about verifying user mobile number like WhatsApp. Explained complete tutorial about implementing server side REST API with sms gateway."><meta name="robots" content="noodp"><link rel="canonical" href="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/a_003.htm"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Android adding SMS Verification Like WhatsApp - Part 1"><meta property="og:description" content="Android tutorial about verifying user mobile number like WhatsApp. Explained complete tutorial about implementing server side REST API with sms gateway."><meta property="og:url" content="http://www.androidhive.info/2015/08/android-adding-sms-verification-like-whatsapp-part-1/"><meta property="og:site_name" content="androidhive"><meta property="article:section" content="json"><meta property="article:published_time" content="2015-08-01T17:22:54+00:00"><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2015/08/android-sms-verification-like-whatsapp.jpg"><meta property="og:image:width" content="720"><meta property="og:image:height" content="359"><meta name="twitter:card" content="summary"><meta name="twitter:description" content="Android tutorial about verifying user mobile number like WhatsApp. Explained complete tutorial about implementing server side REST API with sms gateway."><meta name="twitter:title" content="Android adding SMS Verification Like WhatsApp - Part 1"><meta name="twitter:image" content="http://www.androidhive.info/wp-content/uploads/2015/08/android-sms-verification-like-whatsapp.jpg"><link rel="alternate" type="application/rss+xml" title="androidhive » Feed" href="http://www.androidhive.info/feed/"><link rel="alternate" type="application/rss+xml" title="androidhive » Comments Feed" href="http://www.androidhive.info/comments/feed/"> <script type="text/javascript">window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.androidhive.info\/wp-includes\/js\/wp-emoji-release.min.js"}};
			!function(a,b,c){function d(a){var c,d=b.createElement("canvas"),e=d.getContext&&d.getContext("2d");return e&&e.fillText?(e.textBaseline="top",e.font="600 32px Arial","flag"===a?(e.fillText(String.fromCharCode(55356,56806,55356,56826),0,0),d.toDataURL().length>3e3):"diversity"===a?(e.fillText(String.fromCharCode(55356,57221),0,0),c=e.getImageData(16,16,1,1).data.toString(),e.fillText(String.fromCharCode(55356,57221,55356,57343),0,0),c!==e.getImageData(16,16,1,1).data.toString()):("simple"===a?e.fillText(String.fromCharCode(55357,56835),0,0):e.fillText(String.fromCharCode(55356,57135),0,0),0!==e.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script><script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/wp-emoji-release.js"></script> <style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style><style id="stylesheet-inline-css" type="text/css">body {background-color:#ffffff; }
		body {background-image: url( http://www.androidhive.info/wp-content/themes/androidhive-theme/images/nobg.png );}

        .header-social a:hover, header .breadcrumb > div i:hover, header .breadcrumb > div a:hover, .breadcrumb > div a:hover, .post-info a, .latestPost .title a:hover, #site-footer .toggle-menu .toggle-caret .fa:hover, #primary-navigation .sub-menu a:hover, .latestPost .title a:hover, ul.ajax-search-results li a:hover, .sidebar .ajax-search-meta a, .breadcrumb > div i, .single .tags a, .postauthor h5 a:hover, .sidebar a, .comment-meta a, .trending-stories .latestPost .title:hover, .postauthor h5, .copyrights a, .single_post a, .textwidget a, .pnavigation2 a, #sidebar a:hover, .copyrights a:hover, #site-footer .widget li a:hover, .related-posts a:hover, .reply a, .title a:hover, .post-info a:hover, .comm, #tabber .inside li a:hover, .readMore a:hover, .fn a, a, a:hover { color: #000000; }

        .latestPost-categories ul li:hover a, .footer-widgets h3, .reply a:hover, #primary-navigation .sub-menu a:hover, #primary-navigation .sub-menu li.current-menu-item a { color: #000000 !important; }

        .latestPost-news .latestPost { border-top: 2px solid #000000; }

        
        .navigation.mobile-menu-wrapper { background: #000000 !important; }

        #header, .pace .pace-progress, #mobile-menu-wrapper ul li a:hover, .widget h3:before, .featured-category-title:before, .widget .wpt_widget_content .tab_title.selected a, #move-to-top, #load-posts, .featured-videos h4:after, .related-posts h4:after, .postauthor h4:after, #comments h4:after, #commentsAdd h4:after, .contact-form input[type='submit'], #commentform input#submit:hover, .contact-form input[type='submit']:hover, #primary-navigation li a:hover, .pagination a:hover, .pagination ul, .latestPost-review-wrapper, a#pull, #commentform input#submit, .contactform #submit, #move-to-top:hover, .navigation ul .current-menu-item > a, .navigation ul li:hover, .pagination a, #tabber ul.tabs li a.selected, .tagcloud a:hover, .latestPost .review-type-circle.review-total-only, .latestPost .review-type-circle.wp-review-show-total, .single .pagination > .current, .bypostauthor .comment-author .fn:after { background-color:#000000; color: #fff!important; }

		.owl-prev, .owl-next { background-color:#000000!important; }

        #site-footer { background: #EAEAEA; }
		
		.shareit { top: 282px; left: 0; margin: 0; width: 90px; position: fixed; padding: 5px; border:none; border-right: 0;}
		.share-item {margin: 2px;}
		
		.bypostauthor { background: none; }
        .bypostauthor > div .comment-author .fn:after { content: "Author"; position: relative; padding: 2px 10px; margin: 0 10px; color: #FFF; font-size: 13px; line-height: 1; font-weight: normal; border-radius: 3px; }</style> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/jquery_002.js"></script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/jquery-migrate.js"></script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/compat.js"></script> <script type="text/javascript">/*  */
var mts_customscript = {"responsive":"1","nav_menu":"primary"};
/*  */</script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/customscript.js"></script> <script type="text/javascript">/*  */
var tickeropts = {"rtl_support":"0"};
/*  */</script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/jquery.js"></script> <link rel="https://api.w.org/" href="http://www.androidhive.info/wp-json/"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.androidhive.info/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.androidhive.info/wp-includes/wlwmanifest.xml"><link rel="shortlink" href="http://www.androidhive.info/?p=38258"><link rel="alternate" type="application/json+oembed" href="http://www.androidhive.info/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.androidhive.info%2F2015%2F08%2Fandroid-adding-sms-verification-like-whatsapp-part-1%2F"><link rel="alternate" type="text/xml+oembed" href="http://www.androidhive.info/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.androidhive.info%2F2015%2F08%2Fandroid-adding-sms-verification-like-whatsapp-part-1%2F&amp;format=xml"> <script type="text/javascript">window._wp_rp_static_base_url = 'https://wprp.zemanta.com/static/';
	window._wp_rp_wp_ajax_url = "http://www.androidhive.info/wp-admin/admin-ajax.php";
	window._wp_rp_plugin_version = '3.6';
	window._wp_rp_post_id = '38258';
	window._wp_rp_num_rel_posts = '4';
	window._wp_rp_thumbnails = true;
	window._wp_rp_post_title = 'Android+adding+SMS+Verification+Like+WhatsApp+-+Part+1';
	window._wp_rp_post_tags = ['sms', 'volley', 'json', 'mysql', 'php', 'rest', 'project', 'mobil', 'commun', 'height', 'collect', 'server', 'android', 'gatewai', 'sm', 'php', 'a', 'architectur', 'mysql', 'articl', 'whatsapp'];
	window._wp_rp_promoted_content = true;</script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/loader.js" async=""></script> <style type="text/css">.related_post_title {
}
ul.related_post {
}
ul.related_post li {
}
ul.related_post li a {
}
ul.related_post li img {
}</style><link href="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/css_003.css" rel="stylesheet" type="text/css"><style type="text/css">#header h1, #header h2 { font-family: 'Open Sans'; font-weight: ; font-size: 25px; color: #ffffff; }
.menu li, .menu li a { font-family: 'Open Sans'; font-weight: ; font-size: 15px; color: #ffffff; }
.latestPost .title a, .latestPost-news .title, .latestPost .title { font-family: 'Merriweather'; font-weight: ; font-size: 23px; color: #252525; }
.single-title { font-family: 'Merriweather'; font-weight: ; font-size: 35px; color: #252525; }
body { font-family: 'Open Sans'; font-weight: ; font-size: 15px; color: #252525; }
.widget h3, .featured-category-title { font-family: 'Open Sans'; font-weight: ; font-size: 15px; color: #252525; }
#sidebar .widget { font-family: 'Open Sans'; font-weight: ; font-size: 14px; color: #252525; }
.footer-widgets, footer .widget li a { font-family: 'Open Sans'; font-weight: ; font-size: 13px; color: #252525; }
h1 { font-family: 'Merriweather'; font-weight: ; font-size: 35px; color: #252525; }
h2 { font-family: 'Merriweather'; font-weight: ; font-size: 24px; color: #252525; }
h3 { font-family: 'Merriweather'; font-weight: ; font-size: 25px; color: #252525; }
h4 { font-family: 'Merriweather'; font-weight: ; font-size: 20px; color: #252525; }
h5 { font-family: 'Merriweather'; font-weight: ; font-size: 18px; color: #252525; }
h6 { font-family: 'Merriweather'; font-weight: ; font-size: 16px; color: #252525; }</style><link href="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/shCore.css" type="text/css" rel="stylesheet"><link href="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/shThemeDefault.css" type="text/css" rel="stylesheet"><style type="text/css" id="syntaxhighlighteranchor"></style> <script data-no-minify="1" data-cfasync="false">(function(w,d){function a(){var b=d.createElement("script");b.async=!0;b.src="http://www.androidhive.info/wp-content/plugins/wp-rocket/inc/front/js/lazyload.1.0.2.min.js";var a=d.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}w.attachEvent?w.attachEvent("onload",a):w.addEventListener("load",a,!1)})(window,document);</script> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24602371-1', 'auto');
  ga('send', 'pageview');</script> <script src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/embed.htm" async="" type="text/javascript"></script><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;bottom:0;left:0;right:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://z-1-static.xx.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style></head><body id="blog" class="single single-post postid-38258 single-format-standard main" itemscope="" itemtype="http://schema.org/WebPage"><a id="move-to-top" class="animate filling" href="#blog"><i class="fa fa-angle-up"></i></a><div class="main-container"> <header id="site-header" role="banner" itemscope="" itemtype="http://schema.org/WPHeader"><div class="upper-navigation"><div class="container clearfix"><div class="breadcrumb"><div class="root"><a href="http://www.androidhive.info/"><i class="fa fa-home"></i></a></div><div class="breaking"><div class="tickercontainer"><div class="mask"><ul style="width: 3251px; transition-duration: 5.5s; left: -275px;" class="trending-slider newsticker"><li><a href="http://www.androidhive.info/2015/09/android-material-design-working-with-tabs/" title="Android Material Design working with Tabs">Android Material Design working with Tabs</a></li><li><a href="http://www.androidhive.info/2015/06/android-push-notifications-using-parse-com/" title="Android Push Notifications using Parse.com">Android Push Notifications using Parse.com</a></li><li><a href="http://www.androidhive.info/2015/04/android-getting-started-with-material-design/" title="Android Getting Started with Material Design">Android Getting Started with Material Design</a></li><li><a href="http://www.androidhive.info/2013/11/android-sliding-menu-using-navigation-drawer/" title="Android Sliding Menu using Navigation Drawer">Android Sliding Menu using Navigation Drawer</a></li><li><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-3/" title="Android Building Realtime Chat App using GCM, PHP &amp; MySQL – Part 3">Android Building Realtime Chat App using GCM, PHP &amp; MySQL – Part 3</a></li><li><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-2/" title="Android Building Realtime Chat App using GCM, PHP &amp; MySQL – Part 2">Android Building Realtime Chat App using GCM, PHP &amp; MySQL – Part 2</a></li><li><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-1/" title="Android Building Realtime Chat App using GCM, PHP &amp; MySQL – Part 1">Android Building Realtime Chat App using GCM, PHP &amp; MySQL – Part 1</a></li><li><a href="http://www.androidhive.info/2015/12/android-material-design-floating-action-button/" title="Android Material Design Floating Action Button">Android Material Design Floating Action Button</a></li><li><a href="http://www.androidhive.info/2015/09/android-material-design-snackbar-example/" title="Android Material Design Snackbar Example">Android Material Design Snackbar Example</a></li><li><a href="http://www.androidhive.info/2015/09/android-material-design-floating-labels-for-edittext/" title="Android Material Design Floating Labels for EditText">Android Material Design Floating Labels for EditText</a></li></ul><span class="tickeroverlay-left">&nbsp;</span><span class="tickeroverlay-right">&nbsp;</span></div></div></div></div><div class="header-social"> <a rel="nofollow" href="http://www.facebook.com/ravi8x" class="header-facebook"><span class="fa fa-facebook"></span></a> <a rel="nofollow" href="http://www.twitter.com/ravitamada" class="header-twitter"><span class="fa fa-twitter"></span></a> <a rel="nofollow" href="https://plus.google.com/u/0/108738908574182577919/posts" class="header-google-plus"><span class="fa fa-google-plus"></span></a> <a rel="nofollow" href="http://instagram.com/ravitamada" class="header-instagram"><span class="fa fa-instagram"></span></a></div></div></div><div id="header"><div class="container"><div class="logo-wrap"><h1 id="logo" class="image-logo" itemprop="headline"> <a href="http://www.androidhive.info/"><img src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/logo-3.png" alt="androidhive"></a></h1></div><div id="primary-navigation" role="navigation" itemscope="" itemtype="http://schema.org/SiteNavigationElement"> <a href="#" id="pull" class="toggle-mobile-menu">Menu</a> <nav class="navigation clearfix mobile-menu-wrapper"><ul id="menu-menu-1" class="menu clearfix toggle-menu"><li id="menu-item-39241" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-39241"><a href="http://download.androidhive.info/">Downloads</a></li><li id="menu-item-39242" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-39242"><a href="http://tips.androidhive.info/">Tips</a></li><li id="menu-item-39327" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39327"><a href="http://www.androidhive.info/write-for-us/">Write for Us</a></li></ul> </nav></div></div></div> </header><div id="page" class="single"> <article class="article" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="http://www.androidhive.info/wp-content/uploads/2015/08/android-sms-verification-like-whatsapp.jpg"><div id="content_box"><div id="post-38258" class="g post post-38258 type-post status-publish format-standard has-post-thumbnail hentry category-json category-mysql category-php category-rest category-sms category-volley has_thumb"><div class="breadcrumb" xmlns:v="http://rdf.data-vocabulary.org/#"><div typeof="v:Breadcrumb" class="root"><a rel="v:url" property="v:title" href="http://www.androidhive.info/">Home</a></div><div><i class="fa fa-angle-right"></i></div><div typeof="v:Breadcrumb"><a href="http://www.androidhive.info/category/json/" rel="v:url" property="v:title">json</a></div><div><i class="fa fa-angle-right"></i></div><div><span>Android adding SMS Verification Like WhatsApp – Part 1</span></div></div><div class="single_post"> <header><h1 class="title single-title entry-title" itemprop="headline">Android adding SMS Verification Like WhatsApp – Part 1</h1><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada">Ravi Tamada</a><span class="divider1">/</span></span></span> <span class="thetime updated"><span itemprop="datePublished">August 1, 2015<span class="divider1">/</span></span></span> <span class="thecomment"><i class="fa fa-comments"></i> <a href="http://www.androidhive.info/2015/08/android-adding-sms-verification-like-whatsapp-part-1/#disqus_thread">Comments</a></span></div> </header><div class="post-single-content box mark-links entry-content"><div class="thecontent" itemprop="articleBody"><div style="float:left;margin:10px 10px 10px 0;"> <script async="" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/adsbygoogle.js"></script>  <ins data-adsbygoogle-status="done" class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-8479132932764602" data-ad-slot="8420041971"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;" frameborder="0" height="280" width="336"></iframe></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div><p>My previous <a href="http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/" target="_blank" class="link">tutorial</a>
 explains how to implement the user login / registration by collecting 
user name, email and password. But what if you want to sign up an user 
using their mobile number like <strong>WhatsApp</strong>, <strong>Viber</strong> by verifying their mobile number in order to get genuine users.</p><p>Before
 going further make sure that you have basic knowledge about android 
client-sever communication. If you are new to this, don’t worry, these 
articles (<a href="http://www.androidhive.info/2013/12/android-populating-spinner-data-from-mysql-database/" target="_blank" class="link">MySQL Spinner</a> &amp; <a href="http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/" target="_blank" class="link">PHP, MySQL – Android</a>) gives you a good start.</p><p>As
 this article seems lengthy, I have divided it into two parts. In this 
part we’ll learn the server side part i.e building the PHP, MySQL 
project by integrating the SMS gateway. In the <a href="http://www.androidhive.info/2015/08/android-adding-sms-verification-like-whatsapp-part-2/" target="_blank" class="link">2nd part</a> we cover the implementation of android app.</p><div style="display:none"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2015/08/android-sms-verification-like-whatsapp.jpg" alt="android-sms-verification-like-whatsapp" class="alignnone size-full wp-image-38515 lazyload" srcset="http://www.androidhive.info/wp-content/uploads/2015/08/android-sms-verification-like-whatsapp-300x150.jpg 300w, http://www.androidhive.info/wp-content/uploads/2015/08/android-sms-verification-like-whatsapp.jpg 720w" sizes="(max-width: 720px) 100vw, 720px" height="359" width="720"><noscript><img src="http://www.androidhive.info/wp-content/uploads/2015/08/android-sms-verification-like-whatsapp.jpg" alt="android-sms-verification-like-whatsapp" width="720" height="359" class="alignnone size-full wp-image-38515" srcset="http://www.androidhive.info/wp-content/uploads/2015/08/android-sms-verification-like-whatsapp-300x150.jpg 300w, http://www.androidhive.info/wp-content/uploads/2015/08/android-sms-verification-like-whatsapp.jpg 720w" sizes="(max-width: 720px) 100vw, 720px" /></noscript></div><div class="clear"></div><div class="download_code"><a href="http://download.androidhive.info/download?code=dyPEl0Lkl0PtF8A5kSWnckjZiysfjPRRpth2ijXf9KPTPCXqcBNTcFZC%2BKRqEzCv%2FoNwhiwS7%2FoOyd8n8Ut%2FaqP1zBk9QExwslJGiDzMM2Os%2BmHOL07mxPhtg%3D%3DJTOJ0JAE9BFPkwm1dJyyxozKoSZT1QD00gv" target="_blank">DOWNLOAD CODE</a></div><div class="yt_video"> <label>VIDEO DEMO</label><br> <iframe src="http://www.youtube.com/embed/g8bF3AY8or0" allowfullscreen="" style="width: 719px; height: 444.7265625px;" frameborder="0"></iframe></div><p></p><h2>1. How It Works</h2><p>Below
 is the simple architecture diagram that explains the process of 
complete registration which involves the PHP, MySQL server and a SMS 
gateway.</p><div class="image"> <img src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/android-sms-verification-php-mysql.png" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-php-mysql.png" alt="android-sms-verification-php-mysql" class="alignnone size-full wp-image-38505     lazyloaded" srcset="http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-php-mysql-300x235.png 300w, http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-php-mysql.png 720w" sizes="(max-width: 720px) 100vw, 720px" height="564" width="720"><noscript><img src="http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-php-mysql.png" alt="android-sms-verification-php-mysql" width="720" height="564" class="alignnone size-full wp-image-38505" srcset="http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-php-mysql-300x235.png 300w, http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-php-mysql.png 720w" sizes="(max-width: 720px) 100vw, 720px" /></noscript></div><p><strong>1</strong>. First user mobile number will be sent to our server where new user row will be created.</p><p><strong>2</strong>. Our server requests the SMS gateway for an sms to the mobile number with a verification code.</p><p><strong>3</strong>. SMS gateway sends an SMS to the user device with the verification code.</p><p><strong>4</strong>. The verification code will be sent back our server again for verification. Our server verifies it and activates the user.<br></p><h2>2. Choosing the SMS Gateway</h2><p>SMS
 gateways are helpful in sending an SMS to any mobile number that comes 
under any mobile network. Basically gateways have a  contract with all 
the mobile networks to send the SMS to a particular mobile number. In 
INDIA we have lot of SMS providers, but choosing the best SMS service 
provider is difficult. I found <a rel="nofollow" href="http://www.solutionsinfini.com/clients.php" target="_blank" class="link">Solutions Infini</a>, <a rel="nofollow" href="http://enterprise.smsgupshup.com/" target="_blank" class="link">SMS Gupshup</a>, <a rel="nofollow" href="http://www.vfirst.com/" target="_blank" class="link">Value First</a> and <a rel="nofollow" href="https://msg91.com/" target="_blank" class="link">Msg91</a> are quite popular. But the most important thing keep in mind while choosing the provider is make sure that they do support <strong>REST API</strong> as our server needs to trigger an SMS whenever a request comes from the android app.</p><p>Unfortunately <strong>there are no free SMS gateways</strong> to test your android app. You have to contact any of the service providers seeking for a demo account or buy the SMS credits.</p><p></p><h2>3. Signing up with MSG91 (API Key)</h2><p>To
 demonstrate the tutorial, I have selected Msg91 gateway for their 
simplicity. Follow the below steps to get register and obtain your REST <strong>API Key</strong>.
 Please be aware that this gateway is for INDIAN users only. If you are 
not from INDIA, choose the gateway which is available in your country.</p><p><strong>1</strong>. <a rel="nofollow" href="http://control.msg91.com/" target="_blank" class="link">Signup</a> with Msg91.</p><p><strong>2</strong>. <a rel="nofollow" href="http://control.msg91.com/user/#payment" target="_blank" class="link">Buy</a> the SMS credits by selecting the appropriate details. In the form select SMS Type as<br> <strong>TRANSACTIONAL ROUTE</strong> and give no.of SMS as <strong>2500</strong> which is minimum credits to buy. The cost would be around <strong>₹600</strong>.</p><p><strong>3</strong>. Proceed with the payment. Once the payment was done, you can see the SMS credits credited into your account.</p><p><strong>4</strong>. To obtain your API key, goto the <a rel="nofollow" href="http://control.msg91.com/apidoc/" target="_blank" class="link">API doc</a> and click on <em>KEY</em>
 on the top right corner. You will be shown your API Key in a popup 
dialog. Copy this API Key, we’re gonna need it in our PHP project.</p><p>Check the below video demonstrating buying the SMS credits on Msg91.</p><div class="yt_video"> <iframe src="http://www.youtube.com/embed/026wzlW1uF4" allowfullscreen="" style="width: 719px; height: 444.7265625px;" frameborder="0"></iframe></div><p></p><h2>4. Building the PHP, MySQL REST API</h2><p>Now
 we have the API Key needed to send the SMS. Let’s start building the 
PHP project needed for the android app. We are going to build a simple 
REST API to manage the users who signs up using the android app. At the 
end of this project, we should be  able to build two end points needed 
for the user registration. One is to register user which sends an SMS 
with a verification code. Second endpoint is to verify the code and 
completes the user registration.</p><p></p><h3>4.1 Installing WAMP software</h3><p>Download &amp; Install WAMP server from <a rel="nofollow" href="http://www.wampserver.com/en/" target="_blank" class="link">www.wampserver.com/en/</a>. Once WAMP is installed, launch the program from <strong>Start ⇒ All Programs ⇒ WampServer ⇒ StartWampServer</strong>. If you are on Mac, <a rel="nofollow" href="https://www.mamp.info/en/" target="_blank" class="link">MAMP</a> will be useful.</p><p>You can test your server by opening the address <a rel="nofollow" href="http://localhost/" target="_blank" class="link">http://localhost/</a> in your browser.<br> Also you can check phpmyadmin by opening <a rel="nofollow" href="http://localhost/phpmyadmin" target="_blank" class="link">http://localhost/phpmyadmin</a></p><p></p><h3>4.2 Creating MySQL Database</h3><p>For this project we need two tables. One is <em>users</em> table to store the user information and second one is <em>sms_codes</em> to store the user’s sms verification codes.</p><p>Below are the columns needed in each table.</p><div class="image"> <img src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/android-sms-verification-mysql-database.jpg" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-mysql-database.jpg" alt="android sms verification mysql database" class="alignnone size-full wp-image-38441     lazyloaded" srcset="http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-mysql-database-300x172.jpg 300w, http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-mysql-database-785x450.jpg 785w, http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-mysql-database.jpg 720w" sizes="(max-width: 720px) 100vw, 720px" height="413" width="720"><noscript><img src="http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-mysql-database.jpg" alt="android sms verification mysql database" width="720" height="413" class="alignnone size-full wp-image-38441" srcset="http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-mysql-database-300x172.jpg 300w, http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-mysql-database-785x450.jpg 785w, http://www.androidhive.info/wp-content/uploads/2015/07/android-sms-verification-mysql-database.jpg 720w" sizes="(max-width: 720px) 100vw, 720px" /></noscript></div><p>Open <a rel="nofollow" href="http://localhost/phpmyadmin" target="_blank" class="link">http://localhost/phpmyadmin</a> and execute below queries to create required database and tables.</p><p>Create a database named android_sms.</p><div><div id="highlighter_439682" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql keyword">CREATE</code> <code class="sql keyword">DATABASE</code> <code class="sql plain">android_sms;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql plain">USE android_sms;</code></div></div></td></tr></tbody></table></div></div><p>Create required tables and relationship by executing below sql queries.</p><div><div id="highlighter_323715" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql keyword">CREATE</code> <code class="sql keyword">TABLE</code> <code class="sql plain">`sms_codes` (</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`id` </code><code class="sql keyword">int</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql plain">AUTO_INCREMENT,</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`user_id` </code><code class="sql keyword">int</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`code` </code><code class="sql keyword">varchar</code><code class="sql plain">(6) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`status` </code><code class="sql keyword">int</code><code class="sql plain">(1) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql keyword">DEFAULT</code> <code class="sql string">'0'</code><code class="sql plain">,</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`created_at` </code><code class="sql keyword">timestamp</code> <code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql keyword">DEFAULT</code> <code class="sql color2">CURRENT_TIMESTAMP</code><code class="sql plain">,</code></div><div class="line number7 index6 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql keyword">PRIMARY</code> <code class="sql keyword">KEY</code> <code class="sql plain">(`id`),</code></div><div class="line number8 index7 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql keyword">KEY</code> <code class="sql plain">`user_id` (`user_id`)</code></div><div class="line number9 index8 alt2"><code class="sql plain">) ENGINE=InnoDB&nbsp; </code><code class="sql keyword">DEFAULT</code> <code class="sql plain">CHARSET=latin1;</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="sql keyword">CREATE</code> <code class="sql keyword">TABLE</code> <code class="sql plain">`users` (</code></div><div class="line number13 index12 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`id` </code><code class="sql keyword">int</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql plain">AUTO_INCREMENT,</code></div><div class="line number14 index13 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`</code><code class="sql keyword">name</code><code class="sql plain">` </code><code class="sql keyword">varchar</code><code class="sql plain">(50) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number15 index14 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`email` </code><code class="sql keyword">varchar</code><code class="sql plain">(250) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number16 index15 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`mobile` </code><code class="sql keyword">varchar</code><code class="sql plain">(10) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number17 index16 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`apikey` </code><code class="sql keyword">varchar</code><code class="sql plain">(32) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number18 index17 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`status` </code><code class="sql keyword">int</code><code class="sql plain">(1) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql keyword">DEFAULT</code> <code class="sql string">'0'</code><code class="sql plain">,</code></div><div class="line number19 index18 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`created_at` </code><code class="sql keyword">timestamp</code> <code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql keyword">DEFAULT</code> <code class="sql color2">CURRENT_TIMESTAMP</code><code class="sql plain">,</code></div><div class="line number20 index19 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql keyword">PRIMARY</code> <code class="sql keyword">KEY</code> <code class="sql plain">(`id`)</code></div><div class="line number21 index20 alt2"><code class="sql plain">) ENGINE=InnoDB&nbsp; </code><code class="sql keyword">DEFAULT</code> <code class="sql plain">CHARSET=latin1 AUTO_INCREMENT=64 ;</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="sql keyword">ALTER</code> <code class="sql keyword">TABLE</code> <code class="sql plain">`sms_codes`</code></div><div class="line number25 index24 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql keyword">ADD</code> <code class="sql keyword">CONSTRAINT</code> <code class="sql plain">`sms_codes_ibfk_1` </code><code class="sql keyword">FOREIGN</code> <code class="sql keyword">KEY</code> <code class="sql plain">(`user_id`) </code><code class="sql keyword">REFERENCES</code> <code class="sql plain">`users` (`id`) </code><code class="sql keyword">ON</code> <code class="sql keyword">DELETE</code> <code class="sql keyword">CASCADE</code> <code class="sql keyword">ON</code> <code class="sql keyword">UPDATE</code> <code class="sql keyword">CASCADE</code><code class="sql plain">;</code></div></div></td></tr></tbody></table></div></div><p></p><h3>4.3 Creating PHP Project</h3><p>Once
 you are done with database setup, let’s move to php project 
development. You can use any IDE like Netbeans to develop this project 
or just the notepad++ is enough.</p><p><strong>1</strong>. Goto the WAMP project directory i.e <strong>C:/wamp/www</strong> and create a folder named <strong>android_sms</strong>. This will be the root directory of our PHP project.</p><p><strong>2</strong>. Inside <strong>android_sms</strong>, create a folder named <strong>include</strong>. In this folder we keep all the configuration like database credentials, Msg91 API Key etc.,</p><p><strong>3</strong>. Create a file under <strong>include</strong> folder named <strong>Config.php</strong> and add below code. Replace the MySQL credentials and <strong>Msg91 API Key</strong> in the below code with yours.</p><div><div id="highlighter_947083" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>Config.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1"><code class="php comments">/**</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">* Database configuration</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">*/</code></div><div class="line number5 index4 alt2"><code class="php plain">define(</code><code class="php string">'DB_USERNAME'</code><code class="php plain">, </code><code class="php string">'root'</code><code class="php plain">);</code></div><div class="line number6 index5 alt1"><code class="php plain">define(</code><code class="php string">'DB_PASSWORD'</code><code class="php plain">, </code><code class="php string">'root'</code><code class="php plain">);</code></div><div class="line number7 index6 alt2"><code class="php plain">define(</code><code class="php string">'DB_HOST'</code><code class="php plain">, </code><code class="php string">'localhost'</code><code class="php plain">);</code></div><div class="line number8 index7 alt1"><code class="php plain">define(</code><code class="php string">'DB_NAME'</code><code class="php plain">, </code><code class="php string">'android_sms'</code><code class="php plain">);</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php comments">/**</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">* MSG91 configuration</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">*/</code></div><div class="line number14 index13 alt1"><code class="php plain">define(</code><code class="php string">'MSG91_AUTH_KEY'</code><code class="php plain">, </code><code class="php string">"88276AGwzewOEdFs559d2888"</code><code class="php plain">);</code></div><div class="line number15 index14 alt2"><code class="php comments">// sender id should 6 character long</code></div><div class="line number16 index15 alt1"><code class="php plain">define(</code><code class="php string">'MSG91_SENDER_ID'</code><code class="php plain">, </code><code class="php string">'ANHIVE'</code><code class="php plain">);</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="php plain">define(</code><code class="php string">'USER_CREATED_SUCCESSFULLY'</code><code class="php plain">, 0);</code></div><div class="line number19 index18 alt2"><code class="php plain">define(</code><code class="php string">'USER_CREATE_FAILED'</code><code class="php plain">, 1);</code></div><div class="line number20 index19 alt1"><code class="php plain">define(</code><code class="php string">'USER_ALREADY_EXISTED'</code><code class="php plain">, 2);</code></div><div class="line number21 index20 alt2"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div><p> <strong>4</strong>. Under <strong>include</strong> folder, create another php file named <strong>DbConnect.php</strong> This file handles the database connection.</p><div><div id="highlighter_63697" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>DbConnect.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php comments">/**</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">* Handling database connection</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">*</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">* @author Ravi Tamada</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">* @link URL Tutorial link</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">*/</code></div><div class="line number9 index8 alt2"><code class="php keyword">class</code> <code class="php plain">DbConnect {</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php variable">$conn</code><code class="php plain">;</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">function</code> <code class="php plain">__construct() {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/**</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* Establishing database connection</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* @return database connection handler</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">*/</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">function</code> <code class="php plain">connect() {</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">include_once</code> <code class="php plain">dirname(</code><code class="php constants">__FILE__</code><code class="php plain">) . </code><code class="php string">'/Config.php'</code><code class="php plain">;</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Connecting to mysql database</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;conn = </code><code class="php keyword">new</code> <code class="php plain">mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Check for database connection error</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(mysqli_connect_errno()) {</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php string">"Failed to connect to MySQL: "</code> <code class="php plain">. mysqli_connect_error();</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">exit</code><code class="php plain">;</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// returing connection resource</code></div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;conn;</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="php plain">}</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div><p> <strong>5</strong>. Create another php file named <strong>DbHandler.php</strong> under <strong>include</strong> folder. This file contains the major functions to perform the read, write operations onto database.</p><div style="float:none;margin:10px 0 10px 0;text-align:center;"> <script async="" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/adsbygoogle.js"></script>  <ins data-adsbygoogle-status="done" class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-8479132932764602" data-ad-slot="5326974778"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><ins id="aswift_1_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;" frameborder="0" height="280" width="336"></iframe></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div><div><div id="highlighter_676760" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>DbHandler.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php comments">/**</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">* Class to handle all db operations</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">* This class will have CRUD methods for database tables</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">*</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">* @author Ravi Tamada</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">* @link URL Tutorial link</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">*/</code></div><div class="line number10 index9 alt1"><code class="php keyword">class</code> <code class="php plain">DbHandler {</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php variable">$conn</code><code class="php plain">;</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">function</code> <code class="php plain">__construct() {</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">require_once</code> <code class="php plain">dirname(</code><code class="php constants">__FILE__</code><code class="php plain">) . </code><code class="php string">'/DbConnect.php'</code><code class="php plain">;</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// opening db connection</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$db</code> <code class="php plain">= </code><code class="php keyword">new</code> <code class="php plain">DbConnect();</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;conn = </code><code class="php variable">$db</code><code class="php plain">-&gt;connect();</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/* ------------- `users` table method ------------------ */</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/**</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* Creating new user</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* @param String $name User full name</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* @param String $email User login email id</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* @param String $mobile User mobile number</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* @param String $otp user verificaiton code</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">*/</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">createUser(</code><code class="php variable">$name</code><code class="php plain">, </code><code class="php variable">$email</code><code class="php plain">, </code><code class="php variable">$mobile</code><code class="php plain">, </code><code class="php variable">$otp</code><code class="php plain">) {</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">();</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// First check if user already existed in db</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(!</code><code class="php variable">$this</code><code class="php plain">-&gt;isUserExists(</code><code class="php variable">$mobile</code><code class="php plain">)) {</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Generating API key</code></div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$api_key</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;generateApiKey();</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// insert query</code></div><div class="line number40 index39 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;conn-&gt;prepare(</code><code class="php string">"INSERT INTO users(name, email, mobile, apikey, status) values(?, ?, ?, ?, 0)"</code><code class="php plain">);</code></div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;bind_param(</code><code class="php string">"ssss"</code><code class="php plain">, </code><code class="php variable">$name</code><code class="php plain">, </code><code class="php variable">$email</code><code class="php plain">, </code><code class="php variable">$mobile</code><code class="php plain">, </code><code class="php variable">$api_key</code><code class="php plain">);</code></div><div class="line number42 index41 alt1">&nbsp;</div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= </code><code class="php variable">$stmt</code><code class="php plain">-&gt;execute();</code></div><div class="line number44 index43 alt1">&nbsp;</div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$new_user_id</code> <code class="php plain">= </code><code class="php variable">$stmt</code><code class="php plain">-&gt;insert_id;</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;close();</code></div><div class="line number48 index47 alt1">&nbsp;</div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Check for successful insertion</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$result</code><code class="php plain">) {</code></div><div class="line number51 index50 alt2">&nbsp;</div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$otp_result</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;createOtp(</code><code class="php variable">$new_user_id</code><code class="php plain">, </code><code class="php variable">$otp</code><code class="php plain">);</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// User successfully inserted</code></div><div class="line number55 index54 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">USER_CREATED_SUCCESSFULLY;</code></div><div class="line number56 index55 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number57 index56 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Failed to create user</code></div><div class="line number58 index57 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">USER_CREATE_FAILED;</code></div><div class="line number59 index58 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number60 index59 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number61 index60 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// User with same email already existed in the db</code></div><div class="line number62 index61 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">USER_ALREADY_EXISTED;</code></div><div class="line number63 index62 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number64 index63 alt1">&nbsp;</div><div class="line number65 index64 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$response</code><code class="php plain">;</code></div><div class="line number66 index65 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number67 index66 alt2">&nbsp;</div><div class="line number68 index67 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">createOtp(</code><code class="php variable">$user_id</code><code class="php plain">, </code><code class="php variable">$otp</code><code class="php plain">) {</code></div><div class="line number69 index68 alt2">&nbsp;</div><div class="line number70 index69 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// delete the old otp if exists</code></div><div class="line number71 index70 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;conn-&gt;prepare(</code><code class="php string">"DELETE FROM sms_codes where user_id = ?"</code><code class="php plain">);</code></div><div class="line number72 index71 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;bind_param(</code><code class="php string">"i"</code><code class="php plain">, </code><code class="php variable">$user_id</code><code class="php plain">);</code></div><div class="line number73 index72 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;execute();</code></div><div class="line number74 index73 alt1">&nbsp;</div><div class="line number75 index74 alt2">&nbsp;</div><div class="line number76 index75 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;conn-&gt;prepare(</code><code class="php string">"INSERT INTO sms_codes(user_id, code, status) values(?, ?, 0)"</code><code class="php plain">);</code></div><div class="line number77 index76 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;bind_param(</code><code class="php string">"is"</code><code class="php plain">, </code><code class="php variable">$user_id</code><code class="php plain">, </code><code class="php variable">$otp</code><code class="php plain">);</code></div><div class="line number78 index77 alt1">&nbsp;</div><div class="line number79 index78 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= </code><code class="php variable">$stmt</code><code class="php plain">-&gt;execute();</code></div><div class="line number80 index79 alt1">&nbsp;</div><div class="line number81 index80 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;close();</code></div><div class="line number82 index81 alt1">&nbsp;</div><div class="line number83 index82 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$result</code><code class="php plain">;</code></div><div class="line number84 index83 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number85 index84 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number86 index85 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/**</code></div><div class="line number87 index86 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* Checking for duplicate user by mobile number</code></div><div class="line number88 index87 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* @param String $email email to check in db</code></div><div class="line number89 index88 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* @return boolean</code></div><div class="line number90 index89 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">*/</code></div><div class="line number91 index90 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php keyword">function</code> <code class="php plain">isUserExists(</code><code class="php variable">$mobile</code><code class="php plain">) {</code></div><div class="line number92 index91 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;conn-&gt;prepare(</code><code class="php string">"SELECT id from users WHERE mobile = ? and status = 1"</code><code class="php plain">);</code></div><div class="line number93 index92 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;bind_param(</code><code class="php string">"s"</code><code class="php plain">, </code><code class="php variable">$mobile</code><code class="php plain">);</code></div><div class="line number94 index93 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;execute();</code></div><div class="line number95 index94 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;store_result();</code></div><div class="line number96 index95 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$num_rows</code> <code class="php plain">= </code><code class="php variable">$stmt</code><code class="php plain">-&gt;num_rows;</code></div><div class="line number97 index96 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;close();</code></div><div class="line number98 index97 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$num_rows</code> <code class="php plain">&gt; 0;</code></div><div class="line number99 index98 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number100 index99 alt1">&nbsp;</div><div class="line number101 index100 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">activateUser(</code><code class="php variable">$otp</code><code class="php plain">) {</code></div><div class="line number102 index101 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;conn-&gt;prepare(</code><code class="php string">"SELECT u.id, u.name, u.email, u.mobile, u.apikey, u.status, u.created_at FROM users u, sms_codes WHERE sms_codes.code = ? AND sms_codes.user_id = u.id"</code><code class="php plain">);</code></div><div class="line number103 index102 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;bind_param(</code><code class="php string">"s"</code><code class="php plain">, </code><code class="php variable">$otp</code><code class="php plain">);</code></div><div class="line number104 index103 alt1">&nbsp;</div><div class="line number105 index104 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$stmt</code><code class="php plain">-&gt;execute()) {</code></div><div class="line number106 index105 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// $user = $stmt-&gt;get_result()-&gt;fetch_assoc();</code></div><div class="line number107 index106 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;bind_result(</code><code class="php variable">$id</code><code class="php plain">, </code><code class="php variable">$name</code><code class="php plain">, </code><code class="php variable">$email</code><code class="php plain">, </code><code class="php variable">$mobile</code><code class="php plain">, </code><code class="php variable">$apikey</code><code class="php plain">, </code><code class="php variable">$status</code><code class="php plain">, </code><code class="php variable">$created_at</code><code class="php plain">);</code></div><div class="line number108 index107 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number109 index108 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;store_result();</code></div><div class="line number110 index109 alt1">&nbsp;</div><div class="line number111 index110 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$stmt</code><code class="php plain">-&gt;num_rows &gt; 0) {</code></div><div class="line number112 index111 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number113 index112 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;fetch();</code></div><div class="line number114 index113 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number115 index114 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// activate the user</code></div><div class="line number116 index115 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;activateUserStatus(</code><code class="php variable">$id</code><code class="php plain">);</code></div><div class="line number117 index116 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number118 index117 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$user</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">();</code></div><div class="line number119 index118 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$user</code><code class="php plain">[</code><code class="php string">"name"</code><code class="php plain">] = </code><code class="php variable">$name</code><code class="php plain">;</code></div><div class="line number120 index119 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$user</code><code class="php plain">[</code><code class="php string">"email"</code><code class="php plain">] = </code><code class="php variable">$email</code><code class="php plain">;</code></div><div class="line number121 index120 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$user</code><code class="php plain">[</code><code class="php string">"mobile"</code><code class="php plain">] = </code><code class="php variable">$mobile</code><code class="php plain">;</code></div><div class="line number122 index121 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$user</code><code class="php plain">[</code><code class="php string">"apikey"</code><code class="php plain">] = </code><code class="php variable">$apikey</code><code class="php plain">;</code></div><div class="line number123 index122 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$user</code><code class="php plain">[</code><code class="php string">"status"</code><code class="php plain">] = </code><code class="php variable">$status</code><code class="php plain">;</code></div><div class="line number124 index123 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$user</code><code class="php plain">[</code><code class="php string">"created_at"</code><code class="php plain">] = </code><code class="php variable">$created_at</code><code class="php plain">;</code></div><div class="line number125 index124 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number126 index125 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;close();</code></div><div class="line number127 index126 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number128 index127 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$user</code><code class="php plain">;</code></div><div class="line number129 index128 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number130 index129 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">NULL;</code></div><div class="line number131 index130 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number132 index131 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number133 index132 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">NULL;</code></div><div class="line number134 index133 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number135 index134 alt2">&nbsp;</div><div class="line number136 index135 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$result</code><code class="php plain">;</code></div><div class="line number137 index136 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number138 index137 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number139 index138 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">activateUserStatus(</code><code class="php variable">$user_id</code><code class="php plain">){</code></div><div class="line number140 index139 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;conn-&gt;prepare(</code><code class="php string">"UPDATE users set status = 1 where id = ?"</code><code class="php plain">);</code></div><div class="line number141 index140 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;bind_param(</code><code class="php string">"i"</code><code class="php plain">, </code><code class="php variable">$user_id</code><code class="php plain">);</code></div><div class="line number142 index141 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number143 index142 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;execute();</code></div><div class="line number144 index143 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number145 index144 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;conn-&gt;prepare(</code><code class="php string">"UPDATE sms_codes set status = 1 where user_id = ?"</code><code class="php plain">);</code></div><div class="line number146 index145 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;bind_param(</code><code class="php string">"i"</code><code class="php plain">, </code><code class="php variable">$user_id</code><code class="php plain">);</code></div><div class="line number147 index146 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number148 index147 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$stmt</code><code class="php plain">-&gt;execute();</code></div><div class="line number149 index148 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number150 index149 alt1">&nbsp;</div><div class="line number151 index150 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/**</code></div><div class="line number152 index151 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* Generating random Unique MD5 String for user Api key</code></div><div class="line number153 index152 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">*/</code></div><div class="line number154 index153 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php keyword">function</code> <code class="php plain">generateApiKey() {</code></div><div class="line number155 index154 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">md5(uniqid(rand(), true));</code></div><div class="line number156 index155 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number157 index156 alt2"><code class="php plain">}</code></div><div class="line number158 index157 alt1"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div><p> <strong>6</strong>.
 Now we have all the core logic ready. Let’s create an endpoint to 
register the user. In your project’s root directory, create a file named
 <strong>request_sms.php</strong>.</p><p>In below code</p><p><strong>&gt;</strong> First we receive the <strong>name, email</strong> and <strong>mobile number</strong> those were sent from the android device as a <strong>POST</strong> parameters.</p><p><strong>&gt;</strong> We create an entry in <em>users</em> table by calling <em>createUser()</em> function. Initially the user <strong>status</strong> will be <strong>0</strong> which indicate the user is inactive. This status will be made to <strong>1</strong> when the user verifies the OTP.</p><p><strong>&gt;</strong> Once the user row is created, we request for an SMS to the mobile number by calling <em>sendSms()</em> method.</p><p><strong>&gt;</strong> <em>sendSms()</em> method will make a call to Msg91 REST API to send SMS with a <strong>6 digits OTP</strong> to the users mobile number.</p><p>Below is the sample SMS message the user will receive to their mobile. The OTP should be prefixed by <strong>:</strong> and <strong>space</strong> in the message.</p><div><div id="highlighter_256098" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">Hello! Welcome </code><code class="sql keyword">to</code> <code class="sql plain">AndroidHive. Your OPT </code><code class="sql keyword">is</code> <code class="sql plain">: 228767</code></div></div></td></tr></tbody></table></div></div><div><div id="highlighter_197917" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>request_sms.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php keyword">include</code> <code class="php string">'./include/DbHandler.php'</code><code class="php plain">;</code></div><div class="line number4 index3 alt1"><code class="php variable">$db</code> <code class="php plain">= </code><code class="php keyword">new</code> <code class="php plain">DbHandler();</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="php variable">$response</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">();</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="php keyword">if</code> <code class="php plain">(isset(</code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">'mobile'</code><code class="php plain">]) &amp;&amp; </code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">'mobile'</code><code class="php plain">] != </code><code class="php string">''</code><code class="php plain">) {</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$name</code> <code class="php plain">= </code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">'name'</code><code class="php plain">];</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$email</code> <code class="php plain">= </code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">'email'</code><code class="php plain">];</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$mobile</code> <code class="php plain">= </code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">'mobile'</code><code class="php plain">];</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$otp</code> <code class="php plain">= rand(100000, 999999);</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$res</code> <code class="php plain">= </code><code class="php variable">$db</code><code class="php plain">-&gt;createUser(</code><code class="php variable">$name</code><code class="php plain">, </code><code class="php variable">$email</code><code class="php plain">, </code><code class="php variable">$mobile</code><code class="php plain">, </code><code class="php variable">$otp</code><code class="php plain">);</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$res</code> <code class="php plain">== USER_CREATED_SUCCESSFULLY) {</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// send sms</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">sendSms(</code><code class="php variable">$mobile</code><code class="php plain">, </code><code class="php variable">$otp</code><code class="php plain">);</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"error"</code><code class="php plain">] = false;</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"message"</code><code class="php plain">] = </code><code class="php string">"SMS request is initiated! You will be receiving it shortly."</code><code class="php plain">;</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$res</code> <code class="php plain">== USER_CREATE_FAILED) {</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"error"</code><code class="php plain">] = true;</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"message"</code><code class="php plain">] = </code><code class="php string">"Sorry! Error occurred in registration."</code><code class="php plain">;</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$res</code> <code class="php plain">== USER_ALREADY_EXISTED) {</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"error"</code><code class="php plain">] = true;</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"message"</code><code class="php plain">] = </code><code class="php string">"Mobile number already existed!"</code><code class="php plain">;</code></div><div class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number33 index32 alt2"><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"error"</code><code class="php plain">] = true;</code></div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"message"</code><code class="php plain">] = </code><code class="php string">"Sorry! mobile number is not valid or missing."</code><code class="php plain">;</code></div><div class="line number36 index35 alt1"><code class="php plain">}</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="php functions">echo</code> <code class="php plain">json_encode(</code><code class="php variable">$response</code><code class="php plain">);</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="php keyword">function</code> <code class="php plain">sendSms(</code><code class="php variable">$mobile</code><code class="php plain">, </code><code class="php variable">$otp</code><code class="php plain">) {</code></div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$otp_prefix</code> <code class="php plain">= </code><code class="php string">':'</code><code class="php plain">;</code></div><div class="line number43 index42 alt2">&nbsp;</div><div class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">//Your message to send, Add URL encoding here.</code></div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$message</code> <code class="php plain">= urlencode(</code><code class="php string">"Hello! Welcome to AndroidHive. Your OPT is '$otp_prefix $otp'"</code><code class="php plain">);</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response_type</code> <code class="php plain">= </code><code class="php string">'json'</code><code class="php plain">;</code></div><div class="line number48 index47 alt1">&nbsp;</div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">//Define route </code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$route</code> <code class="php plain">= </code><code class="php string">"4"</code><code class="php plain">;</code></div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">//Prepare you post parameters</code></div><div class="line number53 index52 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$postData</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number54 index53 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'authkey'</code> <code class="php plain">=&gt; MSG91_AUTH_KEY,</code></div><div class="line number55 index54 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'mobiles'</code> <code class="php plain">=&gt; </code><code class="php variable">$mobile</code><code class="php plain">,</code></div><div class="line number56 index55 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'message'</code> <code class="php plain">=&gt; </code><code class="php variable">$message</code><code class="php plain">,</code></div><div class="line number57 index56 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'sender'</code> <code class="php plain">=&gt; MSG91_SENDER_ID,</code></div><div class="line number58 index57 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'route'</code> <code class="php plain">=&gt; </code><code class="php variable">$route</code><code class="php plain">,</code></div><div class="line number59 index58 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'response'</code> <code class="php plain">=&gt; </code><code class="php variable">$response_type</code></div><div class="line number60 index59 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">);</code></div><div class="line number61 index60 alt2">&nbsp;</div><div class="line number62 index61 alt1"><code class="php comments">//API URL</code></div><div class="line number63 index62 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$url</code> <code class="php plain">= </code><code class="php string">"<a href="https://control.msg91.com/sendhttp.php">https://control.msg91.com/sendhttp.php</a>"</code><code class="php plain">;</code></div><div class="line number64 index63 alt1">&nbsp;</div><div class="line number65 index64 alt2"><code class="php comments">// init the resource</code></div><div class="line number66 index65 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$ch</code> <code class="php plain">= curl_init();</code></div><div class="line number67 index66 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">curl_setopt_array(</code><code class="php variable">$ch</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number68 index67 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">CURLOPT_URL =&gt; </code><code class="php variable">$url</code><code class="php plain">,</code></div><div class="line number69 index68 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">CURLOPT_RETURNTRANSFER =&gt; true,</code></div><div class="line number70 index69 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">CURLOPT_POST =&gt; true,</code></div><div class="line number71 index70 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">CURLOPT_POSTFIELDS =&gt; </code><code class="php variable">$postData</code></div><div class="line number72 index71 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">//,CURLOPT_FOLLOWLOCATION =&gt; true</code></div><div class="line number73 index72 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">));</code></div><div class="line number74 index73 alt1">&nbsp;</div><div class="line number75 index74 alt2">&nbsp;</div><div class="line number76 index75 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">//Ignore SSL certificate verification</code></div><div class="line number77 index76 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">curl_setopt(</code><code class="php variable">$ch</code><code class="php plain">, CURLOPT_SSL_VERIFYHOST, 0);</code></div><div class="line number78 index77 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">curl_setopt(</code><code class="php variable">$ch</code><code class="php plain">, CURLOPT_SSL_VERIFYPEER, 0);</code></div><div class="line number79 index78 alt2">&nbsp;</div><div class="line number80 index79 alt1">&nbsp;</div><div class="line number81 index80 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">//get response</code></div><div class="line number82 index81 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$output</code> <code class="php plain">= curl_exec(</code><code class="php variable">$ch</code><code class="php plain">);</code></div><div class="line number83 index82 alt2">&nbsp;</div><div class="line number84 index83 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">//Print error if any</code></div><div class="line number85 index84 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(curl_errno(</code><code class="php variable">$ch</code><code class="php plain">)) {</code></div><div class="line number86 index85 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php string">'error:'</code> <code class="php plain">. curl_error(</code><code class="php variable">$ch</code><code class="php plain">);</code></div><div class="line number87 index86 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number88 index87 alt1">&nbsp;</div><div class="line number89 index88 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">curl_close(</code><code class="php variable">$ch</code><code class="php plain">);</code></div><div class="line number90 index89 alt1"><code class="php plain">}</code></div><div class="line number91 index90 alt2"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div><p> <strong>7</strong>. Now we need to create another endpoint to verify the OTP. Create a php file named <strong>verify_otp.php</strong> with below content.</p><p>In the below code</p><p><strong>&gt;</strong> The OTP will be received from the android device as a <strong>POST</strong> param.</p><p><strong>&gt;</strong> The user who matches with OTP will fetched from the users table.</p><p><strong>&gt;</strong> Then the user <strong>status</strong> will be set to <strong>1</strong> in both users and sms_codes table which makes the user active.</p><p><strong>&gt;</strong> The above two steps are implemented in <em>activateUser()</em> function.</p><div><div id="highlighter_230648" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><caption>verify_otp.php</caption><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php keyword">include</code> <code class="php string">'./include/DbHandler.php'</code><code class="php plain">;</code></div><div class="line number4 index3 alt1"><code class="php variable">$db</code> <code class="php plain">= </code><code class="php keyword">new</code> <code class="php plain">DbHandler();</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="php variable">$response</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">();</code></div><div class="line number8 index7 alt1"><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"error"</code><code class="php plain">] = false;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="php keyword">if</code> <code class="php plain">(isset(</code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">'otp'</code><code class="php plain">]) &amp;&amp; </code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">'otp'</code><code class="php plain">] != </code><code class="php string">''</code><code class="php plain">) {</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$otp</code> <code class="php plain">= </code><code class="php variable">$_POST</code><code class="php plain">[</code><code class="php string">'otp'</code><code class="php plain">];</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$user</code> <code class="php plain">= </code><code class="php variable">$db</code><code class="php plain">-&gt;activateUser(</code><code class="php variable">$otp</code><code class="php plain">);</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$user</code> <code class="php plain">!= NULL) {</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"message"</code><code class="php plain">] = </code><code class="php string">"User created successfully!"</code><code class="php plain">;</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"profile"</code><code class="php plain">] = </code><code class="php variable">$user</code><code class="php plain">;</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"message"</code><code class="php plain">] = </code><code class="php string">"Sorry! Failed to create your account."</code><code class="php plain">;</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number25 index24 alt2"><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$response</code><code class="php plain">[</code><code class="php string">"message"</code><code class="php plain">] = </code><code class="php string">"Sorry! OTP is missing."</code><code class="php plain">;</code></div><div class="line number27 index26 alt2"><code class="php plain">}</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="php functions">echo</code> <code class="php plain">json_encode(</code><code class="php variable">$response</code><code class="php plain">);</code></div><div class="line number31 index30 alt2"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div><p></p><h2>5. Testing the REST API</h2><p>To test our API, install <a rel="nofollow" href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop?hl=en" target="_blank" class="link">Postman</a> chrome extension which allows you to test the endpoints by passing the parameters required.</p><p><strong>Request SMS</strong></p><div id="changelog"><table border="0" width="100%"><tbody><tr><td><strong>URL</strong></td><td><strong>Method</strong></td><td><strong>Parameters</strong></td><td><strong>Description</strong></td></tr><tr><td>http://localhost/android_sms/request_sms.php</td><td>POST</td><td>name, email, mobile</td><td>Request SMS</td></tr></tbody></table></div><p>The below json should be produced when SMS sent successfully.</p><div><div id="highlighter_775781" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">{</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"error"</code><code class="java plain">: </code><code class="java keyword">false</code><code class="java plain">,</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"message"</code><code class="java plain">: </code><code class="java string">"SMS request is initiated! You will be receiving it shortly."</code></div><div class="line number4 index3 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div><p> <strong>Verifying user OTP</strong></p><div id="changelog"><table border="0" width="100%"><tbody><tr><td><strong>URL</strong></td><td><strong>Method</strong></td><td><strong>Parameters</strong></td><td><strong>Description</strong></td></tr><tr><td>http://localhost/android_sms/verify_otp.php</td><td>POST</td><td>otp</td><td>verifying user verification code</td></tr></tbody></table></div><p>When the OTP is verified successfully, the complete user profile information should be produced in the json.</p><div><div id="highlighter_842598" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">{</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"error"</code><code class="java plain">: </code><code class="java keyword">false</code><code class="java plain">,</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"message"</code><code class="java plain">: </code><code class="java string">"User created successfully!"</code><code class="java plain">,</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"profile"</code><code class="java plain">: {</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"name"</code><code class="java plain">: </code><code class="java string">"Ravi Tamada"</code><code class="java plain">,</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"email"</code><code class="java plain">: </code><code class="java string">"ravi@androidhive.info"</code><code class="java plain">,</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"mobile"</code><code class="java plain">: </code><code class="java string">"0000000000"</code><code class="java plain">,</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"apikey"</code><code class="java plain">: </code><code class="java string">"088d196bacbe6bf08657720c9d562390"</code><code class="java plain">,</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"status"</code><code class="java plain">: </code><code class="java value">0</code><code class="java plain">,</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java string">"created_at"</code><code class="java plain">: </code><code class="java string">"2015-07-30 22:18:59"</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number12 index11 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div><p>Watch the below video know how to use Postman to test the endpoints.</p><div class="yt_video"> <iframe src="http://www.youtube.com/embed/-lf5vfPuPz0" allowfullscreen="" style="width: 719px; height: 444.7265625px;" frameborder="0"></iframe></div><p> This completes the server side part. In the <a href="http://www.androidhive.info/2015/08/android-adding-sms-verification-like-whatsapp-part-2/" target="_blank" class="link">2nd part</a> we are going to learn how to create the android app by integrating the API we have just built.</p><div style="float:none;margin:10px 0 10px 0;text-align:center;"><hr><div class="tve-leads-shortcode tve-tl-anim tl-anim-instant tve-leads-track-shortcode_39261 tve-leads-triggered"><div class="tl-style" id="tve_27_set" data-state="7"><div class="tve-leads-conversion-object" data-tl-type="shortcode_39261"><div class="tve_flt"><div class="thrv-leads-form-box tve_no_drag tve_no_icons tve_element_hover thrv_wrapper tve_editor_main_content tve_27_set tve_brdr_solid tve_blue"><div class="thrv_wrapper thrv_columns tve_clearfix" style="margin-top: 0;margin-bottom: 0;"><div class="tve_colm tve_oth"><div style="width: 198px;margin-top: 30px;" class="thrv_wrapper tve_image_caption aligncenter"><span class="tve_image_frame"><img class="tve_image     lazyloaded" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/set_27_icon.png" data-lazy-src="//androidhive.info/wp-content/plugins/thrive-leads/editor-templates/_form_css/images/set_27_icon.png" style="width: 198px;"><noscript><img
 class="tve_image" 
src="//androidhive.info/wp-content/plugins/thrive-leads/editor-templates/_form_css/images/set_27_icon.png"
 style="width: 198px;"></noscript></span></div></div><div class="tve_colm tve_tth tve_lst"><div class="thrv_wrapper thrv_contentbox_shortcode" data-tve-style="5"><div class="tve_cb tve_cb5 tve_blue" style="margin: -20px -20px -20px 0;"><div class="tve_cb_cnt"><h2 style="color: #fff; font-size: 32px; margin-top: 25px;margin-bottom: 20px;" class="rft">Subscribe to our Newsletter!</h2><p style="color: #fff; font-size: 18px; margin-top: 0;">Join our 746,498 subscribers and get instant access to the latest android tutorials, app reviews and much more!</p><div data-tve-style="1" class="thrv_wrapper thrv_lead_generation tve_clearfix tve_red tve_11 thrv_lead_generation_horizontal" data-inputs-count="11" style="margin-top: 0;margin-bottom: 20px;" data-tve-version="1" data-connection="api"><div style="display: none;" class="thrv_lead_generation_code"></div><input class="tve-lg-err-msg" value="{&quot;email&quot;:&quot;Please enter a valid email address&quot;,&quot;phone&quot;:&quot;Please enter a valid phone number&quot;,&quot;required&quot;:&quot;Name and Email fields are required&quot;}" type="hidden"><div class="thrv_lead_generation_container tve_clearfix"><form action="#" method="post"><input class="tve-f-a-hidden" value="#" type="hidden"><div class="tve_lead_generated_inputs_container tve_clearfix"><div class="tve_lead_fields_overlay"></div><div class="tve_lg_input_container tve_lg_input tve_lg_2"><input data-field="email" data-required="1" data-validation="email" name="email" placeholder="Email" data-placeholder="Email" style="padding-right: 20px;" type="email"></div><input id="__tcb_lg_fc" name="__tcb_lg_fc" value="YToxOntzOjU6InNlbmR5IjtzOjI0OiJTcHMzNzYzaEwweTVrbnZHS2xIVjB4QnciO30=" type="hidden"><input id="_asset_group" name="_asset_group" value="" type="hidden"><input id="_asset_option" name="_asset_option" value="" type="hidden"><input id="_back_url" name="_back_url" value="http://www.androidhive.info/subscription-successful/" type="hidden"><input id="_submit_option" name="_submit_option" value="redirect" type="hidden"><input id="_use_captcha" name="_use_captcha" value="" type="hidden"><input id="_captcha_theme" name="_captcha_theme" value="light" type="hidden"><input id="_captcha_type" name="_captcha_type" value="image" type="hidden"><input id="_captcha_size" name="_captcha_size" value="normal" type="hidden"><div style="display: none"></div><div class="tve_lg_input_container tve_submit_container tve_lg_submit tve_lg_2"><button type="Submit">SUBSCRIBE</button></div></div></form></div></div></div></div></div></div></div></div></div></div></div></div><hr><script async="" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/adsbygoogle.js"></script>  <ins data-adsbygoogle-status="done" class="adsbygoogle" style="display: inline-block; width: 300px; height: 250px;" data-ad-client="ca-pub-8479132932764602" data-ad-slot="9757174378"><ins id="aswift_2_expand" style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><ins id="aswift_2_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;" frameborder="0" height="250" width="300"></iframe></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div><div style="font-size:0px;height:0px;line-height:0px;margin:0;padding:0;clear:both"></div><span id="tve_leads_end_content" style="display: block; visibility: hidden; border: 1px solid red;"></span> <script type="text/javascript">jQuery(document).ready(function($) {
    $.post('http://www.androidhive.info/wp-admin/admin-ajax.php', {action: 'mts_view_count', id: '38258'});
});</script> </div></div></div><div class="postauthor"><h4>About The Author</h4> <img alt="" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/9578184c8f454a148b0b59dd1d21dfaf.jpg" data-lazy-src="http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=100&amp;d=mm&amp;r=g" srcset="http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=200&amp;d=mm&amp;r=g 2x" class="avatar avatar-100 photo     lazyloaded" height="100" width="100"><noscript><img
 alt='' 
src='http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=100&#038;d=mm&#038;r=g'
 
srcset='http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=200&amp;d=mm&amp;r=g
 2x' class='avatar avatar-100 photo' height='100' width='100' /></noscript><h5 class="vcard"><a href="http://www.androidhive.info/author/admin/" rel="nofollow" class="fn">Ravi Tamada</a></h5><p>Ravi
 is hardcore Android programmer and Android programming has been his 
passion since he compiled his first hello-world program. Solving real 
problems of Android developers through tutorials has always been 
interesting part for him.</p></div><div class="related-posts"><h4>Related Posts</h4><div class="clear"> <article class="latestPost excerpt  "> <a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-3/" title="Android Building Realtime Chat App using GCM, PHP &amp; MySQL – Part 3" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/android-realtime-chat-app-using-gcm-php-mysql-part-3-270x165.png" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2016/02/android-realtime-chat-app-using-gcm-php-mysql-part-3-270x165.png" class="attachment-featured size-featured wp-post-image     lazyloaded" alt="android-realtime-chat-app-using-gcm-php-mysql-part-3" title="" height="165" width="270"><noscript><img
 width="270" height="165" 
src="http://www.androidhive.info/wp-content/uploads/2016/02/android-realtime-chat-app-using-gcm-php-mysql-part-3-270x165.png"
 class="attachment-featured size-featured wp-post-image" 
alt="android-realtime-chat-app-using-gcm-php-mysql-part-3" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-3/" title="Android Building Realtime Chat App using GCM, PHP &amp; MySQL – Part 3">Android Building Realtime Chat App using GCM, PHP &amp; MySQL – Part 3</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada">Ravi Tamada</a><span class="divider1">/</span></span></span></div> </header> </article> <article class="latestPost excerpt  "> <a href="http://www.androidhive.info/2014/01/how-to-create-rest-api-for-android-app-using-php-slim-and-mysql-day-12-2/" title="How to create REST API for Android app using PHP, Slim and MySQL – Day 1/2" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/Android-rest-api-banner13-270x165.jpg" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2014/01/Android-rest-api-banner13-270x165.jpg" class="attachment-featured size-featured wp-post-image     lazyloaded" alt="android rest api php mysql slim" title="" height="165" width="270"><noscript><img
 width="270" height="165" 
src="http://www.androidhive.info/wp-content/uploads/2014/01/Android-rest-api-banner13-270x165.jpg"
 class="attachment-featured size-featured wp-post-image" alt="android 
rest api php mysql slim" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2014/01/how-to-create-rest-api-for-android-app-using-php-slim-and-mysql-day-12-2/" title="How to create REST API for Android app using PHP, Slim and MySQL – Day 1/2">How to create REST API for Android app using PHP, Slim and MySQL – Day 1/2</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada">Ravi Tamada</a><span class="divider1">/</span></span></span></div> </header> </article> <article class="latestPost excerpt  last"> <a href="http://www.androidhive.info/2014/06/android-facebook-like-custom-listview-feed-using-volley/" title="Android Facebook like Custom ListView Feed using Volley" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/android-facebook-like-news-feed-270x165.jpg" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2014/06/android-facebook-like-news-feed-270x165.jpg" class="attachment-featured size-featured wp-post-image     lazyloaded" alt="android facebook like custom news feed view" title="" height="165" width="270"><noscript><img
 width="270" height="165" 
src="http://www.androidhive.info/wp-content/uploads/2014/06/android-facebook-like-news-feed-270x165.jpg"
 class="attachment-featured size-featured wp-post-image" alt="android 
facebook like custom news feed view" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2014/06/android-facebook-like-custom-listview-feed-using-volley/" title="Android Facebook like Custom ListView Feed using Volley">Android Facebook like Custom ListView Feed using Volley</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada">Ravi Tamada</a><span class="divider1">/</span></span></span></div> </header> </article> <article class="latestPost excerpt  "> <a href="http://www.androidhive.info/2012/10/android-multilevel-listview-tutorial/" title="Android Multilevel ListView Tutorial" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/bann-270x165.png" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/bann-270x165.png" class="attachment-featured size-featured wp-post-image     lazyloaded" alt="android multilevel listview tutorial" title="" height="165" width="270"><noscript><img
 width="270" height="165" 
src="http://www.androidhive.info/wp-content/uploads/2012/10/bann-270x165.png"
 class="attachment-featured size-featured wp-post-image" alt="android 
multilevel listview tutorial" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2012/10/android-multilevel-listview-tutorial/" title="Android Multilevel ListView Tutorial">Android Multilevel ListView Tutorial</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada">Ravi Tamada</a><span class="divider1">/</span></span></span></div> </header> </article></div></div></div><div id="disqus_thread" data-disqus-shortname="androidhive"></div></div> </article> <aside id="sidebar" class="sidebar c-4-12 " role="complementary" itemscope="" itemtype="http://schema.org/WPSideBar"><div id="search-2" class="widget widget_search"><h3 class="widget-title">SEARCH HERE</h3><form method="get" id="searchform" class="search-form" action="http://www.androidhive.info" _lpchecked="1"><fieldset> <input name="s" id="s" placeholder="Search the site" type="text"> <button id="search-image" class="sbutton" type="submit" value=""> <i class="fa fa-search"></i> </button></fieldset></form></div><div id="text-9" class="widget widget_text"><div class="textwidget"><a href="http://www.androidhive.info/reviews"><img class="     lazyloaded" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/reviews_banner.jpg" data-lazy-src="http://api.androidhive.info/tmp/reviews_banner.jpg"><noscript><img src="http://api.androidhive.info/tmp/reviews_banner.jpg"/></noscript></a></div></div><div id="text-6" class="widget widget_text"><h3 class="widget-title">WE’RE SOCIAL</h3><div class="textwidget"><div fb-iframe-plugin-query="app_id=&amp;container_width=300&amp;hide_cover=false&amp;href=https%3A%2F%2Fwww.facebook.com%2FAndroidHive%2F&amp;locale=en_US&amp;sdk=joey&amp;show_facepile=true&amp;width=340" fb-xfbml-state="rendered" class="fb-page fb_iframe_widget" data-href="https://www.facebook.com/AndroidHive/" data-width="340" data-hide-cover="false" data-show-facepile="true"><span style="vertical-align: bottom; width: 300px; height: 214px;"><iframe class="" src="https://web.facebook.com/plugins/page.php?app_id=&amp;channel=http%3A%2F%2Fstaticxx.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D42%23cb%3Df219733118e85d4%26domain%3Dwww.androidhive.info%26origin%3Dhttp%253A%252F%252Fwww.androidhive.info%252Ff208a61e917a3c4%26relation%3Dparent.parent&amp;container_width=300&amp;hide_cover=false&amp;href=https%3A%2F%2Fwww.facebook.com%2FAndroidHive%2F&amp;locale=en_US&amp;sdk=joey&amp;show_facepile=true&amp;width=340" style="border: medium none; visibility: visible; width: 300px; height: 214px;" title="fb:page Facebook Social Plugin" scrolling="no" allowfullscreen="true" allowtransparency="true" name="fc6c2de0560e0e" frameborder="0" height="1000px" width="340px"></iframe></span></div></div></div><div id="text-8" class="widget widget_text"><div class="textwidget"><div class="tve-leads-shortcode tve-tl-anim tl-anim-instant tve-leads-track-shortcode_39260 tve-leads-triggered"><div class="tl-style" id="tve_36_set" data-state="6"><div class="tve-leads-conversion-object" data-tl-type="shortcode_39260"><div class="tve_flt"><div class="thrv-leads-form-box tve_no_drag tve_no_icons tve_element_hover thrv_wrapper tve_editor_main_content tve_36_set tve_brdr_solid tve_blue"><h2 class="tve_p_center" style="font-size: 17px;">Subscribe to Newsletter</h2><p class="tve_p_center" style="font-size: 14px;">Join our 746,498 subscribers and get access to the latest android tutorials, freebies, scripts and much more!</p><div class="thrv_wrapper thrv_lead_generation tve_clearfix tve_red tve_11 thrv_lead_generation_vertical" data-tve-style="1" data-tve-version="1" data-inputs-count="11" data-connection="api"><input class="tve-lg-err-msg" value="{&quot;email&quot;:&quot;Please enter a valid email address&quot;,&quot;phone&quot;:&quot;Please enter a valid phone number&quot;,&quot;required&quot;:&quot;Highlighted fields are required&quot;}" type="hidden"><div class="thrv_lead_generation_code" style="display: none;"></div><div class="thrv_lead_generation_container tve_clearfix"><form action="#" method="post"><input class="tve-f-a-hidden" value="#" type="hidden"><div class="tve_lead_generated_inputs_container tve_clearfix"><div class="tve_lead_fields_overlay"></div><div class="tve_lg_input_container tve_lg_input tve_lg_2"><input data-field="email" data-required="1" data-validation="email" name="email" placeholder="Email" data-placeholder="Email" style="padding-right: 20px;" type="email"></div><input id="__tcb_lg_fc" name="__tcb_lg_fc" value="YToxOntzOjU6InNlbmR5IjtzOjI0OiJTcHMzNzYzaEwweTVrbnZHS2xIVjB4QnciO30=" type="hidden"><input id="_asset_group" name="_asset_group" value="" type="hidden"><input id="_asset_option" name="_asset_option" value="" type="hidden"><input id="_back_url" name="_back_url" value="http://www.androidhive.info/subscription-successful/" type="hidden"><input id="_submit_option" name="_submit_option" value="redirect" type="hidden"><input id="_use_captcha" name="_use_captcha" value="" type="hidden"><input id="_captcha_theme" name="_captcha_theme" value="light" type="hidden"><input id="_captcha_type" name="_captcha_type" value="image" type="hidden"><input id="_captcha_size" name="_captcha_size" value="normal" type="hidden"><div style="display: none"></div><div class="tve_lg_input_container tve_submit_container tve_lg_submit tve_lg_2" tve-data-style="1"><button type="Submit">Sign Up</button></div></div></form></div></div><p class="tve_p_center" style="font-size: 14px;">We strictly care about your privacy!</p></div></div></div></div></div></div></div><div id="views-2" class="widget widget_views"><h3 class="widget-title">POPULAR ANDROID TUTORIALS</h3><ul><li class="postviews"><a href="http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/" title="Android SQLite Database Tutorial">Android SQLite Database Tutorial - 1,379,240 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/" title="How to connect Android with PHP, MySQL">How to connect Android with PHP, MySQL - 1,356,207 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/01/android-json-parsing-tutorial/" title="Android JSON Parsing Tutorial">Android JSON Parsing Tutorial - 1,211,747 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/" title="Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL">Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL - 1,141,238 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2013/11/android-sliding-menu-using-navigation-drawer/" title="Android Sliding Menu using Navigation Drawer">Android Sliding Menu using Navigation Drawer - 1,042,422 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/" title="Android Custom ListView with Image and Text">Android Custom ListView with Image and Text - 953,598 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/" title="Android Login and Registration with PHP, MySQL and SQLite">Android Login and Registration with PHP, MySQL and SQLite - 912,293 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/" title="Android GPS, Location Manager Tutorial">Android GPS, Location Manager Tutorial - 694,676 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2013/10/android-tab-layout-with-swipeable-views-1/" title="Android Tab Layout with Swipeable Views">Android Tab Layout with Swipeable Views - 661,385 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2013/08/android-working-with-google-maps-v2/" title="Android working with Google Maps V2">Android working with Google Maps V2 - 586,265 views</a></li></ul></div></aside></div> <footer id="site-footer" role="contentinfo" itemscope="" itemtype="http://schema.org/WPFooter"><div class="container"><div class="footer-widgets first-footer-widgets widgets-num-3"><div class="f-widget f-widget-1"><div id="nav_menu-2" class="widget widget_nav_menu toggle-menu"><h3 class="widget-title">QUICK CONTACT</h3><div class="menu-quick-contact-container"><ul id="menu-quick-contact" class="menu"><li id="menu-item-39273" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39273"><a href="http://www.androidhive.info/advertise-with-us/">Advertise with us</a></li><li id="menu-item-39244" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39244"><a href="http://www.androidhive.info/privacy-policy/">Privacy Policy</a></li><li id="menu-item-39245" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39245"><a href="http://www.androidhive.info/terms-of-service/">Terms of Service</a></li><li id="menu-item-39266" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39266"><a href="http://www.androidhive.info/sitemap/">Sitemap</a></li></ul></div></div></div><div class="f-widget f-widget-2"></div><div class="f-widget last f-widget-3"><div id="text-7" class="widget widget_text"><h3 class="widget-title">ABOUT ANDROIDHIVE</h3><div class="textwidget">AndroidHive
 is beginner's paradise for android tutorials, tips &amp; tricks, games,
 app reviews, hacks and super cool advanced topics.</div></div></div></div><div class="copyrights"><div class="row" id="copyright-note"> <span>Copyright © 2016 Droid5 Informatics Pvt Ltd.</span><div class="to-top"></div></div></div></div> </footer></div><div class=" fb_reset" id="fb-root"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/xd_arbiter.htm" style="border: medium none;" tabindex="-1" title="Facebook Cross Domain Communication Frame" aria-hidden="true" id="fb_xdm_frame_http" scrolling="no" allowfullscreen="true" allowtransparency="true" name="fb_xdm_frame_http" frameborder="0"></iframe><iframe src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/xd_arbiter_002.htm" style="border: medium none;" tabindex="-1" title="Facebook Cross Domain Communication Frame" aria-hidden="true" id="fb_xdm_frame_https" scrolling="no" allowfullscreen="true" allowtransparency="true" name="fb_xdm_frame_https" frameborder="0"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div></div> <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&version=v2.6";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> <script id="dsq-count-scr" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/count.htm" async=""></script> <script>/**************************************************************/
/*AM22
 Named Function to load Disqus - START*/
jQuery(document).ready(function(){
var disqus_identifier = window.location.url; //Use current page URL as 
Disqus_URL_Identifier. You can change it as per your requirement.
var ds_loaded = false; //To track loading only once on a page.
function loadDisqus()
{
    var disqus_div = jQuery("#disqus_thread"); //The ID of the Disqus 
DIV tag
    var top = disqus_div.offset().top;
    var disqus_data = disqus_div.data();
    if ( !ds_loaded && jQuery(window).scrollTop() + 
jQuery(window).height() > top ) 
    {
        ds_loaded = true;
        for (var key in disqus_data) 
        {
            if (key.substr(0,6) == 'disqus') 
            {
                window['disqus_' + 
key.replace('disqus','').toLowerCase()] = disqus_data[key];
            }
        }
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = 'http://' + window.disqus_shortname + 
'.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || 
document.getElementsByTagName('body')[0]).appendChild(dsq);
    }  
}
/*AM22 Named Function to load Disqus - END*/
/*AM22 Disqus lazy load - START*/
jQuery(function () 
{
    var disqus_div = jQuery("#disqus_thread");
    if (disqus_div.size() > 0) 
    {
        jQuery(window).scroll(loadDisqus);      
    }  
}
);
/*AM22 Disqus lazy load - END*/
});</script><div id="tve_notification_box"></div><script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/shCore.js"></script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/shBrushSql.js"></script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/shBrushPhp.js"></script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/shBrushJava.js"></script> <script type="text/javascript">(function(){

		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = 
"http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";

		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, 
document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = 
"http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";

		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		
//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);

		document.getElementsByTagName("head")[0].insertBefore( themecss, 
document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t 
configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();</script> <link rel="stylesheet" id="tve-leads-font-273e5a04440549b4af13b50a0afd3966-css" href="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/css_002.css" type="text/css" media="all"><link rel="stylesheet" id="tve-leads-font-9062833c9baa57b288ba47a7993dc1c0-css" href="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/css.css" type="text/css" media="all"> <script type="text/javascript">/*  */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/www.androidhive.info\/wp-admin\/admin-ajax.php","post_id":"38258"};
/*  */</script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/postviews-cache.js"></script> <script type="text/javascript">/*  */
var tve_dash_front = {"ajaxurl":"http:\/\/www.androidhive.info\/wp-admin\/admin-ajax.php"};
/*  */</script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/frontend_002.js"></script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/wp-embed.js"></script> <script type="text/javascript">/*
  */
var tve_frontend_options = 
{"is_editor_page":"","page_events":[],"is_single":"1","ajaxurl":"http:\/\/www.androidhive.info\/wp-admin\/admin-ajax.php","social_fb_app_id":""};
/*
  */</script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/thrive_content_builder_frontend.js"></script> <script type="text/javascript" src="Android%20adding%20SMS%20Verification%20Like%20WhatsApp%20-%20Part%201_files/frontend.js"></script> <script type="text/javascript">/**/var
 
TL_Const={"security":"7080c87f60","ajax_url":"\/\/www.androidhive.info\/wp-admin\/admin-ajax.php","forms":{"shortcode_39261":{"_key":"7","trigger":"page_load","trigger_config":{},"form_type_id":"39261","main_group_id":"39261","active_test_id":""},"shortcode_39260":{"_key":"6","trigger":"page_load","trigger_config":{},"form_type_id":"39260","main_group_id":"39260","active_test_id":""}},"action_conversion":"tve_leads_ajax_conversion","action_impression":"tve_leads_ajax_impression","ajax_load":0,"shortcode_ids":["39261","39260"],"custom_post_data":{"get_data":{"q":"\/2015\/08\/android-adding-sms-verification-like-whatsapp-part-1\/"},"http_referrer":"https:\/\/www.google.co.in\/"},"current_screen":{"screen_type":4,"screen_id":38258},"ignored_fields":["email","_captcha_size","_captcha_theme","_captcha_type","_submit_option","_use_captcha","g-recaptcha-response","__tcb_lg_fc","_back_url","_submit_option","url","_asset_group","_asset_option","mailchimp_optin"]}/*
 */</script><script type="text/javascript">var TL_Front = TL_Front || 
{}; TL_Front.impressions_data = TL_Front.impressions_data || 
{};TL_Front.impressions_data.shortcode_39261 = 
{"group_id":"39261","form_type_id":"39261","variation_key":"7","active_test_id":null,"output_js":true};TL_Front.impressions_data.shortcode_39260
 = 
{"group_id":"39260","form_type_id":"39260","variation_key":"6","active_test_id":null,"output_js":true};</script><script type="text/javascript">(function ($) {
	$(function () {
		var event_data = {"form_id":"tve-leads-track-shortcode_39261","form_type":"shortcode"};
		event_data.source = 'page_load';
		setTimeout(function () {
			ThriveGlobal.$j(TL_Front).trigger('showform.thriveleads', event_data);
			}, 200);
		});
	})
(ThriveGlobal.$j);</script><script type="text/javascript">(function ($) {
	$(function () {
		var event_data = {"form_id":"tve-leads-track-shortcode_39260","form_type":"shortcode"};
		event_data.source = 'page_load';
		setTimeout(function () {
			ThriveGlobal.$j(TL_Front).trigger('showform.thriveleads', event_data);
			}, 200);
		});
	})
(ThriveGlobal.$j);</script>
</body></html>
<!-- This website is like a Rocket, isn't it ? Performance optimized by WP Rocket. Learn more: http://wp-rocket.me - Debug: cached@1462792278 -->